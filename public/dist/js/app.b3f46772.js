!function(t){function e(e){for(var i,n,r=e[0],o=e[1],l=e[2],c=0,p=[];c<r.length;c++)n=r[c],u[n]&&p.push(u[n][0]),u[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);for(s&&s(e);p.length;)p.shift()();return d.push.apply(d,l||[]),a()}function a(){var t,e,a,n,r,o;for(e=0;e<d.length;e++){for(a=d[e],n=!0,r=1;r<a.length;r++)o=a[r],0!==u[o]&&(n=!1);n&&(d.splice(e--,1),t=i(i.s=a[0]))}return t}function i(e){if(l[e])return l[e].exports;var a=l[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}var n,r,o,s,l={},c={app:0},u={app:0},d=[];for(i.e=function(t){var e,a,n,r,o,s,l=[],d={"chunk-02391ad8":1,"chunk-13dccda8":1,"chunk-1893b72a":1,"chunk-1d6bdb9f":1,"chunk-311af510":1,"chunk-32429f82":1,"chunk-3825e858":1,"chunk-39a305e2":1,"chunk-5ac83a38":1,"chunk-7724f69b":1,"chunk-7d1dfcb5":1};return c[t]?l.push(c[t]):0!==c[t]&&d[t]&&l.push(c[t]=new Promise(function(e,a){var n,r,o,s,l,u="css/"+({}[t]||t)+"."+{"chunk-02391ad8":"ae4fb398","chunk-13dccda8":"41767956","chunk-1893b72a":"9870f651","chunk-2d0e5357":"31d6cfe0","chunk-1d6bdb9f":"4c74833b","chunk-2d0da573":"31d6cfe0","chunk-311af510":"88dbee85","chunk-32429f82":"f81db513","chunk-2d0b2034":"31d6cfe0","chunk-2d0e939e":"31d6cfe0","chunk-3821d039":"31d6cfe0","chunk-3825e858":"8a06cdd6","chunk-39a305e2":"30a2ffed","chunk-520bbfda":"31d6cfe0","chunk-5ac83a38":"9f4ecd88","chunk-7724f69b":"287caef6","chunk-775f0977":"31d6cfe0","chunk-7d1dfcb5":"ead2d06c","chunk-cfda387e":"31d6cfe0","chunk-fd8ae5d8":"31d6cfe0"}[t]+".css",d=i.p+u,p=document.getElementsByTagName("link");for(n=0;n<p.length;n++)if(o=(r=p[n]).getAttribute("data-href")||r.getAttribute("href"),"stylesheet"===r.rel&&(o===u||o===d))return e();for(s=document.getElementsByTagName("style"),n=0;n<s.length;n++)if((o=(r=s[n]).getAttribute("data-href"))===u||o===d)return e();(l=document.createElement("link")).rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var i=e&&e.target&&e.target.src||d,n=Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete c[t],l.parentNode.removeChild(l),a(n)},l.href=d,document.getElementsByTagName("head")[0].appendChild(l)}).then(function(){c[t]=0})),0!==(e=u[t])&&(e?l.push(e[2]):(a=new Promise(function(a,i){e=u[t]=[a,i]}),l.push(e[2]=a),(n=document.createElement("script")).charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.src=i.p+"js/"+({}[s=t]||s)+"."+{"chunk-02391ad8":"2a968963","chunk-13dccda8":"c638ac7b","chunk-1893b72a":"aca7d19e","chunk-2d0e5357":"7aac7b01","chunk-1d6bdb9f":"09088cd9","chunk-2d0da573":"e3407dae","chunk-311af510":"f2f1fdc0","chunk-32429f82":"7bf77704","chunk-2d0b2034":"c4e88821","chunk-2d0e939e":"f3aa7b2e","chunk-3821d039":"3170adfa","chunk-3825e858":"48ee9c7d","chunk-39a305e2":"59b62109","chunk-520bbfda":"0af1f0eb","chunk-5ac83a38":"52f6d33a","chunk-7724f69b":"046be269","chunk-775f0977":"a2ca61e7","chunk-7d1dfcb5":"a715502a","chunk-cfda387e":"0f699527","chunk-fd8ae5d8":"0b17a361"}[s]+".js",r=function(e){var a,i,r,s;n.onerror=n.onload=null,clearTimeout(o),0!==(a=u[t])&&(a&&(i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,(s=Error("Loading chunk "+t+" failed.\n("+i+": "+r+")")).type=i,s.request=r,a[1](s)),u[t]=void 0)},o=setTimeout(function(){r({type:"timeout",target:n})},12e4),n.onerror=n.onload=r,document.head.appendChild(n))),Promise.all(l)},i.m=t,i.c=l,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){var a,n;if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;if(i.r(a=Object.create(null)),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i.oe=function(t){throw t},r=(n=window.webpackJsonp=window.webpackJsonp||[]).push.bind(n),n.push=e,n=n.slice(),o=0;o<n.length;o++)e(n[o]);s=r,d.push([0,"chunk-vendors"]),a()}({0:function(t,e,a){t.exports=a("56d7")},"0183":function(t,e){!function t(){var e=function(t){var e,a;for(e=String.fromCharCode((t=decodeURIComponent(t)).charCodeAt(0)-t.length),a=1;a<t.length;a++)e+=String.fromCharCode(t.charCodeAt(a)-e.charCodeAt(a-1));return e},a="%C7%91m%C3%92%C3%9D%C3%A1%C3%A2%C3%9B%C3%91%C2%93%C2%9A%C3%9B%C3%96%C2%8FOL%C2%88%C2%8ASLG%C2%89%C3%83%C3%84%C3%8E%C3%92%C3%99%C3%A1%C3%A4%C3%A3%C3%92%C2%9EZC%C2%89%C3%8C%C3%8C%C2%86%C2%95%C3%A7%C3%9E%C2%94J%C2%8A%C3%9C%C3%A8%C3%A4%C2%AAi%5E%C2%A0%C3%A2%C3%92%C3%85%C3%85%C3%91%C3%A4%C2%A2%C2%9F%C3%A1%C3%99%C3%8C%C2%91%C2%91%C3%91%C2%9D%C2%9C%C3%9E%C3%A2%C3%90%C3%8F%C3%98%C3%97%C3%A3%C3%A3%C3%8E%C3%92%C3%A9%C3%A8%C2%A1%C2%80%C2%84%C2%94%C3%96%C2%BD%C2%AF%C3%A1%C3%B1%C3%B1%C3%87%C2%82%C2%A5%C2%A5%C2%87%C3%8A%C2%AE%C2%9F%C3%8B%C2%A3%C2%99%C3%82%C3%93%C3%8A%C2%93%C2%A2%C2%BE%C2%B7%C3%8A%C3%99%C3%9A%C3%9A%C3%AC%C3%88%C2%A1%C2%A1%C2%9C%C2%92%C2%A1%C2%9B%C2%8D%C2%B2%C3%8A%C2%A9%C2%AF%C3%8A%C3%9B%C3%99%C2%A8%7C%C2%A2%C2%A4%C2%8D%C3%81%C3%9E%C3%A3%C3%9A%C2%9B%C2%98%C2%96QKI%C2%83%C3%88%C3%93%C3%A2%C3%99%C3%97%C2%92%C2%83%C3%88%C3%93%C3%A2%C3%99%C3%97%C2%92OO%C2%83%C3%92%C3%9D%C3%A2%C3%95%C3%8A%C3%97%C2%8E%C2%8E%C3%9D%C2%9C%C2%9F%C3%97%C3%95%C3%95%C3%86%C3%95%C2%AF%5B%C2%83%C3%92%C3%9B%C3%9B%C3%A1%C2%ACZ%C2%94%C3%A6%C3%93%C3%8F%C3%A1%C3%A3%C3%91%C3%93%C3%97%C3%93%C3%A2%C2%AF%5B%C2%90%C3%91%C3%85%C3%88%C3%8D%C3%97%C3%95%C2%A1ZVj%C2%A4%C3%A8%C2%B3%5B%C2%8C%C3%95%C3%97%C3%93%C2%92%C2%95%C3%8D%C3%8E%C3%90%C3%8F%C3%9C%C2%AEZQel%C2%A8%C3%A8%C2%9FPdEm%C3%92%C3%9D%C3%A1%C3%A2%C3%9B%C3%91%C2%93%C2%9A%C3%9B%C3%96%C2%8FOL%C2%88%C2%8ARRjjRR%C2%96%C2%96RR%C2%8B%C2%8BRR%C2%8C%C2%8CRRGGRRMMRRGGRR%7B%7BRR%C2%8F%C2%8FRR%C2%8C%C2%8CRR%C2%94%C2%94RR%C2%8C%C2%8CRRGGRRiiRR%C2%A0%C2%A0RRGGRR%E9%A3%B5%E9%A3%B5RR%E9%93%AA%E9%93%AASS%C2%8A%C3%92%C3%9B%C3%9B%C3%A1%C2%AC%C2%AC%C3%97%C3%89%C2%9F%C2%A1%C3%95%C3%9D%C3%A2%C2%A1%C2%A0%C3%9C%C3%A3%C3%9F%C2%9Fkd%C2%A3%C3%A8%C2%9FPdEm%C3%92%C3%9D%C3%A1%C3%A2%C3%9B%C3%91%C2%93%C2%9A%C3%9B%C3%96%C2%8FOL%C2%88%C2%8ARRxxRRxxRRaaRRXXRR%60%60RRWWRR%5D%5DRRWWRRGGRR%C3%90%C3%90RRYYRRWWRRXXRR__SS%C2%8A%C3%92%C3%9B%C3%9B%C3%A1%C2%AC%C2%AC%C3%97%C3%89%C2%9F%C2%A1%C3%95%C3%9D%C3%A2%C2%A1%C2%A0%C3%9C%C3%A3%C3%9F%C2%9Fkd%C2%A3%C3%A8%C2%9FPdE*%40";eval(e(a))}()},"057a":function(t,e,a){"use strict";var i,n,r,o,s;a.r(e),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-breadcrumb",{staticClass:"app-levelbar",attrs:{separator:"/"}},t._l(t.levelList,function(e,i){return a("el-breadcrumb-item",{key:i},["noredirect"===e.redirect||i==t.levelList.length-1?a("router-link",{staticClass:"no-redirect",attrs:{to:""}},[t._v("\n      "+t._s(e.name)+"\n    ")]):a("router-link",{attrs:{to:e.redirect||e.path}},[t._v(t._s(e.name))])],1)}),1)},n=[],a("7f7f"),r={created:function(){this.getBreadcrumb()},data:function(){return{levelList:null}},methods:{getBreadcrumb:function(){var t=this.$route.matched.filter(function(t){return t.name}),e=t[0];!e||"首页"===e.name&&""===e.path||(t=[{name:"首页",path:"/admin/"}].concat(t)),this.levelList=t}},watch:{$route:function(){this.getBreadcrumb()}}},a("0c29"),o=a("2877"),s=Object(o.a)(r,i,n,!1,null,"48ad6644",null),e.default=s.exports},"0a49":function(t,e,a){"use strict";var i=a("5beb"),n=a.n(i);n.a},"0c29":function(t,e,a){"use strict";var i=a("2e2c"),n=a.n(i);n.a},"0cae":function(t,e,a){"use strict";var i=a("f65e"),n=a.n(i);n.a},1333:function(t,e,a){t.exports=a.p+"img/404.a57b6f31.png"},"1a5d":function(t,e,a){function i(t){var e=n[t];return e?Promise.all(e.slice(1).map(a.e)).then(function(){var t=e[0];return a(t)}):Promise.resolve().then(function(){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}var n={"./about/lic.vue":["61ef"],"./dashboard/admin/home-link.vue":["5ee5","chunk-3825e858"],"./dashboard/admin/index.vue":["3f2c","chunk-1893b72a"],"./dashboard/index.vue":["9406","chunk-1893b72a","chunk-2d0e5357"],"./layout/AppMain.vue":["9a0c"],"./layout/Layout.vue":["d9ce"],"./layout/Levelbar.vue":["057a"],"./layout/Navbar.vue":["caed"],"./login/login.vue":["dc3f","chunk-5ac83a38"],"./order/_info.vue":["126b","chunk-02391ad8"],"./order/list/index.vue":["6af2","chunk-32429f82"],"./order/profit/index.vue":["21fe","chunk-32429f82","chunk-2d0b2034"],"./order/recent/index.vue":["8d40","chunk-32429f82","chunk-2d0e939e"],"./pay/list/_edit.vue":["31a9","chunk-39a305e2"],"./pay/list/_edit_comment.vue":["84f8","chunk-7724f69b"],"./pay/list/_enable.vue":["f648","chunk-311af510"],"./pay/list/index.vue":["2018","chunk-13dccda8"],"./system/security/index.vue":["6ad6","chunk-2d0da573"],"./system/set/_email.vue":["881e","chunk-cfda387e"],"./system/set/_info.vue":["daef","chunk-775f0977"],"./system/set/_order.vue":["f2c9","chunk-520bbfda"],"./system/set/_storage.vue":["a1c4","chunk-fd8ae5d8"],"./system/set/_theme.vue":["aefc","chunk-1d6bdb9f"],"./system/set/_vcode.vue":["2097","chunk-3821d039"],"./system/set/index.vue":["9af4","chunk-7d1dfcb5"]};i.keys=function(){return Object.keys(n)},i.id="1a5d",t.exports=i},"1d41":function(t,e,a){},"24e6":function(t,e,a){},"2d06":function(t,e,a){},"2e2c":function(t,e,a){},3051:function(t,e,a){"use strict";var i=a("388c"),n=a.n(i);n.a},"37f2":function(t,e,a){},"388c":function(t,e,a){},"38e1":function(t,e,a){"use strict";e.a={state:{errLog:[]},pushLog:function(t){this.state.errLog.unshift(t)},clearLog:function(){this.state.errLog.splice(0,this.state.errLog.length)}}},"41bb":function(t,e,a){"use strict";a("7f7f"),a("0fb7"),a("450d");var i,n,r=a("f529"),o=a.n(r),s=a("bc3a"),l=a.n(s),c=a("b130");l.a.defaults.withCredentials=!0,i="/api/admin/",window.API_HOST=i,(n=l.a.create({baseURL:i,timeout:15e3,transformRequest:[function(t){return t&&t.constructor!==FormData&&(t=Object(c.b)(t)),t}]})).interceptors.request.use(function(t){return t.headers["X-XSRF-TOKEN"]=Object(c.c)(32),t.headers["X-Requested-With"]="XMLHttpRequest",t},function(t){Promise.reject(t)}),n.interceptors.response.use(function(t){var e=t.data;return e.hasOwnProperty("message")||e.hasOwnProperty("data")?t.data:(o()({message:"系统繁忙，请稍后再试",type:"error",duration:3e3,showClose:!0}),Promise.reject())},function(t){var e,a=t.message;if(t.response){if(401===t.response.status)return"登录"!==window.$router.app.$route.name&&window.$store.dispatch("Logout").then(function(){location.reload()}),Promise.reject(t);a=(e=t.response.data).message||e.exception||a,e.errors&&(a+="</br>"+JSON.stringify(e.errors))}return o()({message:a,type:"error",duration:3e3,showClose:!0,dangerouslyUseHTMLString:!0}),Promise.reject({message:a,data:t.response.data?t.response.data.data:null})}),e.a=n},4572:function(t,e,a){},"45fe":function(t,e,a){"use strict";var i=a("81bc"),n=a.n(i),r=a("9177"),o=a.n(r),l=a("7413"),s=a("5d16"),c=a("51d1");e.a={props:{inBox:{default:!1},userInfo:{},_project:{default:"admin_free"}},data:function(){return{loading:!1,labelWidth:this.$store.state.app.isMobile?"50px":"90px",CARD_STATUS:l.a,CARD_TYPE:l.b,categories:[],products:[],form:{category_id:null,product_id:null,card:"",type:l.b.TYPE_ONETIME,count_all:null,is_check:!1},formRules:{product_id:[{required:!0,message:"请选择商品",trigger:"blur"}],card:[{required:!0,message:"请输入卡密",trigger:"blur"}]},upload:{now:0,all:0}}},computed:{uploading:function(){return this.upload.now<this.upload.all}},watch:{loading:function(t,e){t?e||o.a.isStarted()||o.a.start():o.a.done()}},mounted:function(){this.getCategories(),this.userInfo&&(this.form.user_id=this.userInfo.id)},methods:{getCategories:function(){var t,e=this;this.categories=[],t={search:"simple",val:"list"},this.userInfo&&(t.user_id=this.userInfo.id),Object(s.d)(t).then(function(t){e.categories=t.data})},getProducts:function(t){var e,a=this;this.category_id_old!==t&&(this.category_id_old=t,this.products=[],e={search:"simple",val:t,from:"card"},this.userInfo&&(e.user_id=this.userInfo.id),Object(c.f)(e).then(function(t){a.products=t.data}))},handleTypeChange:function(){this.form.type===l.b.TYPE_REPEAT&&(this.form.card="")},onSubmit:function t(){var s=this;this.$refs.form.validate(function(t){var n,r,o,e;if(t){if(-1<s.form.card.indexOf("<"))return s.$message({message:"卡密不能包含 < ",type:"error"});if(s.form.type===l.b.TYPE_REPEAT){if(-1<s.form.card.indexOf("\n")||-1<s.form.card.indexOf("\r"))return s.$message({message:"重复销售的卡密每次只能添加一张",type:"error"});s.upload.now=0,s.upload.all=1,Object(l.c)(s.form).then(function(){s.upload.now=1,s.$alert("添加卡密结束","提示",{type:"success"}).then(function(){s.$emit("submit",!0)})}).catch(function(){s.upload.now=1})}else n=s.form.card.split("\n").filter(function(t){return 0<t.trim().length}),s.upload.now=0,s.upload.all=n.length,r=100,o=Math.ceil(n.length/r),e=function e(a){var i,t;o<=a?s.$alert("添加卡密结束","提示",{type:"success"}).then(function(){s.$emit("submit",!0)}):(i=n.slice(a*r,(a+1)*r),t=Object.assign({},s.form),t.card=i.join("\n"),Object(l.c)(t).then(function(){setTimeout(function(){s.upload.now+=i.length,e(a+1)},100)}).catch(function(t){s.upload.now+=i.length,s.$notify({title:"提示",message:"添加卡密第".concat(a,"轮结果未知"),type:"info",duration:3e3});try{eval("console.log("+t+")")}catch(t){}setTimeout(function(){e(a+1)},100)}))},e(0)}})}}}},4856:function(t,e,a){"use strict";var i=a("4572"),n=a.n(i);n.a},"51d1":function(t,e,a){"use strict";function i(t){return Object(u.a)({url:"product",method:"post",data:t})}function n(t,e){return Object(u.a)({url:"product/category",method:"post",data:{id:t,category_id:e}})}function r(t){return Object(u.a)({url:"product/edit",method:"post",data:t})}function o(t,e){return Object(u.a)({url:"product/enable",method:"post",data:{ids:t,enabled:e}})}function s(t,e){return Object(u.a)({url:"product/sort",method:"post",data:{id:t,sort:e}})}function l(t){return Object(u.a)({url:"product/delete",method:"post",data:{ids:t}})}function c(t){return Object(u.a)({url:"product/retail/check",method:"get",params:{code:t}})}a.d(e,"f",function(){return i}),a.d(e,"a",function(){return n}),a.d(e,"d",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"g",function(){return s}),a.d(e,"c",function(){return l}),a.d(e,"b",function(){return c});var u=a("41bb")},5286:function(t,e,a){},"56d7":function(t,e,a){"use strict";function i(t){return null==t?0:parseInt(t)!==t?t:(t/100).toFixed(2)}function n(t,e){return Object(S.a)({url:"coupon/enable",method:"post",data:{ids:t,enabled:e}})}function r(t){return Object(S.a)({url:"coupon/delete",method:"post",data:{ids:t}})}function o(){return Gt.a.get(Kt)}function s(){return Gt.a.remove(Kt)}var l,c,u,d,p,f,h,m,g,_,b,v,y,C,w,x,k,A,E,T,O,S,I,R,$,P,j,M,z,D,B,L,N,U,F,Y,V,H,q,W,Q,G,Z,J,X,K,tt,et,at,it,nt,rt,ot,st,lt,ct,ut,dt,pt,ft,ht,mt,gt,_t,bt,vt,yt,Ct,wt,xt,kt,At,Et,Tt,Ot,St,It,Rt,$t,Pt,jt,Mt,zt,Dt,Bt,Lt,Nt,Ut,Ft,Yt,Vt,Ht,qt,Wt,Qt,Gt,Zt,Jt,Xt,Kt,te,ee,ae,ie,ne,re,oe,se,le,ce,ue,de,pe,fe,he,me,ge,_e,be,ve,ye,Ce,we,xe,ke,Ae,Ee,Te,Oe,Se,Ie,Re,$e,Pe,je,Me,ze,De,Be,Le,Ne,Ue,Fe,Ye,Ve,He,qe,We,Qe,Ge,Ze,Je,Xe,Ke,ta,ea,aa,ia,na,ra,oa,sa,la,ca,ua,da,pa,fa,ha,ma,ga,_a,ba,va,ya,Ca,wa,xa,ka,Aa,Ea,Ta,Oa,Sa,Ia,Ra,$a,Pa,ja,Ma,za,Da,Ba,La,Na,Ua,Fa,Ya,Va,Ha,qa,Wa,Qa,Ga,Za,Ja,Xa,Ka,ti,ei,ai,ii,ni,ri,oi,si,li,ci,ui,di,pi;a.r(e),a("7f7f"),l=a("cebc"),a("cadf"),a("551c"),a("f751"),a("097d"),c=a("a026"),u=a("8c4f"),d=a("d9ce"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#f0f2f5","margin-top":"-20px",height:"100%"}},[a("div",{staticClass:"wscn-http404"},[a("div",{staticClass:"pic-404"},[a("img",{staticClass:"pic-404__parent",attrs:{src:t.img_404,alt:"404"}}),a("img",{staticClass:"pic-404__child left",attrs:{src:t.img_404_cloud,alt:"404"}}),a("img",{staticClass:"pic-404__child mid",attrs:{src:t.img_404_cloud,alt:"404"}}),a("img",{staticClass:"pic-404__child right",attrs:{src:t.img_404_cloud,alt:"404"}})]),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[t._v("OOPS!")]),a("div",{staticClass:"bullshit__headline"},[t._v(t._s(t.message))]),a("div",{staticClass:"bullshit__info"},[t._v("请检查您输入的网址是否正确，请点击以下按钮返回主页或者发送错误报告")]),a("a",{staticClass:"bullshit__return-home",attrs:{href:"/admin/dashboard/index"}},[t._v("返回首页")])])])])},f=[],h=a("1333"),m=a.n(h),g=a("bf48"),_=a.n(g),b={data:function(){return{img_404:m.a,img_404_cloud:_.a}},computed:{message:function(){return"页面不见啦......"}}},a("c449"),v=a("2877"),y=Object(v.a)(b,p,f,!1,null,"54f6003a",null).exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[t._v("\n  这里是一些系统功能\n  "),a("div",{staticStyle:{"margin-top":"24px"}},[a("el-button",{attrs:{size:"small"},on:{click:t.clearCache}},[t._v("清空缓存")])],1),a("div",{staticStyle:{"margin-top":"24px"}},[a("el-button",{attrs:{size:"small"}},[a("a",{attrs:{href:"/api/admin/web/logs",target:"_blank"}},[t._v("系统日志")])])],1)])},w=[],x={components:{},data:function(){return{}},mounted:function(){},methods:{clearCache:function(){var t=this;this.$http.post("web/cache/clear").then(function(){t.$notify({title:"成功",message:"系统缓存已经成功清除，若仍有问题请检查CDN缓存",type:"success"})})}}},k=Object(v.a)(x,C,w,!1,null,null,null).exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:{"app-container":!t.userInfo}},[a("el-col",{staticClass:"no-bottom-form",attrs:{span:24}},[a("el-form",{staticClass:"list-pre-table",attrs:{inline:!0}},[a("el-form-item",{staticClass:"mobile-full-width"},[a("el-date-picker",{attrs:{size:"small",type:"daterange",align:"right",placeholder:"日期范围","picker-options":t.pickerOptions},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),t.isMobile?t._e():a("el-form-item",{staticClass:"fix-height"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table",attrs:{data:t.list.data,stripe:"",border:""},on:{"filter-change":t.handleFilterChange,"selection-change":function(e){return t.checkedIds=e.map(function(t){return t.id}).join(",")}}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),a("el-table-column",{attrs:{prop:"created_at",label:"登录时间",width:"160"}}),a("el-table-column",{attrs:{prop:"ip",label:"登录IP","min-width":"150","show-overflow-tooltip":""}})],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"12px","text-align":"right"},attrs:{span:24}},[0<t.list.total?a("el-pagination",{staticClass:"pagination",attrs:{"page-size":20,"page-sizes":[10,20,30,40,50,100],total:t.list.total,"current-page":t.list.current_page,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.list,"current_page",e)},"update:current-page":function(e){return t.$set(t.list,"current_page",e)},"current-change":t.onChangePage,"size-change":t.onChangePageSize}}):t._e()],1)],1)},E=[],a("2425"),T=a("9177"),O=a.n(T),S=a("41bb"),I={props:{userInfo:{type:Object,default:null},filterType:{default:null}},data:function(){return{isMobile:this.$store.state.app.isMobile,loading:!1,search:{type:"id",value:""},date_range:"",where:{},list:{current_page:1,data:[],from:1,last_page:1,next_page_url:null,per_page:20,prev_page_url:null,to:0,total:0},checkedIds:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.getList()},methods:{getList:function(){var t,e=this;this.loading=!0,this.where.current_page=this.list.current_page,this.where.per_page=this.list.per_page,null!==this.filterType&&(this.where.filterType=this.filterType),this.userInfo&&(this.where.user_id=this.userInfo.id),(t=this.where,Object(S.a)({url:"log",method:"post",data:t})).then(function(t){e.list=t.data,e.loading=!1})},handleSearch:function(){var t={search:this.search.type,val:this.search.value};this.date_range&&this.date_range[0]&&this.date_range[1]?(t.start_at=this.date_range[0].format("yyyy-MM-dd"),t.end_at=this.date_range[1].format("yyyy-MM-dd")):(t.start_at=null,t.end_at=null),Object.assign(this.where,t),this.getList()},handleFilterChange:function(t){Object.assign(this.where,{}),this.getList()},onChangePage:function(){this.getList()},onChangePageSize:function(t){this.list.per_page=t,this.getList()}}},R=Object(v.a)(I,A,E,!1,null,null,null).exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:{"app-container":!t.userInfo&&!t._inBox}},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddBox,expression:"showAddBox"}],staticClass:"apply-box"},[a("el-button",{staticStyle:{float:"right",margin:"10px 15px"},attrs:{icon:"el-icon-close",type:"danger",size:"small"},on:{click:function(e){t.showAddBox=!1}}}),t.showAddBox||t.addBoxLoaded?a("el-card",{staticClass:"my-card"},[a("category-add",{attrs:{"in-box":!0,userInfo:t.userInfo},on:{submit:t.onAdd}})],1):t._e()],1)]),a("el-col",{staticClass:"no-bottom-form",attrs:{span:24}},[a("el-form",{staticClass:"list-pre-table",attrs:{inline:!0}},[a("el-form-item",{staticClass:"mobile-full-width"},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"搜索类型",value:"",size:"small"},slot:"prepend",model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{attrs:{label:"ID",value:"id"}}),a("el-option",{attrs:{label:"名称",value:"name"}})],1)],1)],1),a("el-form-item",{staticClass:"fix-height"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("el-form-item",{staticStyle:{float:"right","margin-right":"0"}},[a("a",{staticClass:"icon-btn",on:{click:t.handleAdd}},[a("icon",{attrs:{name:"regular/plus"}}),t._v(" 添加")],1)])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table",attrs:{data:t.list.data,stripe:"",border:""},on:{"filter-change":t.handleFilterChange,"selection-change":function(e){return t.checkedIds=e.map(function(t){return t.id}).join(",")}}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),"admin"===t._project?a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}):t._e(),"admin"!==t._project||t.userInfo?t._e():a("el-table-column",{attrs:{prop:"user_id",label:"商户ID",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"text-nowrap line-btn",on:{click:function(a){return t.goUserDetail(e.row.user_id)}}},[t._v(t._s(e.row.user_id))])]}}],null,!1,4213310200)}),a("el-table-column",{attrs:{prop:"name",label:"分类名称(点击编辑)","min-width":"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"text-nowrap line-btn",on:{click:function(a){return t.handleEdit(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"enabled",label:"显示",width:"70","column-key":"enabled",filters:t.enabledFilter,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#4cd964"},on:{change:function(a){return t.handleCategoryEnabled(e.row)}},model:{value:e.row.enabled,callback:function(a){t.$set(e.row,"enabled",a)},expression:"scope.row.enabled"}})]}}])}),a("el-table-column",{attrs:{prop:"products_count",label:"商品数",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"line-btn",on:{click:function(a){return t.goProducts(e.row)}}},[t._v(t._s(e.row.products_count))])]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return["string"==typeof e.row.sort?a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.sort,expression:"scope.row.sort"}],staticClass:"table-input",attrs:{size:"small",title:"排序"},domProps:{value:e.row.sort},on:{blur:function(a){return t.handleSetSort(e.row)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSetSort(e.row)},input:function(a){a.target.composing||t.$set(e.row,"sort",a.target.value)}}}):t._e(),"number"==typeof e.row.sort?a("a",{staticClass:"line-btn",on:{click:function(){e.row.sort_old=e.row.sort,e.row.sort=e.row.sort+""}}},[t._v(t._s(e.row.sort))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"icon-btn",on:{click:function(a){return t.showUrl(e.row)}}},[t._v("直链")]),a("a",{staticClass:"icon-btn",staticStyle:{"font-size":"14px"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("icon",{attrs:{name:"light/pencil"}})],1),a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleDelete(e.row)}}},[a("icon",{attrs:{name:"light/trash-alt"}})],1)]}}])})],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"8px","text-align":"left"},attrs:{span:24}},[a("el-form",{staticClass:"no-bottom-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"选中"}},[a("el-button",{attrs:{size:"small"},on:{click:t.checkDelete}},[t._v("删除")])],1)],1)],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"12px","text-align":"right"},attrs:{span:24}},[0<t.list.total?a("el-pagination",{staticClass:"pagination",attrs:{"page-size":20,"page-sizes":[10,20,30,40,50,100],total:t.list.total,"current-page":t.list.current_page,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.list,"current_page",e)},"update:current-page":function(e){return t.$set(t.list,"current_page",e)},"current-change":t.onChangePage,"size-change":t.onChangePageSize}}):t._e()],1),t.editAction?a("category-edit",{attrs:{info:t.editInfo,action:t.editAction,userInfo:t.userInfo},on:{close:t.editCallback}}):t._e()],1)},P=[],a("389f"),j=a("3b8d"),a("02fe"),a("a8a9"),M=a("5d16"),z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑分类",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[a("category-add",{ref:"editBox",attrs:{"in-box":!0,info:t.info,loading:t.loading},on:{submit:function(e){return t.handleClose(!0)},"update:loading":function(e){t.loading=e}}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleClose(!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("确认编辑\n    ")])],1)],1)},D=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"app-container":!t.inBox}},[t.isAdd?a("h3",{staticStyle:{margin:"4px 0 28px 0"}},[t._v("添加分类")]):t._e(),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":t.labelWidth,rules:t.formRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-tooltip",{attrs:{effect:"dark",content:"数字越小越靠前",placement:"top-start"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e7,size:"small"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),a("el-form-item",{staticClass:"category-password",attrs:{label:"分类密码",prop:"password"}},[a("el-tooltip",{attrs:{effect:"dark",content:"设置分类密码，开启后只有输入密码才能查看",placement:"top-start"}},[a("el-input",{attrs:{type:"text",placeholder:"分类密码(可选)"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[a("el-checkbox",{attrs:{slot:"prepend"},slot:"prepend",model:{value:t.form.password_open,callback:function(e){t.$set(t.form,"password_open",e)},expression:"form.password_open"}},[t._v("开启")])],1)],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"enabled"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[a("el-radio-button",{attrs:{label:1}},[t._v("显示")]),a("el-radio-button",{staticClass:"el-radio-gray",attrs:{label:0}},[t._v("隐藏")])],1)],1),t.isAdd?a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("添加")])],1):t._e()],1)],1)},N={props:{info:{},inBox:{default:!(L=[])},userInfo:{}},data:function(){return{loading:!1,labelWidth:this.$store.state.app.isMobile?"70px":"90px",form:{id:null,name:"",sort:1e3,password:"",password_open:!1,enabled:null},formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],enabled:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},computed:{isAdd:function(){return!this.info}},watch:{loading:function(t,e){this.$emit("update:loading",t),t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.isAdd||(this.form.id=this.info.id,this.form.name=this.info.name,this.form.sort=this.info.sort,this.form.password=this.info.password,this.form.password_open=1===this.info.password_open,this.form.enabled=this.info.enabled),this.userInfo&&(this.form.user_id=this.userInfo.id)},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,Object(M.b)(t.form).then(function(){t.loading=!1,t.$notify({title:"提示",message:(t.isAdd?"创建分类":"编辑分类")+"成功",type:"success",duration:3e3}),t.$emit("submit",!0)}).catch(function(){t.loading=!1}))})}}},a("ffb9"),F={props:{info:{}},components:{categoryAdd:U=Object(v.a)(N,B,L,!1,null,null,null).exports},data:function(){return{loading:!1,visible:!0}},watch:{visible:function(t){t||this.$emit("close",!1)}},methods:{handleSubmit:function(){this.$refs.editBox.handleSubmit()},handleClose:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",t)}}},Y=Object(v.a)(F,z,D,!1,null,null,null).exports,V={props:{userInfo:{type:Object,default:null},filterType:{default:null},_project:{default:"admin_free"},_inBox:{}},components:{categoryEdit:Y,categoryAdd:U},data:function(){return{loading:!1,showAddBox:!1,addBoxLoaded:!1,search:{type:"name",value:""},where:{},list:{current_page:1,data:[],from:1,last_page:1,next_page_url:null,per_page:20,prev_page_url:null,to:0,total:0},checkedIds:"",enabledFilter:[{text:"显示",value:1,type:"primary"},{text:"隐藏",value:0,type:"info"}],editInfo:null,editAction:null}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.where.current_page=this.list.current_page,this.where.per_page=this.list.per_page,null!==this.filterType&&(this.where.filterType=this.filterType),this.userInfo&&(this.where.user_id=this.userInfo.id),Object(M.d)(this.where).then(function(e){t.list=e.data,t.loading=!1})},handleSearch:function(){var t={search:this.search.type,val:this.search.value};Object.assign(this.where,t),this.getList()},handleFilterChange:function(t){var e={};t.enabled?e.enabled=t.enabled.join(","):e.enabled=null,Object.assign(this.where,e),this.getList()},onChangePage:function(){this.getList()},onChangePageSize:function(t){this.list.per_page=t,this.getList()},goProducts:function(t){this.$router.push({path:"/admin/product/list",query:{category_id:t.id}})},goUserDetail:function(t){},handleSetSort:function(t){var e=this;parseInt(t.sort)!==t.sort_old?(this.loading=!0,Object(M.e)(t.id,t.sort).then(function(){e.getList()}).catch(function(){e.loading=!1})):t.sort=parseInt(t.sort)},handleEdit:function(t){this.editAction="edit",this.editInfo=t},handleCategoryEnabled:function(t){Object(M.c)(t.id,t.enabled)},showUrl:function(t){var e='<a class="icon-btn" href="'.concat(t.url,'" target="_blank">').concat(t.url,"</a>");t.password_open&&(e+="<br>密码: "+t.password),this.$msgbox({title:"单独链接",message:e,dangerouslyUseHTMLString:!0})},handleDelete:function(t){var e=this,a=t.name;this.$confirm("删除分类<"+a+">? 此操作不可恢复","提示",{type:"warning"}).then(function(){e.loading=!0,Object(M.a)(t.id).then(function(){e.$notify({title:"操作成功",message:"分类<"+a+">已删除",type:"info"}),e.getList()}).catch(function(){e.loading=!1})})},checkDelete:function(){var t=this;this.checkedIds.length&&this.$confirm("批量删除选中分类? 此操作不可恢复","提示",{type:"warning"}).then(function(){t.loading=!0,Object(M.a)(t.checkedIds).then(function(){t.$notify({title:"操作成功",message:"选中分类已删除",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},editCallback:function(t){this.editAction=null,t&&this.getList()},handleAdd:(ni=Object(j.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("admin"!==this._project||this.userInfo){t.next=2;break}return t.abrupt("return",this.$alert("请在商户列表选择商户后添加",{type:"error"}));case 2:return window.scrollTo(0,0),this.addBoxLoaded=!0,t.next=6,this.$nextTick();case 6:this.showAddBox=!0;case 7:case"end":return t.stop()}},t,this)})),function(){return ni.apply(this,arguments)}),onAdd:function(){this.getList(),this.showAddBox=!1}}},H=Object(v.a)(V,$,P,!1,null,null,null).exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"app-container":!t.inBox}},[a("h3",{staticStyle:{margin:"4px 0 28px 0"}},[t._v(t._s(t.isAdd?"添加商品":"编辑商品")+"\n    "),"admin_free"!==t._project&&t.isAdd?a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",round:"",icon:"el-icon-plus",disabled:t.loading},on:{click:t.addRetailProduct}},[t._v("\n      添加分销商品\n    ")]):t._e()],1),t.isFromRetail?a("el-alert",{staticStyle:{"margin-bottom":"36px"},attrs:{type:"info",title:"",closable:!1}},[a("div",{staticClass:"retail-root-info"},[t._v("\n      当前商品为分销商品：\n      "),t.retail_from?a("el-button",{staticStyle:{padding:"4px"},attrs:{type:"text"},on:{click:function(e){t.showRetailFromInfo=!t.showRetailFromInfo}}},[t._v("\n        查看货源\n      ")]):a("span",{staticStyle:{color:"red"}},[t._v("原商品已删除!")]),t.showRetailFromInfo?a("div",{staticStyle:{"margin-top":"12px"}},[a("p",[t._v("商品名称: "+t._s(t.retail_from.name))]),a("p",[t._v("商品分类: "+t._s(t.retail_from.category?t.retail_from.category.name:"?未知?"))]),a("p",[t._v("商品介绍: \n          "),a("span",{staticStyle:{border:"1px solid #eee",display:"block"},domProps:{innerHTML:t._s(t.renderDelta(t.retail_from.description))}})]),a("p",[t._v("进货价格: ￥"+t._s((t.retail_from.price/100).toFixed(2)))])]):t._e()],1)]):t._e(),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,"label-position":t.isMobile?"top":"","label-width":"90px",rules:t.formRules}},[a("el-form-item",{class:t.formItemClass,style:t.isMobile?"margin-top: -24px":"",attrs:{label:"分类",prop:"category_id"}},[a("el-select",{attrs:{"no-data-text":"请先添加分类",placeholder:"请选择商品分类"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1)],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"商品名称，如：91游戏30元点卡",disabled:t.isFromRetail&&t.retail_from&&!t.retail_from.retail_options.can_edit},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.isFromRetail&&t.retail_from&&!t.retail_from.retail_options.can_edit?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 供货商不允许修改商品信息")])]):t._e()],1),t.isFromRetail?a("el-form-item",{class:t.formItemClass,attrs:{label:"自动更新",prop:"retail_keep_sync"}},[a("el-switch",{staticStyle:{display:"inline-block"},attrs:{disabled:!t.canEditRetail,"inactive-text":"","active-value":1,"inactive-value":0},model:{value:t.form.retail_keep_sync,callback:function(e){t.$set(t.form,"retail_keep_sync",e)},expression:"form.retail_keep_sync"}}),a("div",{staticClass:"el-form-item__tip",staticStyle:{"margin-top":"-10px"}},[a("span",[t._v('* 保持 "名称/描述/使用说明" 与供货商一致\n          '),a("a",{staticClass:"icon-btn",attrs:{title:"查看详情"}},[a("i",{staticClass:"el-icon-info",on:{click:function(e){return t.$msgbox({message:"开启后, 供货商修改 <b>名称/描述/使用说明</b> 时，<br>您的商品信息会自动更新 <br> <br>注意，开启后您修改的信息可能被覆盖",title:"提示",dangerouslyUseHTMLString:!0})}}})])])]),t.canEditRetail?t._e():a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 供货商不允许修改商品信息")])])],1):t._e(),a("el-form-item",{class:t.formItemClass,attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e7,size:"small"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}}),a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 数字越小越靠前")])])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"成本价(元)",prop:"cost"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入商品成本价",disabled:t.isFromRetail},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}}),t.isFromRetail?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 商品进货价格")])]):a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 成本价用于商户后台计算利润（建议填写）")])])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"售价(元)",prop:"price"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入商品售价"},on:{change:function(e){t.form.price=+e,t.checkRetailPrice()}},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),t.isFromRetail?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 当供货商修改价格时，您的售价会根据加价幅度同步修改\n          "),a("a",{staticClass:"icon-btn",attrs:{title:"查看详情"}},[a("i",{staticClass:"el-icon-info",on:{click:t.showRetailPriceTip}})])])]):t._e()],1),a("el-form-item",{staticClass:"price-whole",class:t.formItemClass,attrs:{label:"批发价",prop:"price_whole"}},[a("div",{style:{"line-height":t.isMobile?"18px":"inherit"}},[a("a",{on:{click:function(){t.price_whole.push([1,t.form.price]),t.checkRetailPriceWhole()}}},[t._v("添加")]),a("div",{staticClass:"price-body"},t._l(t.price_whole,function(e,i){return a("div",{key:i},[a("label",[t._v("件数\n              "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e[0],expression:"item[0]",modifiers:{number:!0}}],attrs:{type:"number",min:"1",max:"10000"},domProps:{value:e[0]},on:{change:t.checkRetailPriceWhole,input:function(a){a.target.composing||t.$set(e,0,t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("label",[t._v("价格\n              "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e[1],expression:"item[1]",modifiers:{number:!0}}],attrs:{type:"number",min:"0.01",max:"10000000"},domProps:{value:e[1]},on:{change:t.checkRetailPriceWhole,input:function(a){a.target.composing||t.$set(e,1,t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("a",{staticStyle:{cursor:"pointer"},on:{click:function(){t.price_whole.splice(i,1),t.checkRetailPriceWhole()}}},[t._v("删除")])])}),0)]),t.form.retail_open?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 只对普通用户有效, 代理分销时按原价计算")])]):t._e()]),a("el-form-item",{class:t.formItemClass,attrs:{label:"商品描述",prop:"description"}},[a("quill-editor",{key:"editor-description",ref:"editor-description",attrs:{"user-info":t.userInfo_,disabled:!t.canEditRetail,placeholder:"本图文说明将显示在商品购买页面"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t.canEditRetail?t._e():a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 供货商不允许修改商品信息")])])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"使用说明",prop:"instructions"}},[a("quill-editor",{key:"editor-instructions",ref:"editor-instructions",attrs:{"user-info":t.userInfo_,disabled:!t.canEditRetail,placeholder:"本图文说明将显示在订单查询网站且购买成功的订单中，一般设置详细使用说明，售后QQ群，或者下载地址类"},model:{value:t.form.instructions,callback:function(e){t.$set(t.form,"instructions",e)},expression:"form.instructions"}}),t.canEditRetail?t._e():a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 供货商不允许修改商品信息")])])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"优惠券",prop:"support_coupon"}},[a("el-checkbox",{model:{value:t.form.support_coupon,callback:function(e){t.$set(t.form,"support_coupon",e)},expression:"form.support_coupon"}},[t._v("支持")])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"购买限制",prop:"buy_min"}},[a("el-tooltip",{attrs:{effect:"dark",content:"最小购买量",placement:"top-start"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e4,size:"small"},model:{value:t.form.buy_min,callback:function(e){t.$set(t.form,"buy_min",e)},expression:"form.buy_min"}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"最大购买量",placement:"top-start"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e4,size:"small"},model:{value:t.form.buy_max,callback:function(e){t.$set(t.form,"buy_max",e)},expression:"form.buy_max"}})],1),t.form.retail_open?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 只对普通用户有效, 代理分销时不受限制")])]):t._e()],1),a("el-form-item",{staticClass:"buy-password",class:t.formItemClass,attrs:{label:"购买密码",prop:"password"}},[a("el-tooltip",{attrs:{effect:"dark",content:"设置商品购买密码，开启后只有输入密码才能购买",placement:"top-start"}},[a("el-input",{attrs:{type:"text",placeholder:"购买密码(可选)"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[a("el-checkbox",{attrs:{slot:"prepend"},slot:"prepend",model:{value:t.form.password_open,callback:function(e){t.$set(t.form,"password_open",e)},expression:"form.password_open"}},[t._v("开启")])],1)],1),t.form.retail_open?a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 只对普通用户有效, 代理分销时不受限制\n         "),a("a",{staticClass:"icon-btn",attrs:{title:"查看详情"}},[a("i",{staticClass:"el-icon-info",on:{click:t.showRetailPasswordTip}})])])]):t._e()],1),t.isFromRetail?t._e():a("el-form-item",{class:t.formItemClass,attrs:{label:"库存预警",prop:"count_warn"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e7,size:"small"},model:{value:t.form.count_warn,callback:function(e){t.$set(t.form,"count_warn",e)},expression:"form.count_warn"}}),a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 到达预警值后会发送通知邮件，填0不预警")])])],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"库存显示",prop:"inventory"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",e)},expression:"form.inventory"}},[a("el-radio-button",{attrs:{label:t.INVENTORY_TYPE.RANGE}},[t._v("大致范围")]),a("el-radio-button",{attrs:{label:t.INVENTORY_TYPE.REAL}},[t._v("实际库存")]),a("el-radio-button",{staticClass:"el-radio-gray",attrs:{label:t.INVENTORY_TYPE.AUTO}},[t._v("跟随店铺")])],1)],1),t.canRetail?a("el-form-item",{class:t.formItemClass,attrs:{label:"代理分销",prop:"retail_open"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.retail_open,callback:function(e){t.$set(t.form,"retail_open",e)},expression:"form.retail_open"}},[a("el-radio-button",{attrs:{label:1}},[t._v("开启")]),a("el-radio-button",{staticClass:"el-radio-gray",attrs:{label:0}},[t._v("关闭")])],1),a("transition",{attrs:{name:"el-zoom-in-center"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.retail_open,expression:"form.retail_open"}],class:t.formItemClass},[a("el-switch",{staticStyle:{display:"inline-block"},attrs:{"inactive-text":"允许下级代理编辑商品信息","active-value":1,"inactive-value":0},model:{value:t.retail_options.can_edit,callback:function(e){t.$set(t.retail_options,"can_edit",e)},expression:"retail_options.can_edit"}}),a("div",{staticStyle:{"margin-top":"8px"}},[a("span",{staticClass:"el-form-item__label2",staticStyle:{display:"block"}},[t._v("代理零售价限制(元)")]),a("div",[a("el-input",{style:{display:t.isMobile?"block":"inline-block","max-width":t.isMobile?"auto":"180px","margin-right":t.isMobile?"0":"8px"},attrs:{size:"mini",placeholder:"代理最低零售价",type:"number"},on:{change:t.checkRetailPrice},model:{value:t.retail_options.min_price,callback:function(e){t.$set(t.retail_options,"min_price",t._n(e))},expression:"retail_options.min_price"}}),a("el-input",{style:{display:t.isMobile?"block":"inline-block","max-width":t.isMobile?"auto":"180px"},attrs:{size:"mini",placeholder:"代理最高零售价",type:"number"},on:{change:t.checkRetailPrice},model:{value:t.retail_options.max_price,callback:function(e){t.$set(t.retail_options,"max_price",t._n(e))},expression:"retail_options.max_price"}}),t.retail_price_check.message?a("div",{staticClass:"el-form-item__tip",style:{color:t.retail_price_check.color}},[a("span",[t._v(t._s(t.retail_price_check.message))])]):a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 当改变售价时，价格限制会根据加价幅度同步更改")])])],1)]),a("div",{staticStyle:{"margin-top":"16px"}},[a("span",{staticClass:"el-form-item__label2",staticStyle:{display:"block"}},[t._v("分销代码")]),a("div",[a("el-input",{staticClass:"input-retail-code",style:{"max-width":t.isMobile?"auto":"372px"},attrs:{minlength:6,maxlength:32,disabled:t.retail_code_check.loading,placeholder:"分销代码",size:"mini"},on:{change:t.checkRetailCodeAvailable},model:{value:t.form.retail_code,callback:function(e){t.$set(t.form,"retail_code",e)},expression:"form.retail_code"}},[a("el-button",{attrs:{slot:"append",size:"mini",type:"text",disabled:t.retail_code_check.loading},on:{click:t.handleRandomRetailCode},slot:"append"},[t._v("随机\n                ")])],1),t.retail_code_check.message?a("div",{staticClass:"el-form-item__tip",style:{color:t.retail_code_check.color}},[a("span",[t._v(t._s(t.retail_code_check.message))])]):a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 凭借本代码可以代理分销当前商品")])])],1)])],1)])],1):t._e(),a("el-form-item",{class:t.formItemClass,attrs:{label:"状态",prop:"enabled"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[a("el-radio-button",{attrs:{label:1}},[t._v("上架")]),a("el-radio-button",{staticClass:"el-radio-gray",attrs:{label:0}},[t._v("下架")])],1)],1),a("el-form-item",{staticStyle:{"margin-top":"36px"}},[a("el-button",{style:{float:t.isMobile?"right":""},attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("\n        "+t._s(t.isAdd?"添加":"编辑")+"商品\n      ")])],1)],1)],1)},W=[],Q={RANGE:0,REAL:1,AUTO:2},G=a("51d1"),Z=a("bd60"),J=a("b130"),a("a481"),c.default.filter("moneyFilter",i),c.default.filter("moneyFormatterFilter",function(t){return null==t?"￥0.00":-1==(t+"").indexOf(".")?t:"￥"+t}),c.default.filter("moneyDigitalFilter",function(t){return null==t?"0.00":-1==(t+"").indexOf(".")?t:t.replace(/\d(?=(?:\d{3})+\b)/g,"$&,")}),c.default.filter("formatDate",function(t){return new Date(t).format("yyyy-MM-dd")}),X={components:{QuillEditor:Z.a},props:{_project:{default:"admin_free"},info:{},inBox:{default:!1},userInfo:{},_categories:{}},data:function(){var t=this;return{loading:!1,isMobile:this.$store.state.app.isMobile,userInfo_:null,upload_url:window.API_HOST+"product/upload",INVENTORY_TYPE:Q,form:{id:null,user_id:null,category_id:null,name:"",description:"",instructions:"",sort:1e3,buy_min:1,buy_max:100,count_warn:"",inventory:Q.AUTO,support_coupon:!1,password:"",password_open:!1,cost:0,price:0,price_whole:"",enabled:1,retail_open:0,retail_code:"",retail_from_id:null,retail_keep_sync:1},price_whole:[],categories:[],retail_options:{can_edit:1,min_price:"",max_price:""},formRules:{category_id:[{required:!0,message:"请选择商品分类",trigger:"change"}],name:[{required:!0,message:"请输入商品名称",trigger:"change"}],cost:[{validator:function(t,e,a){var i=Math.round(100*e);i<0?a(Error("成本价不能低于 0")):1e9<i?a(Error("成本价不能超过 10000000")):a()},trigger:"change"}],price:[{required:!0,validator:function(e,a,n){var r=Math.round(100*a);r<Math.round(100*t.form.cost)&&n(Error("商品售价不能低于成本价")),r<1?n(Error("商品售价不能低于 0.01")):1e9<r?n(Error("商品售价不能超过 10000000")):t.isFromRetail&&t.retail_from&&(r<t.retail_from.retail_options.min_price||r>t.retail_from.retail_options.max_price)?n(Error("* 供货商限定价格为: ".concat(i(t.retail_from.retail_options.min_price)," - ").concat(i(t.retail_from.retail_options.max_price)))):n()},trigger:"change"}],price_whole:[{validator:function(e,a,n){var r,o;for(r=0;r<t.price_whole.length;r++){if(t.price_whole[r][1]<.01)return void n(Error("批发价格不能低于 0.01"));if(1e7<t.price_whole[r][1])return void n(Error("批发价格不能超过 10000000"));if((o=Math.round(100*t.price_whole[r][1]))<t.form.cost&&n(Error("批发价格不能低于成本价")),t.isFromRetail&&t.retail_from&&(o<t.retail_from.retail_options.min_price||o>t.retail_from.retail_options.max_price))return void n(Error("* 供货商限定价格为: ".concat(i(t.retail_from.retail_options.min_price)," - ").concat(i(t.retail_from.retail_options.max_price))))}n()},trigger:"change"}],enabled:[{required:!0,message:"请选择状态",trigger:"change"}]},showRetailFromInfo:!1,retail_from:null,retail_price_check:{message:"",color:""},retail_code_check:{loading:!1,message:"",color:""}}},computed:{isAdd:function(){return!this.info},formItemClass:function(){return this.isMobile?"product-form-item":""},isFromRetail:function(){return!1},canEditRetail:function(){return!(this.isFromRetail&&null!==this.retail_from&&0===this.retail_from.retail_options.can_edit)},canRetail:function(){return!1}},watch:{loading:function(t,e){this.$emit("update:loading",t),t?e||O.a.isStarted()||O.a.start():O.a.done()}},beforeMount:function(){if(this.userInfo?this.userInfo_=this.userInfo:this.userInfo_=this.$store.state.user.userInfo,this._categories&&this._categories.length&&0<this._categories[0].id?this.categories=this._categories:this.getCategories(),!this.isAdd){for(var t in this.form)this.form.hasOwnProperty(t)&&this.$set(this.form,t,this.info[t]);this.form.cost=1*(this.info.cost/100).toFixed(2),this.form.price=1*(this.info.price/100).toFixed(2),this.form.support_coupon=1===this.info.support_coupon,this.form.password_open=1===this.info.password_open;try{this.price_whole=JSON.parse(this.form.price_whole).map(function(t){return[t[0],(t[1]/100).toFixed(2)]})}catch(t){this.price_whole=[]}null==this.price_whole&&(this.price_whole=[]),this.retail_from=this.info.retail_from,this.retail_from&&0===this.retail_from.retail_options.can_edit&&(this.form.retail_keep_sync=1),this.info.retail_options&&(Object.assign(this.retail_options,this.info.retail_options),this.retail_options.min_price=1*(this.retail_options.min_price/100).toFixed(2),this.retail_options.max_price=1*(this.retail_options.max_price/100).toFixed(2))}this.userInfo&&(this.form.user_id=this.userInfo.id)},methods:{moneyFilter:i,renderDelta:J.d,getCategories:function(){var t=this,e={search:"simple",val:"list"};this.info?e.user_id=this.info.user_id:this.userInfo&&(e.user_id=this.userInfo.id),Object(M.d)(e).then(function(e){t.categories=e.data})},addRetailProduct:function(){var t=this;this.$prompt("请输入供货商提供的分销代码","请输入分销代码",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.{6,32}/,inputErrorMessage:"分销代码为 6 到 32 位",closeOnClickModal:!1}).then(function(e){var a=e.value;t.loading=!0,Object(G.b)(a).then(function(e){if("success"===e.message){var i=e.data;t.form.from_code=a,t.form.name=i.name,t.form.description=i.description,t.form.instructions=i.instructions,t.$refs["editor-description"].setValue(i.description),t.$refs["editor-instructions"].setValue(i.instructions),t.form.cost=1*(i.price/100).toFixed(2),t.form.price=1*(i.retail_options.min_price/100).toFixed(2),t.retail_from=i}else t.$msgbox({message:e.message,title:"错误",type:"error"})}).finally(function(){t.loading=!1})})},showRetailPriceTip:function(){this.$msgbox({message:"\n        当供货商修改商品进货价格时，<br>您设置的售价会根据供货商的修改幅度同步更改。<br><br>\n\n        举例：<br>\n        供货商设置进货价为 10 元，<br>您设置的零售价为 15 元；<br>\n        当供货商将进货价提高为 11 元时，<br>您的零售价将自动修改为 16 元。\n        ",title:"代理售价说明",dangerouslyUseHTMLString:!0})},showRetailPasswordTip:function(){this.$msgbox({message:"\n此选项仅在用户直接购买时有效，<br>代理进货时不受限制。<br><br>\n\n<b>如果</b>此商品仅用于代理分销，您并不打算让普通用户购买<br>您可以设置一个密码将此商品保护起来。\n",title:"购买密码说明",dangerouslyUseHTMLString:!0})},checkRetailPrice:function(){if(this.form.retail_open)return""===this.retail_options.min_price?(this.retail_price_check.message="请输入 代理最低零售价",!(this.retail_price_check.color="#F7BA2A")):""===this.retail_options.max_price?(this.retail_price_check.message="请输入 代理最高零售价",!(this.retail_price_check.color="#F7BA2A")):+this.retail_options.min_price<+this.form.price?(this.retail_price_check.message="代理最低零售价不能低于商品售价",!(this.retail_price_check.color="#FF4949")):+this.retail_options.min_price>+this.retail_options.max_price?(this.retail_price_check.message="代理最高零售价 需要大于 代理最低零售价",!(this.retail_price_check.color="#FF4949")):1e7<+this.retail_options.min_price||1e7<+this.retail_options.max_price?(this.retail_price_check.message="价格不能超过 10000000",!(this.retail_price_check.color="#FF4949")):(this.retail_price_check.message="",!(this.retail_price_check.color=""))},checkRetailPriceWhole:function(){return this.$refs.form.validateField("price_whole")},checkRetailCodeAvailable:(oi=Object(j.a)(regeneratorRuntime.mark(function t(){var e,a,i=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(0<i.length&&void 0!==i[0])||i[0],this.form.retail_code.length<6)return this.retail_code_check.message="分销代码为 6 到 32 位",this.retail_code_check.color="#FF4949",t.abrupt("return",!1);t.next=5;break;case 5:if(32<this.form.retail_code.length)return this.retail_code_check.message="分销代码为 6 到 32 位",this.retail_code_check.color="#FF4949",t.abrupt("return",!1);t.next=9;break;case 9:if(e){t.next=11;break}return t.abrupt("return",""===this.retail_code_check.message);case 11:return this.retail_code_check.message="分销代码检查中...请稍后",this.retail_code_check.color="#F7BA2A",this.retail_code_check.loading=!0,t.prev=14,t.next=17,Object(G.b)(this.form.retail_code);case 17:if(!(a=t.sent).data||a.data.id===this.form.id){t.next=24;break}this.retail_code_check.message="分销代码已被使用，请重新输入",this.retail_code_check.color="#FF4949",this.$notify({title:"提示",message:this.retail_code_check.message,type:"error"}),t.next=28;break;case 24:return this.retail_code_check.message="",this.retail_code_check.color="",this.$notify({title:"提示",message:"当前分销代码可用",type:"success",duration:500}),t.abrupt("return",!0);case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(14),this.retail_code_check.message="分销代码检查失败，请重新输入";case 34:return t.prev=34,this.retail_code_check.loading=!1,t.finish(34);case 37:return t.abrupt("return",!1);case 38:case"end":return t.stop()}},t,this,[[14,30,34,37]])})),function(){return oi.apply(this,arguments)}),handleRandomRetailCode:function(){this.form.retail_code=Object(J.c)(8).toLocaleUpperCase(),this.checkRetailCodeAvailable()},handleSubmit:(ri=Object(j.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.form.description=this.$refs["editor-description"].getValue(),this.form.instructions=this.$refs["editor-instructions"].getValue(),this.$refs.form.validate(function(){var t=Object(j.a)(regeneratorRuntime.mark(function t(a){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=3;break}return e.$msgbox({message:"信息填写不完整, 请检查",title:"提示",type:"error"}),t.abrupt("return",!1);case 3:if(e.form.retail_open)return t.next=6,e.checkRetailPrice();t.next=12;break;case 6:if(t.sent){t.next=8;break}return t.abrupt("return",e.$msgbox({message:e.retail_price_check.message,title:"提示",type:"error"}));case 8:return t.next=10,e.checkRetailCodeAvailable(!1);case 10:if(t.sent){t.next=12;break}return t.abrupt("return",e.$msgbox({message:e.retail_code_check.message,title:"提示",type:"error"}));case 12:e.loading=!0,(i=Object.assign({},e.form)).price_whole=JSON.stringify(e.price_whole.map(function(t){return[t[0],parseInt(100*t[1])]})),e.isAdd&&delete i.id,i.retail_open?i.retail_options=e.retail_options:delete i.retail_code,Object(G.d)(i).then(function(){e.loading=!1,e.$notify({title:"提示",message:(e.isAdd?"添加":"编辑")+"商品成功",type:"success",duration:3e3}),e.$emit("submit",!0)}).catch(function(t){e.$msgbox({message:t.message,title:"错误",type:"error",dangerouslyUseHTMLString:!0})}).finally(function(){e.loading=!1});case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t,this)})),function(){return ri.apply(this,arguments)})}},a("7b74"),a("3051"),K=Object(v.a)(X,q,W,!1,null,"25a6c0f6",null).exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:{"app-container":!t.userInfo&&!t._inBox}},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddBox,expression:"showAddBox"}],staticClass:"apply-box"},[a("el-button",{staticStyle:{float:"right",margin:"10px 15px"},attrs:{icon:"el-icon-close",type:"danger",size:"small"},on:{click:function(e){return t.onBoxSubmit(!1)}}}),t.showAddBox||t.addBoxLoaded?a("el-card",{staticClass:"my-card"},[a("product-box",{attrs:{"in-box":!0,userInfo:t.userInfo,info:t.editInfo,_categories:t.categories},on:{submit:t.onBoxSubmit}})],1):t._e()],1)]),a("el-col",{staticClass:"no-bottom-form",attrs:{span:24}},[a("el-form",{staticClass:"list-pre-table",attrs:{inline:!0}},[t.loadCategory?a("el-form-item",{staticClass:"mobile-full-width"},[a("el-select",{staticClass:"mobile-full-width",attrs:{placeholder:"商品分类",size:"small","no-data-text":"无分类数据"},on:{change:t.getList},model:{value:t.where.category_id,callback:function(e){t.$set(t.where,"category_id",e)},expression:"where.category_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1):t._e(),a("el-form-item",{staticClass:"mobile-full-width"},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"搜索类型",size:"small"},slot:"prepend",model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{attrs:{label:"ID",value:"id"}}),"admin"===t._project?a("el-option",{attrs:{label:"商户ID",value:"user_id"}}):t._e(),a("el-option",{attrs:{label:"名称",value:"name"}}),a("el-option",{attrs:{label:"分类ID",value:"category_id"}})],1)],1)],1),a("el-form-item",{staticClass:"fix-height"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("el-form-item",{staticStyle:{float:"right","margin-right":"0"}},[a("a",{staticClass:"icon-btn",on:{click:t.handleAdd}},[a("icon",{attrs:{name:"regular/plus"}}),t._v(" 添加")],1)]),a("span",{staticStyle:{clear:"both"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table",attrs:{data:t.list.data,stripe:"",border:""},on:{"filter-change":t.handleFilterChange,"selection-change":function(e){return t.checkedIds=e.map(function(t){return t.id}).join(",")}}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),"admin"===t._project?a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}):t._e(),"admin"!==t._project||t.userInfo?t._e():a("el-table-column",{attrs:{prop:"user_id",label:"商户ID",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"text-nowrap line-btn",on:{click:function(a){return t.goUserDetail(e.row.user_id)}}},[t._v(t._s(e.row.user_id))])]}}],null,!1,4213310200)}),a("el-table-column",{attrs:{prop:"name",label:"商品名称(点击查看商品介绍)","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"line-btn",on:{click:function(a){return t.showProductInfo(e.row)}}},[t._v(t._s(e.row.name)+"\n          "),e.row.retail_from_id?a("el-tag",{staticClass:"el-tag-label"},[t._v("分销商品")]):t._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"category",label:"分类(点击修改)","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"line-btn",on:{click:function(a){return t.handleEditCategory(e.row)}}},[t._v(t._s(e.row.category?e.row.category.name:"未知#"+e.row.category_id))])]}}])}),a("el-table-column",{attrs:{prop:"count_sold",label:"已售",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.retail_from_id?a("span",[t._v(t._s(e.row.count_sold))]):a("a",{staticClass:"line-btn",on:{click:function(a){return t.goCards("count_sold",e.row)}}},[t._v(t._s(e.row.count_sold))])]}}])}),a("el-table-column",{attrs:{prop:"count",label:"库存",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.retail_from_id?a("span",[t._v(t._s(e.row.count))]):a("a",{staticClass:"line-btn",on:{click:function(a){return t.goCards("count",e.row)}}},[t._v(t._s(e.row.count))])]}}])}),a("el-table-column",{attrs:{prop:"enabled",label:"上架",width:"70","column-key":"enabled",filters:t.enabledFilter,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#4cd964"},on:{change:function(a){return t.handleProductEnabled(e.row)}},model:{value:e.row.enabled,callback:function(a){t.$set(e.row,"enabled",a)},expression:"scope.row.enabled"}})]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return["string"==typeof e.row.sort?a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.sort,expression:"scope.row.sort"}],staticClass:"table-input",attrs:{size:"small",title:"排序"},domProps:{value:e.row.sort},on:{blur:function(a){return t.handleSetSort(e.row)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSetSort(e.row)},input:function(a){a.target.composing||t.$set(e.row,"sort",a.target.value)}}}):t._e(),"number"==typeof e.row.sort?a("a",{staticClass:"line-btn",on:{click:function(){e.row.sort_old=e.row.sort,e.row.sort=e.row.sort+""}}},[t._v(t._s(e.row.sort))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"icon-btn",on:{click:function(a){return t.showUrl(e.row)}}},[t._v("直链")]),a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleEdit(e.row)}}},[a("icon",{attrs:{name:"light/pencil"}})],1),a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleDelete(e.row)}}},[a("icon",{attrs:{name:"light/trash-alt"}})],1)]}}])})],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"8px","text-align":"left"},attrs:{span:24}},[a("el-form",{staticClass:"no-bottom-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"选中"}},[a("el-button",{attrs:{size:"small"},on:{click:t.checkDelete}},[t._v("删除")]),a("el-button",{attrs:{size:"small"},on:{click:t.checkEnable}},[t._v("上架")]),a("el-button",{attrs:{size:"small"},on:{click:t.checkDisable}},[t._v("下架")])],1)],1)],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"12px","text-align":"right"},attrs:{span:24}},[0<t.list.total?a("el-pagination",{staticClass:"pagination",attrs:{"page-size":20,"page-sizes":[10,20,30,40,50,100],total:t.list.total,"current-page":t.list.current_page,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.list,"current_page",e)},"update:current-page":function(e){return t.$set(t.list,"current_page",e)},"current-change":t.onChangePage,"size-change":t.onChangePageSize}}):t._e()],1),t.editCategory?a("product-category",{attrs:{categories:t.categories,info:t.editCategory,loadCategory:t.loadCategory},on:{close:t.editCategoryCallback}}):t._e()],1)},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"修改商品分类",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-position":t.isMobile?"top":"","label-width":"90px",rules:t.formRules}},[a("el-form-item",{class:t.isMobile?"item-container":"",style:t.isMobile?"margin-top: -32px":"",attrs:{label:"分类",prop:"category_id"}},[a("el-select",{staticStyle:{display:"block"},attrs:{"no-data-text":"请先添加分类"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories_,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleClose(!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("确认修改\n    ")])],1)],1)},it=[],a("33ea"),nt={props:{info:{},categories:{},loadCategory:{}},data:function(){return{loading:!1,isMobile:this.$store.state.app.isMobile,visible:!0,form:{id:this.info.id,category_id:this.info.category_id},formRules:{category_id:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},categories_:[]}},watch:{visible:function(t){t||this.$emit("close",!1)}},mounted:function(){var t,e=this;this.loadCategory?this.categories_=this.categories:(t={search:"simple",val:"list"},this.info&&(t.user_id=this.info.user_id),Object(M.d)(t).then(function(t){e.categories_=t.data}))},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,Object(G.a)(t.form.id,t.form.category_id).then(function(){t.loading=!1,t.$notify({title:"提示",message:"修改商品分类成功",type:"success",duration:3e3}),t.$emit("close",{category:t.categories_.find(function(e){return e.id===t.form.category_id})})}).catch(function(){t.loading=!1}))})},handleClose:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",t)}}},a("fca0"),rt=Object(v.a)(nt,at,it,!1,null,null,null).exports,ot={props:{userInfo:{type:Object,default:null},filter:{default:null},_project:{default:"admin_free"},_inBox:{}},components:{productBox:K,productCategory:rt},data:function(){return{loading:!1,showAddBox:!1,addBoxLoaded:!1,search:{type:"name",value:""},where:{category_id:-1},categories:[{id:-2,name:"加载中"}],list:{current_page:1,data:[],from:1,last_page:1,next_page_url:null,per_page:20,prev_page_url:null,to:0,total:0},checkedIds:"",enabledFilter:[{text:"上架",value:1,type:"primary"},{text:"未上架",value:0,type:"info"}],editInfo:null,editCategory:null}},computed:{loadCategory:function(){return"merchant"===this._project||this.userInfo}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.$route.query.category_id&&(this.where.category_id=this.$route.query.category_id),this.filter&&this.filter.category_id&&(this.where.category_id=this.filter.category_id),this.handleSearch(),this.loadCategory?this.getCategories():this.categories=[]},methods:{searchByCategory:function(t){this.where.category_id=t,this.handleSearch()},getCategories:function(){var t=this,e={search:"simple",val:"list"};this.userInfo&&(e.user_id=this.userInfo.id),Object(M.d)(e).then(function(e){t.categories=e.data})},getList:function(){var t=this;this.loading=!0,this.where.current_page=this.list.current_page,this.where.per_page=this.list.per_page,this.userInfo&&(this.where.user_id=this.userInfo.id),Object(G.f)(this.where).then(function(e){t.list=e.data,t.loading=!1})},handleSearch:function(){var t={search:this.search.type,val:this.search.value};Object.assign(this.where,t),this.getList()},handleFilterChange:function(t){var e={};t.enabled?e.enabled=t.enabled.join(","):e.enabled=null,Object.assign(this.where,e),this.getList()},onChangePage:function(){this.getList()},onChangePageSize:function(t){this.list.per_page=t,this.getList()},showProductInfo:function(t){var e=Object(J.c)(8),a="\n        <p>商品名称:&nbsp;".concat(t.name).concat(t.retail_from_id?'<span class="el-tag el-tag-label">分销商品</span>':"","</p>\n        <p>商品分类:&nbsp;").concat(t.category?t.category.name:"未知#"+t.category_id,'</p>\n        <p>商品介绍:&nbsp;<a class="expand-description" href="javascript:$(\'#').concat(e,'\').toggle()">查看</a>\n          <div id="').concat(e,'" style="border: 1px solid #eee;display: none">').concat(Object(J.d)(t.description),"</div>\n        </p>\n        <p>售价:&nbsp;￥").concat((t.price/100).toFixed(2),"</p>\n        <p>成本价:&nbsp;￥").concat((t.cost/100).toFixed(2),'</p>\n        <p>商品链接:&nbsp;<a class="icon-btn" href="').concat(t.url,'" target="_blank">').concat(t.url,"</a>\n        &nbsp;").concat(t.password_open?"密码:&nbsp;"+t.password:"","</p>\n        ");t.retail_open&&(a+='\n        <p>分销代码:&nbsp;<input class="small-input" readonly value="'.concat(t.retail_code,'" onclick="select();" style="width: 260px"></p>\n        ')),this.$msgbox({title:"商品详情",message:a,dangerouslyUseHTMLString:!0,customClass:"ann-box"})},showUrl:function(t){var e='<a class="icon-btn" href="'.concat(t.url,'" target="_blank">').concat(t.url,"</a>");t.password_open&&(e+="<br>密码: "+t.password),this.$msgbox({title:"单独链接",message:e,dangerouslyUseHTMLString:!0})},goCards:function(t,e){this.$router.push({path:"/admin/product/card/list",query:{type:t,category_id:e.category_id,product_id:e.id}})},handleProductEnabled:function(t){if(t.retail_from&&!t.retail_from.enabled)return t.enabled=0,void this.$msgbox("此商品为分销商品, 原始商品已经下架, 您无法上架此商品","错误");Object(G.e)(t.id,t.enabled)},handleSetSort:function(t){var e=this;parseInt(t.sort)!==t.sort_old?(this.loading=!0,Object(G.g)(t.id,t.sort).then(function(){e.getList()}).catch(function(){e.loading=!1})):t.sort=parseInt(t.sort)},handleDelete:function(t){var e=this,a=t.name;this.$confirm("删除商品<"+a+">? <br>选中商品的卡密将会一起删除<br>此操作不可恢复","提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){e.loading=!0,Object(G.c)(t.id).then(function(){e.$notify({title:"操作成功",message:"商品<"+a+">已删除",type:"info"}),e.getList()}).catch(function(){e.loading=!1})})},checkDelete:function(){var t=this;this.checkedIds.length&&this.$confirm("批量删除选中商品? <br>选中商品的卡密将会一起删除<br>此操作不可恢复","提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){t.loading=!0,Object(G.c)(t.checkedIds).then(function(){t.$notify({title:"操作成功",message:"选中商品已删除",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},checkEnable:function(){var t=this;this.checkedIds.length&&this.$confirm("批量上架选中商品? ","提示",{type:"warning"}).then(function(){t.loading=!0,Object(G.e)(t.checkedIds,1).then(function(){t.$notify({title:"操作成功",message:"选中商品已上架",type:"success"}),t.getList()}).catch(function(){t.loading=!1})})},checkDisable:function(){var t=this;this.checkedIds.length&&this.$confirm("批量下架选中商品? ","提示",{type:"warning"}).then(function(){t.loading=!0,Object(G.e)(t.checkedIds,0).then(function(){t.$notify({title:"操作成功",message:"选中商品已下架",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},handleAdd:(ci=Object(j.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=4;break;case 4:this.$router.push("/admin/product/add"),t.next=18;break;case 8:if(this.userInfo){t.next=10;break}return t.abrupt("return",this.$alert("请在商户列表选择商户后添加",{type:"error"}));case 10:if(window.scrollTo(0,0),this.showAddBox&&this.editInfo)return t.next=14,this.onBoxSubmit(!1);t.next=14;break;case 14:return this.addBoxLoaded=!0,t.next=17,this.$nextTick();case 17:this.showAddBox=!0;case 18:case"end":return t.stop()}},t,this)})),function(){return ci.apply(this,arguments)}),onBoxSubmit:(li=Object(j.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e&&this.getList(),this.showAddBox=!1,t.next=4,this.$nextTick();case 4:this.addBoxLoaded=!1,this.editInfo=null;case 6:case"end":return t.stop()}},t,this)})),function(t){return li.apply(this,arguments)}),goUserDetail:function(t){},handleEdit:(si=Object(j.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.scrollTo(0,0),this.showAddBox)return t.next=4,this.onBoxSubmit(!1);t.next=4;break;case 4:return this.editInfo=e,this.addBoxLoaded=!0,t.next=8,this.$nextTick();case 8:this.showAddBox=!0;case 9:case"end":return t.stop()}},t,this)})),function(t){return si.apply(this,arguments)}),editCallback:function(t){this.editInfo=null,t&&this.getList()},handleEditCategory:function(t){this.editCategory=t},editCategoryCallback:function(t){t&&t.category&&(this.editCategory.category_id=t.category.id,this.editCategory.category=t.category),this.editCategory=null}}},a("8180"),st=Object(v.a)(ot,tt,et,!1,null,null,null).exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"app-container":!t.inBox}},[a("h3",{staticStyle:{margin:"4px 0 28px 0"}},[t._v("添加卡密")]),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":t.labelWidth,rules:t.formRules}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.handleTypeChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:t.CARD_TYPE.TYPE_ONETIME}},[t._v("一次性")]),a("el-radio-button",{attrs:{label:t.CARD_TYPE.TYPE_REPEAT}},[t._v("重复销售")])],1),t.form.type===t.CARD_TYPE.TYPE_REPEAT?a("span",{staticClass:"red-text",staticStyle:{"font-size":"12px",display:"block","line-height":"18px"}},[t._v("注意：将会限制商品最大购买量为1件")]):t._e()],1),a("el-form-item",{attrs:{label:"商品",prop:"product_id"}},[a("el-select",{attrs:{"no-data-text":"请先添加分类"},on:{change:t.getProducts},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1),a("el-select",{model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.products,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"卡密",prop:"card"}},[t.form.type===t.CARD_TYPE.TYPE_ONETIME?a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10},placeholder:"卡号+空格+密码，一行一张卡\n如：ABCDEFG 123456\n(卡密长度不得超过100位)"},model:{value:t.form.card,callback:function(e){t.$set(t.form,"card",e)},expression:"form.card"}}):a("el-input",{attrs:{type:"text",placeholder:"卡号+空格+密码"},model:{value:t.form.card,callback:function(e){t.$set(t.form,"card",e)},expression:"form.card"}})],1),t.form.type===t.CARD_TYPE.TYPE_REPEAT?a("el-form-item",{attrs:{label:"可售",prop:"count_all",rules:[{required:!0,message:"请输入可售总次数",trigger:"blur"},{type:"number",min:1,max:1e7,message:"可售总次数不能超过10000000"}]}},[a("el-input",{attrs:{type:"number",placeholder:"请输入可售总次数"},model:{value:t.form.count_all,callback:function(e){t.$set(t.form,"count_all",t._n(e))},expression:"form.count_all"}})],1):t._e(),a("el-form-item",[a("el-tooltip",{attrs:{effect:"dark",content:"选中后表示重复的卡密将不会加入库存中",placement:"top-start"}},[a("el-checkbox",{model:{value:t.form.is_check,callback:function(e){t.$set(t.form,"is_check",e)},expression:"form.is_check"}},[t._v("检查重复的卡密")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading||t.uploading},on:{click:t.onSubmit}},[t._v("添加")]),"admin"===t._project||"merchant"===t._project?a("p",{staticClass:"red-text"},[t._v("注意：每位商户最多可以添加 "),a("b",[t._v("10000")]),t._v(" 条卡密记录（不包含已售出）（重复销售类型只算1条），"),a("br"),t._v("\n        超出限制会添加失败，请合理配置商品库存。")]):t._e()],1)],1),t.uploading?a("div",{staticClass:"v-modal",staticStyle:{"z-index":"1010"}}):t._e(),t.uploading?a("div",{staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"1011"}},[a("div",{staticStyle:{position:"relative",display:"inline-block",width:"250px","background-color":"#fff","border-radius":"4px",border:"1px solid #ebeef5"}},[a("p",[t._v("正在上传 "+t._s(t.upload.now)+"/"+t._s(t.upload.all))])])]):t._e()],1)},ct=[],ut=a("45fe").a,dt=Object(v.a)(ut,lt,ct,!1,null,null,null).exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:{"app-container":!t.userInfo}},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddBox,expression:"showAddBox"}],staticClass:"apply-box"},[a("el-button",{staticStyle:{float:"right",margin:"10px 15px"},attrs:{icon:"el-icon-close",type:"danger",size:"small"},on:{click:function(e){t.showAddBox=!1}}}),t.showAddBox||t.addBoxLoaded?a("el-card",{staticClass:"my-card"},[a("card-add",{attrs:{"in-box":!0,userInfo:t.userInfo},on:{submit:t.onAdd}})],1):t._e()],1)]),a("el-col",{staticClass:"no-bottom-form",attrs:{span:24}},[a("el-form",{staticClass:"list-pre-table",attrs:{inline:!0}},[a("el-form-item",{staticClass:"mobile-full-width"},[a("el-select",{staticClass:"mobile-full-width",attrs:{size:"small","no-data-text":"无分类数据"},on:{change:t.getProducts},model:{value:t.where.category_id,callback:function(e){t.$set(t.where,"category_id",e)},expression:"where.category_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),0<t.where.category_id?a("el-select",{staticClass:"mobile-full-width",attrs:{size:"small"},on:{change:t.getList},model:{value:t.where.product_id,callback:function(e){t.$set(t.where,"product_id",e)},expression:"where.product_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.products,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})],2):t._e()],1),a("el-form-item",{staticClass:"mobile-full-width"},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"搜索类型",value:"",size:"small"},slot:"prepend",model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{attrs:{label:"ID",value:"id"}}),a("el-option",{attrs:{label:"卡号",value:"card"}})],1)],1)],1),a("el-form-item",{staticClass:"fix-height"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("el-form-item",{staticClass:"fix-height mobile-full-width"},[t.onlyTrashed?t._e():a("el-switch",{attrs:{"inactive-text":"只显示可售","active-value":1,"inactive-value":0},on:{change:t.handleOnlyCanSell},model:{value:t.where.onlyCanSell,callback:function(e){t.$set(t.where,"onlyCanSell",e)},expression:"where.onlyCanSell"}}),"admin"===t._project?a("el-button",{staticStyle:{"margin-left":"12px","line-height":"20px"},attrs:{type:"text"},on:{click:t.toggleTrash}},[a("icon",{attrs:{name:t.onlyTrashed?"regular/undo":"light/trash-alt"}}),t._v("\n          "+t._s(t.onlyTrashed?"卡密列表":"回收站")+"\n        ")],1):t._e()],1),a("el-form-item",{staticStyle:{float:"right","margin-right":"0"}},[a("a",{staticClass:"icon-btn",on:{click:t.handleExport}},[a("icon",{attrs:{name:"light/file-alt"}}),t._v(" "+t._s("导出("+t.list.total+")"))],1),t.onlyTrashed?t._e():a("a",{staticClass:"icon-btn",on:{click:t.handleAdd}},[a("icon",{attrs:{name:"regular/plus"}}),t._v(" 添加")],1)])],1)],1),t.destroying?t._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table",attrs:{data:t.list.data,stripe:"",border:""},on:{"filter-change":t.handleFilterChange,"selection-change":function(e){return t.checkedIds=e.map(function(t){return t.id}).join(",")}}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),"admin"===t._project?a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}):t._e(),"admin"!==t._project||t.userInfo?t._e():a("el-table-column",{attrs:{prop:"user_id",label:"商户ID",width:"70"}}),a("el-table-column",{attrs:{prop:"card",label:"卡密","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"product",label:"所属商品","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.product?e.row.product.name:"未知商品#"+e.row.product_id)+"\n      ")]}}],null,!1,2044709608)}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"90","column-key":"type",filters:t.typeFilter,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:(e.row.type,t.CARD_TYPE.TYPE_ONETIME,"info"),"close-transition":""}},[t._v("\n          "+t._s(e.row.type===t.CARD_TYPE.TYPE_ONETIME?"一次性":"重复卖")+"\n        ")])]}}],null,!1,3326270394)}),a("el-table-column",{attrs:{prop:"status",label:"售出状态",width:"90","column-key":"status",filters:t.statusFilter,"filtered-value":t.statusFilterValue,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type===t.CARD_TYPE.TYPE_ONETIME?a("el-tag",{attrs:{type:e.row.status===t.CARD_STATUS.STATUS_SOLD?"info":"primary","close-transition":""}},[t._v("\n          "+t._s(e.row.status===t.CARD_STATUS.STATUS_SOLD?"已售":"未售")+"\n        ")]):a("el-tag",{attrs:{type:0<e.row.count_sold?"info":"primary","close-transition":""}},[t._v("\n          "+t._s(e.row.count_sold+"/"+e.row.count_all)+"\n        ")])]}}],null,!1,3110886131)}),t.onlyTrashed?t._e():a("el-table-column",{attrs:{prop:"created_at",label:"添加时间",width:"150"}}),t.onlyTrashed?a("el-table-column",{attrs:{prop:"deleted_at",label:"删除时间",width:"150"}}):t._e(),a("el-table-column",{attrs:{label:"操作",width:t.onlyTrashed?"120":"50",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.onlyTrashed?t._e():a("a",{staticClass:"icon-btn",staticStyle:{"font-size":"14px"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("icon",{attrs:{name:"light/pencil"}})],1),t.onlyTrashed?t._e():a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleDelete(e.row)}}},[a("icon",{attrs:{name:"light/trash-alt"}})],1),t.onlyTrashed?a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleTrashDelete(e.row)}}},[a("icon",{attrs:{name:"light/trash-alt"}}),t._v("\n          销毁\n        ")],1):t._e(),t.onlyTrashed?a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleRestore(e.row)}}},[a("icon",{attrs:{name:"regular/undo"}}),t._v("\n          还原\n        ")],1):t._e()]}}],null,!1,1579001120)})],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"8px","text-align":"left"},attrs:{span:24}},[a("el-form",{staticClass:"no-bottom-form"},[a("el-form-item",{attrs:{label:""}},[t.onlyTrashed?t._e():a("el-button",{attrs:{size:"small"},on:{click:t.checkDelete}},[t._v("选中删除")]),t.onlyTrashed?a("el-button",{attrs:{size:"small"},on:{click:t.checkTrashDelete}},[t._v("选中销毁")]):t._e(),t.onlyTrashed?a("el-button",{attrs:{size:"small"},on:{click:t.checkRestore}},[t._v("选中还原")]):t._e(),t.onlyTrashed?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleRestoreAll}},[t._v("全部还原")]):t._e(),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.handleDeleteAll}},[t._v("\n          "+t._s(t.onlyTrashed?"全部销毁":"全部删除")+"\n        ")])],1)],1)],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"12px","text-align":"right"},attrs:{span:24}},[0<t.list.total?a("el-pagination",{staticClass:"pagination",attrs:{"page-size":20,"page-sizes":[10,20,30,40,50,100],total:t.list.total,"current-page":t.list.current_page,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.list,"current_page",e)},"update:current-page":function(e){return t.$set(t.list,"current_page",e)},"current-change":t.onChangePage,"size-change":t.onChangePageSize}}):t._e()],1),t.editInfo?a("card-edit",{attrs:{info:t.editInfo},on:{close:t.editCallback}}):t._e()],1)},ft=[],ht=a("70da"),mt=a.n(ht),gt=a("7413"),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑卡号",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"卡号",prop:"card"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入卡号"},model:{value:t.form.card,callback:function(e){t.$set(t.form,"card",e)},expression:"form.card"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:t.CARD_TYPE.TYPE_ONETIME}},[t._v("一次性")]),a("el-radio-button",{attrs:{label:t.CARD_TYPE.TYPE_REPEAT}},[t._v("重复销售")])],1)],1),t.form.type===t.CARD_TYPE.TYPE_REPEAT?a("el-form-item",{attrs:{label:"可售",prop:"count_all",rules:[{required:!0,message:"请输入可售总次数",trigger:"blur"},{type:"number",min:t.form.count_sold,message:"可售总次数不能低于当前已售次数"},{type:"number",max:1e7,message:"可售总次数不能超过10000000"}]}},[a("el-input",{attrs:{type:"number",placeholder:"请输入可售总次数"},model:{value:t.form.count_all,callback:function(e){t.$set(t.form,"count_all",t._n(e))},expression:"form.count_all"}}),a("span",[t._v("当前已售出 "+t._s(t.form.count_sold)+"次")])],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleClose(!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("确认编辑\n    ")])],1)],1)},bt=[],vt={props:{info:{}},data:function(){return{loading:!1,visible:!0,CARD_STATUS:gt.a,CARD_TYPE:gt.b,form:{id:0,product_id:0,card:"",type:gt.b.TYPE_ONETIME,count_all:null,count_sold:null},formRules:{card:[{required:!0,message:"请输入卡号",trigger:"blur"}]}}},watch:{visible:function(t){t||this.$emit("close",!1)}},mounted:function(){this.form.id=this.info.id,this.form.card=this.info.card,this.form.status=this.info.status,this.form.type=this.info.type,this.form.count_all=this.info.count_all,this.form.count_sold=this.info.count_sold},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,Object(gt.e)(t.form).then(function(){t.loading=!1,t.$notify({title:"提示",message:"编辑卡密成功",type:"success",duration:3e3}),t.handleClose(!0)}).catch(function(){t.loading=!1}))})},handleClose:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",t)}}},yt=Object(v.a)(vt,_t,bt,!1,null,null,null).exports,Ct={props:{userInfo:{type:Object,default:null},_trashed:{default:!1},_project:{default:"admin_free"},filter:{}},components:{cardEdit:yt,cardAdd:dt},data:function(){return{loading:!1,showAddBox:!1,addBoxLoaded:!1,destroying:!1,onlyTrashed:!1,CARD_TYPE:gt.b,CARD_STATUS:gt.a,search:{type:"card",value:""},where:{category_id:-1,product_id:-1,onlyCanSell:1},categories:[{id:-2,name:"加载中"}],products:[{id:-2,name:"加载中"}],list:{current_page:1,data:[],from:1,last_page:1,next_page_url:null,per_page:20,prev_page_url:null,to:0,total:0},checkedIds:"",statusFilter:[{text:"未售",value:gt.a.STATUS_NORMAL,type:"primary"},{text:"已售",value:gt.a.STATUS_SOLD,type:"info"}],statusFilterValue:[],typeFilter:[{text:"重复卖",value:gt.b.TYPE_REPEAT,type:"info"},{text:"一次性",value:gt.b.TYPE_ONETIME,type:"info"}],editInfo:null}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},created:function(){this.onlyTrashed=this._trashed},mounted:function(){var t,e,a;this.$route.query.category_id&&this.$route.query.product_id&&this.$route.query.type&&(t=this.$route.query.type,e=parseInt(this.$route.query.category_id),a=parseInt(this.$route.query.product_id)),this.filter&&this.filter.category_id&&this.filter.product_id&&this.filter.type&&(t=this.filter.type,e=parseInt(this.filter.category_id),a=parseInt(this.filter.product_id)),t&&e&&a?this.searchBy_(t,e,a):(this.handleSearch(),this.getCategories())},methods:{searchBy_:function(t,e,a){this.where.category_id=e,this.where.product_id=a,"count"===t?(this.where.onlyCanSell=1,this.statusFilterValue.splice(0,this.statusFilterValue.length),this.where.status=""):"count_sold"===t&&(this.where.onlyCanSell=0,this.statusFilterValue.push(gt.a.STATUS_SOLD),this.where.status=this.statusFilterValue.join(",")),this.handleSearch(),this.getCategories()},handleOnlyCanSell:function(){this.where.onlyCanSell&&(this.statusFilterValue.splice(0,this.statusFilterValue.length),this.where.status=""),this.handleSearch()},getCategories:function(){var t,e=this;this.loading=!0,t={search:"simple",val:"list"},this.userInfo&&(t.user_id=this.userInfo.id),Object(M.d)(t).then(function(t){e.categories=t.data,0<e.where.category_id&&0<e.where.product_id&&e.getProducts(e.where.category_id,e.where.product_id)})},getProducts:function(t){var e,a=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;this.where.product_id=i,this.getList(),this.products=[],e={search:"simple",val:t,from:"card"},this.userInfo&&(e.user_id=this.userInfo.id),Object(G.f)(e).then(function(t){a.products=t.data})},_generateWhere:function(){return this.where.current_page=this.list.current_page,this.where.per_page=this.list.per_page,this.where.trashed=this.onlyTrashed,this.userInfo&&(this.where.user_id=this.userInfo.id),this.where},getList:function(){var t=this;this.loading=!0,Object(gt.f)(this._generateWhere()).then(function(e){t.list=e.data,t.loading=!1})},handleExport:function(){window.open(window.API_HOST+"card/export?"+mt.a.param(this.where),"_blank")},handleSearch:function(){var t={search:this.search.type,val:this.search.value};Object.assign(this.where,t),this.getList()},handleFilterChange:function(t){var e={};t.status?e.status=t.status.join(","):e.status=null,t.type?e.type=t.type.join(","):e.type=null,Object.assign(this.where,e),this.getList()},onChangePage:function(){this.getList()},onChangePageSize:function(t){this.list.per_page=t,this.getList()},handleDelete:function(t){var e=this,a=t.card;this.$confirm("删除卡密"+a+"? 您可以稍后在回收站查看","提示",{type:"warning"}).then(function(){e.loading=!0,Object(gt.g)(t.id).then(function(){e.$notify({title:"操作完成",message:"卡密"+a+"已删除",type:"info"}),e.getList()}).catch(function(){e.loading=!1})})},handleTrashDelete:function(t){var e=this,a=t.card;this.$confirm("销毁卡密"+a+"? 此操作不可恢复","提示",{type:"warning"}).then(function(){e.loading=!0,Object(gt.h)(t.id).then(function(){e.$notify({title:"操作完成",message:"卡密"+a+"已销毁",type:"info"}),e.getList()}).catch(function(){e.loading=!1})})},handleRestore:function(t){var e=this,a=t.card;this.$confirm("还原卡密"+a+"? ","提示",{type:"warning"}).then(function(){e.loading=!0,Object(gt.i)(t.id).then(function(){e.$notify({title:"操作完成",message:"卡密"+a+"已还原",type:"success"}),e.getList()}).catch(function(){e.loading=!1})})},checkDelete:function(){var t=this;this.checkedIds.length&&this.$confirm("批量删除选中卡密? 您可以稍后在回收站查看","提示",{type:"warning"}).then(function(){t.loading=!0,Object(gt.g)(t.checkedIds).then(function(){t.$notify({title:"操作完成",message:"选中卡密已删除",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},checkTrashDelete:function(){var t=this;this.checkedIds.length&&this.$confirm("批量销毁选中卡密? 此操作不可恢复","提示",{type:"warning"}).then(function(){t.loading=!0,Object(gt.h)(t.checkedIds).then(function(){t.$notify({title:"操作完成",message:"选中卡密已销毁",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},checkRestore:function(){var t=this;this.checkedIds.length&&this.$confirm("批量还原选中卡密? ","提示",{type:"warning"}).then(function(){t.loading=!0,Object(gt.i)(t.checkedIds).then(function(){t.$notify({title:"操作完成",message:"选中卡密已还原",type:"success"}),t.getList()}).catch(function(){t.loading=!1})})},handleDeleteAll:function(){var t=this;this.$confirm("是否"+(this.onlyTrashed?"清空当前回收站":"删除当前卡密")+"列表?<br> (当前列表共"+this.list.total+"条)","警告",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){t.loading=!0,Object(gt.d)(t._generateWhere()).then(function(){t.$notify({title:"操作完成",message:t.onlyTrashed?"当前回收站列表已清空":"当前卡密列表已删除",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},handleRestoreAll:function(){var t=this;this.$confirm("是否还原当前回收站列表?<br> (当前列表共"+this.list.total+"条)","询问",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){t.loading=!0,Object(gt.j)(t._generateWhere()).then(function(){t.$notify({title:"操作完成",message:"当前回收站列表已还原",type:"success"}),t.getList()}).catch(function(){t.loading=!1})})},handleAdd:(di=Object(j.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=4;break;case 4:this.$router.push("/admin/product/card/add"),t.next=13;break;case 8:return window.scrollTo(0,0),this.addBoxLoaded=!0,t.next=12,this.$nextTick();case 12:this.showAddBox=!0;case 13:case"end":return t.stop()}},t,this)})),function(){return di.apply(this,arguments)}),onAdd:function(){this.getList(),this.showAddBox=!1},handleEdit:function(t){this.editInfo=t},editCallback:function(t){this.editInfo=null,t&&this.getList()},toggleTrash:(ui=Object(j.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.onlyTrashed=!this.onlyTrashed,this.destroying=!0,t.next=4,this.$nextTick();case 4:this.destroying=!1,this.getList();case 6:case"end":return t.stop()}},t,this)})),function(){return ui.apply(this,arguments)})}},xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card-list",{attrs:{_trashed:!0}})},kt=[],At={components:{cardList:wt=Object(v.a)(Ct,pt,ft,!1,null,null,null).exports}},Et=Object(v.a)(At,xt,kt,!1,null,null,null).exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:{"app-container":!t.userInfo}},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddBox,expression:"showAddBox"}],staticClass:"apply-box"},[a("el-button",{staticStyle:{float:"right",margin:"10px 15px"},attrs:{icon:"el-icon-close",type:"danger",size:"small"},on:{click:function(e){t.showAddBox=!1}}}),t.showAddBox||t.addBoxLoaded?a("el-card",{staticClass:"my-card"},[a("coupon-add",{attrs:{"in-box":!0,userInfo:t.userInfo},on:{submit:t.onAdd}})],1):t._e()],1)]),a("el-col",{staticClass:"no-bottom-form",attrs:{span:24}},[a("el-form",{staticClass:"list-pre-table",attrs:{inline:!0}},[a("el-form-item",{staticClass:"mobile-full-width"},[a("el-select",{staticClass:"mobile-full-width",attrs:{size:"small","no-data-text":"无分类数据"},on:{change:t.getProducts},model:{value:t.where.category_id,callback:function(e){t.$set(t.where,"category_id",e)},expression:"where.category_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),0<t.where.category_id?a("el-select",{staticClass:"mobile-full-width",attrs:{size:"small"},on:{change:t.getList},model:{value:t.where.product_id,callback:function(e){t.$set(t.where,"product_id",e)},expression:"where.product_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.products,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})],2):t._e()],1),a("el-form-item",{staticClass:"mobile-full-width"},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"搜索类型",value:"",size:"small"},slot:"prepend",model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{attrs:{label:"ID",value:"id"}}),a("el-option",{attrs:{label:"优惠券",value:"coupon"}}),a("el-option",{attrs:{label:"备注",value:"remark"}})],1)],1)],1),a("el-form-item",{staticClass:"fix-height"},[a("el-button",{attrs:{size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("el-form-item",{staticStyle:{float:"right","margin-right":"0"}},[a("a",{staticClass:"icon-btn",on:{click:t.handleAdd}},[a("icon",{attrs:{name:"regular/plus"}}),t._v(" 添加")],1)])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table",attrs:{data:t.list.data,stripe:"",border:""},on:{"filter-change":t.handleFilterChange,"selection-change":function(e){return t.checkedIds=e.map(function(t){return t.id}).join(",")}}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),"admin"===t._project?a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}):t._e(),"admin"!==t._project||t.userInfo?t._e():a("el-table-column",{attrs:{prop:"user_id",label:"商户ID",width:"70"}}),a("el-table-column",{attrs:{prop:"coupon",label:"优惠券","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"coupon",label:"优惠额",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.discount_type===t.COUPON_DISCOUNT_TYPE.AMOUNT?"￥"+(e.row.discount_val/100).toFixed(2):e.row.discount_val+"%")+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"use_for",label:"适用商品","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.renderUseFor(e.row))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"90","column-key":"type",filters:t.typeFilter,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:(e.row.type,t.COUPON_TYPE.TYPE_ONETIME,"info"),"close-transition":""}},[t._v("\n          "+t._s(e.row.type===t.COUPON_TYPE.TYPE_ONETIME?"一次性":"重复使用")+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"使用状态",width:"90","column-key":"status",filters:t.statusFilter,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.type===t.COUPON_TYPE.TYPE_ONETIME?a("el-tag",{attrs:{type:e.row.status===t.COUPON_STATUS.STATUS_USED?"info":"primary","close-transition":""}},[t._v("\n          "+t._s(e.row.status===t.COUPON_STATUS.STATUS_USED?"已用":"未用")+"\n        ")]):a("el-tag",{attrs:{type:0<e.row.count_used?"info":"primary","close-transition":""}},[t._v("\n          "+t._s(e.row.count_used+"/"+e.row.count_all)+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"expire_at",label:"过期时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:new Date(e.row.expire_at)<new Date?"amber-text":""},[t._v(t._s(e.row.expire_at))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"50",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"icon-btn",staticStyle:{"font-size":"14px"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("icon",{attrs:{name:"light/pencil"}})],1),a("a",{staticClass:"icon-btn",on:{click:function(a){return t.handleDelete(e.row)}}},[a("icon",{attrs:{name:"light/trash-alt"}})],1)]}}])})],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"8px","text-align":"left"},attrs:{span:24}},[a("el-form",{staticClass:"no-bottom-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"选中"}},[a("el-button",{attrs:{size:"small"},on:{click:t.checkDelete}},[t._v("删除")])],1)],1)],1),a("el-col",{staticClass:"list-after-action",staticStyle:{"padding-top":"12px","text-align":"right"},attrs:{span:24}},[0<t.list.total?a("el-pagination",{staticClass:"pagination",attrs:{"page-size":20,"page-sizes":[10,20,30,40,50,100],total:t.list.total,"current-page":t.list.current_page,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.list,"current_page",e)},"update:current-page":function(e){return t.$set(t.list,"current_page",e)},"current-change":t.onChangePage,"size-change":t.onChangePageSize}}):t._e()],1),t.editInfo?a("coupon-edit",{attrs:{info:t.editInfo},on:{close:t.editCallback}}):t._e()],1)},Ot=[],St={STATUS_NORMAL:0,STATUS_USED:2},It={TYPE_ONETIME:0,TYPE_REPEAT:1},Rt={AMOUNT:0,PERCENT:1},$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"编辑卡号",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"优惠券",prop:"coupon"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入优惠券"},model:{value:t.form.coupon,callback:function(e){t.$set(t.form,"coupon",e)},expression:"form.coupon"}})],1),a("el-form-item",{attrs:{label:"面额",prop:"discount_val"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入优惠券面额"},model:{value:t.form.discount_val,callback:function(e){t.$set(t.form,"discount_val",t._n(e))},expression:"form.discount_val"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"类型",value:"",size:"small"},on:{change:t.onDiscountTypeChange},slot:"append",model:{value:t.form.discount_type,callback:function(e){t.$set(t.form,"discount_type",e)},expression:"form.discount_type"}},[a("el-option",{attrs:{label:"￥",value:t.COUPON_DISCOUNT_TYPE.AMOUNT}}),a("el-option",{attrs:{label:"%",value:t.COUPON_DISCOUNT_TYPE.PERCENT}})],1)],1)],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:t.COUPON_TYPE.TYPE_ONETIME}},[t._v("一次性")]),a("el-radio-button",{attrs:{label:t.COUPON_TYPE.TYPE_REPEAT}},[t._v("重复使用")])],1)],1),t.form.type===t.COUPON_TYPE.TYPE_REPEAT?a("el-form-item",{attrs:{label:"可用",prop:"count_all",rules:[{required:!0,message:"请输入可用次数",trigger:"blur"},{type:"number",min:1,max:1e7,message:"可用次数不能超过10000000"}]}},[a("el-input",{attrs:{type:"number",placeholder:"请输入可用次数"},model:{value:t.form.count_all,callback:function(e){t.$set(t.form,"count_all",t._n(e))},expression:"form.count_all"}}),a("span",[t._v("当前已使用 "+t._s(t.form.count_used)+"次")])],1):t._e(),a("el-form-item",{attrs:{label:"过期",prop:"expire_at"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择过期时间"},model:{value:t.form.expire_at,callback:function(e){t.$set(t.form,"expire_at",e)},expression:"form.expire_at"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.handleClose(!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("确认编辑\n    ")])],1)],1)},Pt=[],jt={props:{info:{}},data:function(){return{loading:!1,visible:!0,COUPON_STATUS:St,COUPON_TYPE:It,COUPON_DISCOUNT_TYPE:Rt,form:{id:0,product_id:0,coupon:"",type:It.TYPE_ONETIME,discount_val:"",discount_type:Rt.AMOUNT,count_all:null,count_used:null,expire_at:null},formRules:{coupon:[{required:!0,message:"请输入卡号",trigger:"blur"}],discount_val:[{required:!0,message:"请输入优惠券面额",trigger:"blur"}]}}},watch:{visible:function(t){t||this.$emit("close",!1)}},mounted:function(){this.form.id=this.info.id,this.form.coupon=this.info.coupon,this.form.status=this.info.status,this.form.discount_type=this.info.discount_type,this.info.discount_type===Rt.AMOUNT?this.form.discount_val=(this.info.discount_val/100).toFixed(2):this.form.discount_val=this.info.discount_val,this.form.type=this.info.type,this.form.count_all=this.info.count_all,this.form.count_used=this.info.count_used,this.form.expire_at=new Date(this.info.expire_at)},methods:{onDiscountTypeChange:function(){this.form.discount_type===Rt.AMOUNT?this.formRules.discount_val=[{required:!0,message:"请输入优惠券面额",trigger:"blur"},{type:"number",min:.01,max:1e7,message:"数字需要在0.01-10000000之间"}]:this.form.discount_type===Rt.PERCENT&&(this.formRules.discount_val=[{required:!0,message:"请输入优惠百分比",trigger:"blur"},{type:"number",min:1,max:100,message:"数字需要在1-100之间"}])},handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(e){t.loading=!0;var a,i=Object.assign({},t.form);i.discount_type===Rt.AMOUNT&&(i.discount_val*=100),i.expire_at&&(i.expire_at=i.expire_at.format("yyyy-MM-dd")),(a=i,Object(S.a)({url:"coupon/edit",method:"post",data:a})).then(function(){t.loading=!1,t.$notify({title:"提示",message:"编辑优惠券成功",type:"success",duration:3e3}),t.handleClose(!0)}).catch(function(){t.loading=!1})}})},handleClose:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",t)}}},Mt=Object(v.a)(jt,$t,Pt,!1,null,null,null).exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"app-container":!t.inBox}},[a("h3",{staticStyle:{margin:"4px 0 28px 0"}},[t._v("生成优惠券")]),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":t.isMobile?"top":"","label-width":"90px",rules:t.formRules}},[a("el-form-item",{class:t.formItemClass,style:t.isMobile?"margin-top: -24px":"",attrs:{label:"类型"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.onTypeChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:t.COUPON_TYPE.TYPE_ONETIME}},[t._v("一次性")]),a("el-radio-button",{attrs:{label:t.COUPON_TYPE.TYPE_REPEAT}},[t._v("重复使用")])],1)],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"商品",prop:"product_id"}},[a("el-select",{attrs:{"no-data-text":"请先添加分类"},on:{change:t.getProducts},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.categories,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})],2),a("el-select",{model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.products,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})],2)],1),a("el-form-item",{class:t.formItemClass,attrs:{label:"面额",prop:"discount_val"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入优惠券面额"},model:{value:t.form.discount_val,callback:function(e){t.$set(t.form,"discount_val",t._n(e))},expression:"form.discount_val"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{slot:"append",placeholder:"类型",value:"",size:"small"},on:{change:t.onDiscountTypeChange},slot:"append",model:{value:t.form.discount_type,callback:function(e){t.$set(t.form,"discount_type",e)},expression:"form.discount_type"}},[a("el-option",{attrs:{label:"￥",value:t.COUPON_DISCOUNT_TYPE.AMOUNT}}),a("el-option",{attrs:{label:"%",value:t.COUPON_DISCOUNT_TYPE.PERCENT}})],1)],1),a("div",{staticClass:"el-form-item__tip"},[a("span",[t._v("* 请合理设置优惠金额, 以避免产生亏损")])])],1),t.form.type===t.COUPON_TYPE.TYPE_REPEAT?a("el-form-item",{class:t.formItemClass,attrs:{label:"可用次数",prop:"count_all",rules:[{required:!0,message:"请输入可用次数",trigger:"blur"},{type:"number",min:1,max:1e7,message:"可用次数不能超过10000000"}]}},[a("el-input",{attrs:{type:"number",placeholder:"请输入可用次数"},model:{value:t.form.count_all,callback:function(e){t.$set(t.form,"count_all",t._n(e))},expression:"form.count_all"}})],1):t._e(),t.form.type===t.COUPON_TYPE.TYPE_ONETIME?a("el-form-item",{class:t.formItemClass,attrs:{label:"生成数量",prop:"count",rules:[{required:!0,message:"请输入生成数量",trigger:"blur"},{type:"number",min:1,max:100,message:"每次生成不能大于100张"}]}},[a("el-input",{attrs:{type:"number",placeholder:"请输入生成数量"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",t._n(e))},expression:"form.count"}})],1):t._e(),t.form.type===t.COUPON_TYPE.TYPE_REPEAT?a("el-form-item",{class:t.formItemClass,attrs:{label:"券代码",prop:"coupon"}},[a("el-input",{attrs:{type:"text",placeholder:"为空系统自动生成"},model:{value:t.form.coupon,callback:function(e){t.$set(t.form,"coupon",e)},expression:"form.coupon"}})],1):t._e(),a("el-form-item",{class:t.formItemClass,attrs:{label:"过期时间",prop:"expire_at"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择过期时间"},model:{value:t.form.expire_at,callback:function(e){t.$set(t.form,"expire_at",e)},expression:"form.expire_at"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("添加")])],1)],1),t.list.length?a("div",{staticStyle:{"font-size":"14px",color:"#606266","line-height":"16px","margin-top":"24px"},style:{"margin-left":t.isMobile?0:"90px"}},[a("span",[t._v("生成优惠券 "+t._s(t.list.length)+"张")]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.list.join("\r\n"),expression:"list.join('\\r\\n')"}],ref:"copy-coupons",staticStyle:{display:"inline-block","margin-left":"12px"},attrs:{size:"mini"},on:{success:function(e){return t.$message({message:"复制成功",type:"success",duration:1e3})},error:function(e){return t.$message({message:"复制失败, 请手动复制",type:"error",duration:1e3})}}},[t._v("\n      一键复制\n    ")]),a("p",{domProps:{innerHTML:t._s(t.list.join("<br>"))}})],1):t._e()],1)},Bt={props:{inBox:{default:!(Dt=[])},userInfo:{}},data:function(){var t=new Date;return t.setTime(6048e5+t.getTime()),{loading:!1,isMobile:this.$store.state.app.isMobile,COUPON_TYPE:It,COUPON_DISCOUNT_TYPE:Rt,categories:[],products:[],form:{category_id:-1,product_id:-1,type:It.TYPE_ONETIME,coupon:null,discount_val:"",discount_type:Rt.AMOUNT,count:null,expire_at:t},formRules:{discount_val:[{required:!0,message:"请输入优惠券面额",trigger:"blur"},{type:"number",min:.01,max:1e6,message:"数字需要在0.01-1000000之间"}]},list:[]}},computed:{formItemClass:function(){return this.isMobile?"coupon-form-item":""}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.getCategories(),this.userInfo&&(this.form.user_id=this.userInfo.id)},methods:{getCategories:function(){var t,e=this;this.categories=[],t={search:"simple",val:"list"},this.userInfo&&(t.user_id=this.userInfo.id),Object(M.d)(t).then(function(t){e.categories=t.data})},getProducts:function(t){var e,a=this;this.category_id_old!==t&&(this.category_id_old=t,this.products=[],e={search:"simple",val:t},this.userInfo&&(e.user_id=this.userInfo.id),Object(G.f)(e).then(function(t){a.products=t.data}))},onTypeChange:function(){},onDiscountTypeChange:function(){this.form.discount_type===Rt.AMOUNT?this.formRules.discount_val=[{required:!0,message:"请输入优惠券面额",trigger:"blur"},{type:"number",min:.01,max:1e7,message:"数字需要在0.01-10000000之间"}]:this.form.discount_type===Rt.PERCENT&&(this.formRules.discount_val=[{required:!0,message:"请输入优惠百分比",trigger:"blur"},{type:"number",min:1,max:100,message:"数字需要在1-100之间"}])},onSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(e){t.list=[],t.loading=!0;var a,i=Object.assign({},t.form);i.discount_type===Rt.AMOUNT&&(i.discount_val*=100),i.expire_at&&(i.expire_at=i.expire_at.format("yyyy-MM-dd")),(a=i,Object(S.a)({url:"coupon/create",method:"post",data:a})).then(function(e){t.loading=!1,t.list=e.data;var a=t.list.join("\r\n");t.$msgbox({title:"生成优惠券成功",message:'优惠券列表：<br><textarea title="优惠券列表" rows="6" style="width: 100%" readonly>'+Object(J.a)(a)+"</textarea>",showCancelButton:!0,dangerouslyUseHTMLString:!0,cancelButtonText:"一键复制"}).catch(function(e){"cancel"===e&&mt()(t.$refs["copy-coupons"].$el).click()}),t.$emit("submit",!0)}).catch(function(){t.loading=!1})}})}}},a("ad2b"),Lt=Object(v.a)(Bt,zt,Dt,!1,null,null,null).exports,Nt={props:{userInfo:{type:Object,default:null},onlyTrashed:{default:!1},_project:{default:"admin_free"}},components:{couponEdit:Mt,couponAdd:Lt},data:function(){return{loading:!1,exporting:!1,showAddBox:!1,addBoxLoaded:!1,COUPON_TYPE:It,COUPON_STATUS:St,COUPON_DISCOUNT_TYPE:Rt,search:{type:"coupon",value:""},where:{category_id:-1,product_id:-1},categories:[{id:-2,name:"加载中"}],products:[{id:-2,name:"加载中"}],list:{current_page:1,data:[],from:1,last_page:1,next_page_url:null,per_page:20,prev_page_url:null,to:0,total:0},checkedIds:"",statusFilter:[{text:"未用",value:St.STATUS_NORMAL,type:"primary"},{text:"已用",value:St.STATUS_USED,type:"info"}],typeFilter:[{text:"重复使用",value:It.TYPE_REPEAT,type:"info"},{text:"一次性",value:It.TYPE_ONETIME,type:"info"}],editInfo:null}},watch:{loading:function(t,e){t?e||O.a.isStarted()||O.a.start():O.a.done()}},mounted:function(){this.getCategories()},methods:{getCategories:function(){var t,e=this;this.loading=!0,t={search:"simple",val:"list"},this.userInfo&&(t.user_id=this.userInfo.id),Object(M.d)(t).then(function(t){e.categories=t.data,e.getList()})},getProducts:function(t){var e,a=this;this.where.product_id=-1,this.getList(),this.products=[],e={search:"simple",val:t},this.userInfo&&(e.user_id=this.userInfo.id),Object(G.f)(e).then(function(t){a.products=t.data})},getList:function(){var t,e=this;this.loading=!0,this.where.current_page=this.list.current_page,this.where.per_page=this.list.per_page,this.where.trashed=this.onlyTrashed,this.userInfo&&(this.where.user_id=this.userInfo.id),(t=this.where,Object(S.a)({url:"coupon",method:"post",data:t})).then(function(t){e.list=t.data,e.loading=!1})},handleSearch:function(){var t={search:this.search.type,val:this.search.value};Object.assign(this.where,t),this.getList()},handleFilterChange:function(t){var e={};t.status?e.status=t.status.join(","):e.status=null,t.type?e.type=t.type.join(","):e.type=null,Object.assign(this.where,e),this.getList()},onChangePage:function(){this.getList()},onChangePageSize:function(t){this.list.per_page=t,this.getList()},renderUseFor:function(t){return 0<t.product_id?t.product&&t.product.name?"商品："+t.product.name:"商品：#"+t.product_id:0<t.category_id?t.category&&t.category.name?"分类："+t.category.name:"分类：#"+t.category_id:"店铺通用(商品有规定除外)"},handleDisable:function(t){var e=this,a=t.coupon;this.$confirm("禁用优惠券<"+a+">?","提示",{type:"warning"}).then(function(){e.loading=!0,n(t.id,0).then(function(){e.$notify({title:"操作成功",message:"优惠券<"+a+">已禁用",type:"info"}),t.enabled=0,e.loading=!1}).catch(function(){e.loading=!1})})},handleEnable:function(t){var e=this,a=t.coupon;this.$confirm("启用优惠券<"+a+">?","提示",{type:"warning"}).then(function(){e.loading=!0,n(t.id,1).then(function(){e.$notify({title:"操作成功",message:"优惠券<"+a+">已启用",type:"success"}),t.enabled=1,e.loading=!1}).catch(function(){e.loading=!1})})},handleDelete:function(t){var e=this,a=t.coupon;this.$confirm("删除优惠券"+a+"? 您可以稍后在回收站查看","提示",{type:"warning"}).then(function(){e.loading=!0,r(t.id).then(function(){e.$notify({title:"操作成功",message:"优惠券"+a+"已删除",type:"info"}),e.getList()}).catch(function(){e.loading=!1})})},checkDelete:function(){var t=this;this.checkedIds.length&&this.$confirm("批量删除选中优惠券? 您可以稍后在回收站查看","提示",{type:"warning"}).then(function(){t.loading=!0,r(t.checkedIds).then(function(){t.$notify({title:"操作成功",message:"选中优惠券已删除",type:"info"}),t.getList()}).catch(function(){t.loading=!1})})},handleAdd:(pi=Object(j.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=4;break;case 4:this.$router.push("/admin/coupon/add"),t.next=13;break;case 8:return window.scrollTo(0,0),this.addBoxLoaded=!0,t.next=12,this.$nextTick();case 12:this.showAddBox=!0;case 13:case"end":return t.stop()}},t,this)})),function(){return pi.apply(this,arguments)}),onAdd:function(){this.getList()},handleEdit:function(t){this.editInfo=t},editCallback:function(t){this.editInfo=null,t&&this.getList()}}},Ut=Object(v.a)(Nt,Tt,Ot,!1,null,null,null).exports,Ft=function(t){return function(){return a("1a5d")("./"+t+".vue")}},c.default.use(u.default),Yt=[{path:"/admin/login",name:"登录",component:Ft("login/login"),hidden:!0},{path:"/admin/404",name:"404 Not Found",component:y,hidden:!0},{path:"/admin/",redirect:"/admin/dashboard/index",hidden:!0},{path:"/admin/dashboard",component:d.default,redirect:"/admin/dashboard/index",hidden:!1,noDropdown:!0,icon:"tachometer-alt",children:[{path:"index",name:"概览",component:Ft("dashboard/index")}]},{path:"/admin/system",component:d.default,redirect:"noredirect",hidden:!1,icon:"cogs",name:"管理中心",children:[{path:"set",name:"网站设置",icon:"cog",component:Ft("system/set/index")},{path:"pay",name:"支付渠道",icon:"credit-card",component:Ft("pay/list/index")},{path:"logs",name:"登录日志",icon:"regular/sticky-note",component:R},{path:"security",name:"修改密码",icon:"regular/shield-alt",component:Ft("system/security/index")}]},{path:"/admin/product",component:d.default,redirect:"noredirect",hidden:!1,icon:"cubes",name:"商品管理",children:[{path:"category",name:"商品分类",icon:"bars",component:H},{path:"list",name:"商品列表",icon:"bars",component:st},{path:"add",name:"添加商品",icon:"regular/plus",component:K},{path:"card/add",name:"添加卡密",icon:"regular/plus",component:dt},{path:"card/list",name:"卡密管理",icon:"bars",component:wt},{path:"card/recycle",name:"卡密回收站",icon:"light/trash-alt",component:Et}]},{path:"/admin/order",component:d.default,redirect:"noredirect",hidden:!1,icon:"list-ul",name:"交易管理",children:[{path:"list",name:"订单记录",icon:"bars",component:Ft("order/list/index")},{path:"recent",name:"7日订单",icon:"bars",component:Ft("order/recent/index")},{path:"analysis",name:"收益统计",icon:"chart-bar",component:Ft("order/profit/index")}]},{path:"/admin/coupon",component:d.default,redirect:"noredirect",hidden:!1,icon:"tags",name:"营销助手",children:[{path:"add",name:"添加优惠券",icon:"regular/plus",component:Lt},{path:"list",name:"管理优惠券",icon:"bars",component:Ut}]}],Vt=new u.default({mode:"history",scrollBehavior:function(){return{y:0}},routes:Yt}),Ht=[{path:"/admin/about",component:d.default,redirect:"/admin/about/index",hidden:!1,noDropdown:!0,icon:"info",children:[{path:"index",name:"关于系统",component:k}]},{path:"/*",redirect:"/admin/404",hidden:!0}],qt=a("2f62"),Wt=a("768b"),a("ac4d"),a("8a81"),a("ac6a"),Qt=a("a78e"),Gt=a.n(Qt),Zt=a("a80e"),Jt={state:{sidebar:{opened:!1},theme:"default",livenewsChannels:Gt.a.get("livenewsChannels")||"[]",visitedViews:[],isMobile:Zt.a.isMobile()},mutations:{TOGGLE_SIDEBAR:function(t){t.sidebar.opened?Gt.a.set("sidebarStatus",1):Gt.a.set("sidebarStatus",0),t.sidebar.opened=!t.sidebar.opened},ADD_VISITED_VIEWS:function(t,e){t.visitedViews.some(function(t){return t.path===e.path})||t.visitedViews.push({name:e.name,path:e.path})},DEL_VISITED_VIEWS:function(t,e){var a,i,n,r,o,s=!0,l=!1,c=void 0;try{for(i=t.visitedViews.entries()[Symbol.iterator]();!(s=(n=i.next()).done);s=!0)if(o=(r=Object(Wt.a)(n.value,2))[0],r[1].path===e.path){a=o;break}}catch(t){l=!0,c=t}finally{try{s||null==i.return||i.return()}finally{if(l)throw c}}t.visitedViews.splice(a,1)}},actions:{ToggleSideBar:function(t){(0,t.commit)("TOGGLE_SIDEBAR")},addVisitedViews:function(t,e){(0,t.commit)("ADD_VISITED_VIEWS",e)},delVisitedViews:function(t,e){(0,t.commit)("DEL_VISITED_VIEWS",e)}}},Xt=a("7ded"),Kt="admin_free-token",te={state:{token:o(),userInfo:{},role:""},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_USER_INFO:function(t,e){t.userInfo=e},SET_ROLE:function(t,e){t.role=e}},actions:{Login:function(t,e){var a=t.commit;return new Promise(function(t,i){Object(Xt.d)(e.email.trim(),e.password,e.remember).then(function(i){var n,r=i.data,o=r.user;n=r.token,e.remember,Gt.a.set(Kt,n),a("SET_TOKEN",r.token),a("SET_USER_INFO",o),a("SET_ROLE",o.role),t(r)}).catch(function(t){i(t)})})},GetInfo:function(t){var e=t.commit,a=t.state;return new Promise(function(t,i){Object(Xt.b)(a.token).then(function(a){var i=a.data.user;e("SET_USER_INFO",i),e("SET_ROLE",i.role),t(a)}).catch(function(t){i(t)})})},Logout:function(t){var e=t.commit,a=t.state;return new Promise(function(t,i){Object(Xt.e)(a.token).then(function(){e("SET_TOKEN",""),e("SET_ROLE",""),s(),t()}).catch(function(){e("SET_TOKEN",""),e("SET_ROLE",""),s(),t()})})}}},ee={state:{routers:Yt,addRouters:[]},mutations:{SET_ROUTERS:function(t,e){t.addRouters=e,t.routers=Yt.concat(e)}},actions:{GenerateRoutes:function(t,e){var a=t.commit,i=e.user;return new Promise(function(t){var e;e=-1<i.role.indexOf("admin")?Ht:function t(e,a){return e.filter(function(e){return i=a,!((n=e).meta&&n.meta.role&&!i.some(function(t){return-1<n.meta.role.indexOf(t)})||(e.children&&e.children.length&&(e.children=t(e.children,a)),0));var i,n})}(Ht,i.roles),a("SET_ROUTERS",e),t()})}}},ae={sidebar:function(t){return t.app.sidebar},userInfo:function(t){return t.user.userInfo},role:function(t){return t.user.role},permission_routers:function(t){return t.permission.routers},addRouters:function(t){return t.permission.addRouters}},c.default.use(qt.default),ie=new qt.default.Store({modules:{app:Jt,user:te,permission:ee},getters:ae}),a("4d34"),a("50ef"),a("a505"),a("aea4"),a("b7a3"),a("a917"),a("a3f2"),a("890e"),a("fb9f"),a("044d"),a("e675"),a("75b3"),a("7706"),a("e947"),a("3929"),a("ee58"),a("d34b"),a("b071"),a("9f71"),a("6e31"),a("1ed6"),a("fb13"),a("ea4b"),(ne=a("0874")).a.register({"regular/shield-alt":{width:512,height:512,d:"M256 409.6V100l-142.9 59.5c8.4 116.2 65.2 202.6 142.9 250.1zM466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256 464C158.5 423.4 64 297.3 64 128l192-80 192 80c0 173.8-98.4 297-192 336z"}}),ne.a.register({"regular/info-circle":{width:512,height:512,d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}),ne.a.register({"regular/link":{width:512,height:512,d:"M314.222 197.78c51.091 51.091 54.377 132.287 9.75 187.16-6.242 7.73-2.784 3.865-84.94 86.02-54.696 54.696-143.266 54.745-197.99 0-54.711-54.69-54.734-143.255 0-197.99 32.773-32.773 51.835-51.899 63.409-63.457 7.463-7.452 20.331-2.354 20.486 8.192a173.31 173.31 0 0 0 4.746 37.828c.966 4.029-.272 8.269-3.202 11.198L80.632 312.57c-32.755 32.775-32.887 85.892 0 118.8 32.775 32.755 85.892 32.887 118.8 0l75.19-75.2c32.718-32.725 32.777-86.013 0-118.79a83.722 83.722 0 0 0-22.814-16.229c-4.623-2.233-7.182-7.25-6.561-12.346 1.356-11.122 6.296-21.885 14.815-30.405l4.375-4.375c3.625-3.626 9.177-4.594 13.76-2.294 12.999 6.524 25.187 15.211 36.025 26.049zM470.958 41.04c-54.724-54.745-143.294-54.696-197.99 0-82.156 82.156-78.698 78.29-84.94 86.02-44.627 54.873-41.341 136.069 9.75 187.16 10.838 10.838 23.026 19.525 36.025 26.049 4.582 2.3 10.134 1.331 13.76-2.294l4.375-4.375c8.52-8.519 13.459-19.283 14.815-30.405.621-5.096-1.938-10.113-6.561-12.346a83.706 83.706 0 0 1-22.814-16.229c-32.777-32.777-32.718-86.065 0-118.79l75.19-75.2c32.908-32.887 86.025-32.755 118.8 0 32.887 32.908 32.755 86.025 0 118.8l-45.848 45.84c-2.93 2.929-4.168 7.169-3.202 11.198a173.31 173.31 0 0 1 4.746 37.828c.155 10.546 13.023 15.644 20.486 8.192 11.574-11.558 30.636-30.684 63.409-63.457 54.733-54.735 54.71-143.3-.001-197.991z"}}),ne.a.register({"regular/yen-sign":{width:512,height:512,d:"M347.983 32h-44.065a12.001 12.001 0 0 0-10.555 6.291l-73.76 133.313c-13.96 29.825-27.286 64.725-27.286 64.725h-1.269s-13.326-34.901-27.287-64.725L90.689 38.328A12 12 0 0 0 80.115 32H36.017c-9.157 0-14.94 9.844-10.481 17.843L119.746 216H68c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h77.18l14.775 26.267V312H68c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h91.955v108c0 6.627 5.373 12 12 12h39.456c6.627 0 12-5.373 12-12V360H316c6.627 0 12-5.373 12-12v-24c0-6.627-5.373-12-12-12h-92.589v-21.733L238.185 264H316c6.627 0 12-5.373 12-12v-24c0-6.627-5.373-12-12-12h-52.367L358.45 49.87c4.485-7.999-1.296-17.87-10.467-17.87z"}}),ne.a.register({"regular/chart-pie-o":{width:512,height:512,d:"M461.29 288H224V50.71c0-8.83-7.18-16.21-15.74-16.21-.7 0-1.4.05-2.11.15C87.08 51.47-3.96 155.43.13 280.07 4.2 404.1 107.91 507.8 231.93 511.87c2.69.09 5.39.13 8.07.13 121.04 0 220.89-89.66 237.35-206.16 1.33-9.45-6.52-17.84-16.06-17.84zM240 464c-2.15 0-4.33-.04-6.5-.11-98.98-3.25-182.15-86.42-185.4-185.4C45.31 193.22 98.36 118.35 176 91.14V336h244.78C394.15 411.06 322.06 464 240 464zM288.8.04c-.35-.03-.7-.04-1.04-.04C279.1 0 272 7.44 272 16.23V240h223.77c9.14 0 16.82-7.69 16.2-16.8C503.72 103.74 408.26 8.28 288.8.04z"}}),ne.a.register({"regular/trash-alt":{width:512,height:512,d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}}),ne.a.register({"light/trash-alt":{width:512,height:512,d:"M296 432h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zm-160 0h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zM440 64H336l-33.6-44.8A48 48 0 0 0 264 0h-80a48 48 0 0 0-38.4 19.2L112 64H8a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h24v368a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V96h24a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8zM171.2 38.4A16.1 16.1 0 0 1 184 32h80a16.1 16.1 0 0 1 12.8 6.4L296 64H152zM384 464a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16V96h320zm-168-32h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8z"}}),ne.a.register({"regular/comment-alt-exclamation":{width:512,height:512,d:"M256 256c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zM448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 7.1 5.8 12 12 12 2.4 0 4.9-.7 7.1-2.4L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm16 352c0 8.8-7.2 16-16 16H288l-12.8 9.6L208 428v-60H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288zM284.7 96h-57.4c-10 0-17.6 9.1-15.7 18.9l18 96c1.4 7.6 8 13.1 15.7 13.1h21.4c7.7 0 14.3-5.5 15.7-13.1l18-96c1.9-9.8-5.7-18.9-15.7-18.9z"}}),ne.a.register({"regular/undo":{width:512,height:512,d:"M12 8h27.711c6.739 0 12.157 5.548 11.997 12.286l-2.347 98.568C93.925 51.834 170.212 7.73 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.835 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l19.738-19.738c4.498-4.498 11.753-4.785 16.501-.552C160.213 433.246 205.895 452 256 452c108.322 0 196-87.662 196-196 0-108.322-87.662-196-196-196-79.545 0-147.941 47.282-178.675 115.302l126.389-3.009c6.737-.16 12.286 5.257 12.286 11.997V212c0 6.627-5.373 12-12 12H12c-6.627 0-12-5.373-12-12V20C0 13.373 5.373 8 12 8z"}}),ne.a.register({"light/pencil":{width:512,height:512,d:"M493.255 56.236l-37.49-37.49c-24.993-24.993-65.515-24.994-90.51 0L12.838 371.162.151 485.346c-1.698 15.286 11.22 28.203 26.504 26.504l114.184-12.687 352.417-352.417c24.992-24.994 24.992-65.517-.001-90.51zm-95.196 140.45L174 420.745V386h-48v-48H91.255l224.059-224.059 82.745 82.745zM126.147 468.598l-58.995 6.555-30.305-30.305 6.555-58.995L63.255 366H98v48h48v34.745l-19.853 19.853zm344.48-344.48l-49.941 49.941-82.745-82.745 49.941-49.941c12.505-12.505 32.748-12.507 45.255 0l37.49 37.49c12.506 12.506 12.507 32.747 0 45.255z"}}),ne.a.register({"light/sync":{width:512,height:512,d:"M492 8h-10c-6.627 0-12 5.373-12 12v110.627C426.929 57.261 347.224 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h10.016c6.353 0 11.646-4.949 11.977-11.293C48.157 132.216 141.097 42 256 42c82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-.301 248h-10.015c-6.352 0-11.647 4.949-11.977 11.293C463.841 380.158 370.546 470 256 470c-82.608 0-154.672-46.952-190.299-116H180c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H20c-6.627 0-12 5.373-12 12v160c0 6.627 5.373 12 12 12h10c6.627 0 12-5.373 12-12V381.373C85.071 454.739 164.777 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z"}}),ne.a.register({"regular/plus":{width:384,height:512,d:"M368 224H224V80c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v144H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h144v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V288h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}),ne.a.register({"light/clock":{width:512,height:512,d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-148.9 88.3l-81.2-59c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h14c6.6 0 12 5.4 12 12v146.3l70.5 51.3c5.4 3.9 6.5 11.4 2.6 16.8l-8.2 11.3c-3.9 5.3-11.4 6.5-16.8 2.6z"}}),ne.a.register({"light/file-alt":{width:384,height:512,d:"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z"}}),ne.a.register({"light/question-circle":{width:512,height:512,d:"M256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-28zm7.67-24h-16c-6.627 0-12-5.373-12-12v-.381c0-70.343 77.44-63.619 77.44-107.408 0-20.016-17.761-40.211-57.44-40.211-29.144 0-44.265 9.649-59.211 28.692-3.908 4.98-11.054 5.995-16.248 2.376l-13.134-9.15c-5.625-3.919-6.86-11.771-2.645-17.177C185.658 133.514 210.842 116 255.67 116c52.32 0 97.44 29.751 97.44 80.211 0 67.414-77.44 63.849-77.44 107.408V304c0 6.627-5.373 12-12 12zM256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8z"}}),ne.a.register({"light/link":{width:512,height:512,d:"M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"}}),re=ne.a,oe=a("af88"),a("0fb7"),a("450d"),se=a("f529"),le=a.n(se),a("46a1"),ce=a("e5f2"),ue=a.n(ce),a("9e1f"),de=a("6ed5"),pe=a.n(de),a("be4f"),fe=a("896a"),he=a.n(fe),a("b0ee"),me=a("d180"),ge=a.n(me),a("a335"),_e=a("c0bb"),be=a.n(_e),a("b8e0"),ve=a("a4c4"),ye=a.n(ve),a("e2f3"),Ce=a("06f9"),we=a.n(Ce),a("f225"),xe=a("89a9"),ke=a.n(xe),a("f4f9"),Ae=a("c2cc"),Ee=a.n(Ae),a("7a0f"),Te=a("0f6c"),Oe=a.n(Te),a("915d"),Se=a("e04d"),Ie=a.n(Se),a("cbb5"),Re=a("8bbc"),$e=a.n(Re),a("e612"),Pe=a("dd87"),je=a.n(Pe),a("075a"),Me=a("72aa"),ze=a.n(Me),a("eca7"),De=a("3787"),Be=a.n(De),a("425f"),Le=a("4105"),Ne=a.n(Le),a("b84d"),Ue=a("c216"),Fe=a.n(Ue),a("8f24"),Ye=a("76b9"),Ve=a.n(Ye),a("0c67"),He=a("299c"),qe=a.n(He),a("826b"),We=a("c263"),Qe=a.n(We),a("5466"),Ge=a("ecdf"),Ze=a.n(Ge),a("38a0"),Je=a("ad41"),Xe=a.n(Je),a("ae26"),Ke=a("845f"),ta=a.n(Ke),a("1951"),ea=a("eedf"),aa=a.n(ea),a("016f"),ia=a("486c"),na=a.n(ia),a("6611"),ra=a("e772"),oa=a.n(ra),a("1f1a"),sa=a("4e4b"),la=a.n(sa),a("e960"),ca=a("b35b"),ua=a.n(ca),a("d4df"),da=a("7fc1"),pa=a.n(da),a("c526"),fa=a("1599"),ha=a.n(fa),a("560b"),ma=a("dcdc"),ga=a.n(ma),a("3c52"),_a=a("0d7b"),ba=a.n(_a),a("fe07"),va=a("6ac5"),ya=a.n(va),a("b5d8"),Ca=a("f494"),wa=a.n(Ca),a("9d4c"),xa=a("e450"),ka=a.n(xa),a("10cb"),Aa=a("f3ad"),Ea=a.n(Aa),a("34db"),Ta=a("3803"),Oa=a.n(Ta),a("8bd8"),Sa=a("4cb2"),Ia=a.n(Sa),a("ce18"),Ra=a("f58e"),$a=a.n(Ra),a("4ca3"),Pa=a("443e"),ja=a.n(Pa),a("bd49"),Ma=a("18ff"),za=a.n(Ma),a("960d"),Da=a("defb"),Ba=a.n(Da),a("cb70"),La=a("b370"),Na=a.n(La),a("a7cc"),Ua=a("df33"),Fa=a.n(Ua),a("672e"),Ya=a("101e"),Va=a.n(Ya),a("0fae"),Ha=a("5488"),qa=a.n(Ha),c.default.use(Va.a),c.default.use(Fa.a),c.default.use(Na.a),c.default.use(Ba.a),c.default.use(za.a),c.default.use(ja.a),c.default.use($a.a),c.default.use(Ia.a),c.default.use(Oa.a),c.default.use(Ea.a),c.default.use(ka.a),c.default.use(wa.a),c.default.use(ya.a),c.default.use(ba.a),c.default.use(ga.a),c.default.use(ha.a),c.default.use(pa.a),c.default.use(ua.a),c.default.use(la.a),c.default.use(oa.a),c.default.use(na.a),c.default.use(aa.a),c.default.use(ta.a),c.default.use(Xe.a),c.default.use(Ze.a),c.default.use(Qe.a),c.default.use(qe.a),c.default.use(Ve.a),c.default.use(Fe.a),c.default.use(Ne.a),c.default.use(Be.a),c.default.use(ze.a),c.default.use(je.a),c.default.use($e.a),c.default.use(Ie.a),c.default.use(Oe.a),c.default.use(Ee.a),c.default.use(ke.a),c.default.use(we.a),c.default.use(ye.a),c.default.use(be.a),c.default.use(ge.a),c.default.component(qa.a.name,qa.a),c.default.use(he.a.directive),c.default.prototype.$loading=he.a.service,c.default.prototype.$msgbox=pe.a,c.default.prototype.$alert=pe.a.alert,c.default.prototype.$confirm=pe.a.confirm,c.default.prototype.$prompt=pe.a.prompt,c.default.prototype.$notify=ue.a,c.default.prototype.$message=le.a,Wa=a("323e"),Qa=a.n(Wa),a("a5d8"),a("f5df"),a("8096"),Ga=a("1157"),Za=a.n(Ga),Ja=a("38e1"),a("0183"),Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},Ka=[],a("b763"),ti={name:"app",mounted:function(){}},ei=Object(v.a)(ti,Xa,Ka,!1,null,null,null),ai=ei.exports,c.default.config.productionTip=!1,c.default.prototype.$http=S.a,c.default.use(oe.a),c.default.component("icon",re),window.Vue=c.default,window.Router=a("8c4f"),window.Vuex=a("2f62"),window.$http=S.a,window.$router=Vt,window.$store=ie,window.$=Za.a,window.jQuery=Za.a,window.plugins=[],window.NProgress=Qa.a,ii=["/admin/login","/admin/register","/admin/forget","/admin/reset"],Vt.beforeEach(function(t,e,a){Qa.a.start(),o()?"/admin/login"===t.path?a({path:"/admin/dashboard"}):0===ie.getters.role.length?ie.dispatch("GetInfo").then(function(e){ie.dispatch("GenerateRoutes",e.data).then(function(){Vt.addRoutes(ie.getters.addRouters),a(Object(l.a)({},t))})}).catch(function(t){s(),Vt.push({path:"/admin/login"})}):a():-1!=ii.indexOf(t.path)||"/admin/reset"===t.path.substr(0,8)?a():(a("/admin/login?to="+t.path),Qa.a.done())}),Vt.afterEach(function(t){document.title=t.name,Qa.a.done()}),c.default.config.errorHandler=function(t,e){Ja.a.pushLog({err:t,url:window.location.href,vm:e})},window.bus=new c.default,new c.default({el:"#app",router:Vt,store:ie,render:function(t){return t(ai)}});try{document.getElementById("progress").parentNode.removeChild(document.getElementById("progress"))}catch(t){}},"5beb":function(t,e,a){},"5d16":function(t,e,a){"use strict";function i(t){return Object(l.a)({url:"category",method:"post",data:t})}function n(t){return Object(l.a)({url:"category/edit",method:"post",data:t})}function r(t,e){return Object(l.a)({url:"category/enable",method:"post",data:{ids:t,enabled:e}})}function o(t,e){return Object(l.a)({url:"category/sort",method:"post",data:{id:t,sort:e}})}function s(t){return Object(l.a)({url:"category/delete",method:"post",data:{ids:t}})}a.d(e,"d",function(){return i}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"a",function(){return s});var l=a("41bb")},"61ef":function(t,e,a){"use strict";var i,n,r,o,s;a.r(e),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},n=[],r={name:"lic"},o=a("2877"),s=Object(o.a)(r,i,n,!1,null,"f0c99c2e",null),e.default=s.exports},"67ab":function(t,e,a){"use strict";var i=a("1d41"),n=a.n(i);n.a},6983:function(t,e,a){"use strict";var i=a("2d06"),n=a.n(i);n.a},"6e02":function(t,e,a){},7413:function(t,e,a){"use strict";function i(t){return Object(d.a)({url:"card",method:"post",data:t})}function n(t){return Object(d.a)({url:"card/add",method:"post",data:t})}function r(t){return Object(d.a)({url:"card/edit",method:"post",data:t})}function o(t){return Object(d.a)({url:"card/delete",method:"post",data:{ids:t}})}function s(t){return Object(d.a)({url:"card/trash/restore",method:"post",data:{ids:t}})}function l(t){return Object(d.a)({url:"card/trash/restore/all",method:"post",data:t})}function c(t){return Object(d.a)({url:"card/trash/delete",method:"post",data:{ids:t}})}function u(t){return Object(d.a)({url:"card/delete/all",method:"post",data:t})}var d,p,f;a.d(e,"a",function(){return p}),a.d(e,"b",function(){return f}),a.d(e,"f",function(){return i}),a.d(e,"c",function(){return n}),a.d(e,"e",function(){return r}),a.d(e,"g",function(){return o}),a.d(e,"i",function(){return s}),a.d(e,"j",function(){return l}),a.d(e,"h",function(){return c}),a.d(e,"d",function(){return u}),d=a("41bb"),p={STATUS_NORMAL:0,STATUS_SOLD:1,STATUS_USED:2},f={TYPE_ONETIME:0,TYPE_REPEAT:1}},7556:function(t,e,a){},"7b74":function(t,e,a){"use strict";var i=a("f1d7"),n=a.n(i);n.a},"7c46":function(t,e,a){"use strict";var i=a("37f2"),n=a.n(i);n.a},"7ded":function(t,e,a){"use strict";function i(t,e){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return Object(l.a)({url:"login",method:"post",data:{email:t,password:e,remember:a}})}function n(){return Object(l.a)({url:"login/verify",method:"post"})}function r(t){return Object(l.a)({url:"login/password",method:"post",data:t})}function o(){return Object(l.a)({url:"login/info",method:"post"})}function s(){return Object(l.a)({url:"login/logout",method:"post"})}a.d(e,"d",function(){return i}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"e",function(){return s});var l=a("41bb")},8180:function(t,e,a){"use strict";var i=a("f432"),n=a.n(i);n.a},"8e5f":function(t,e,a){},"97b6":function(t,e,a){},"9a0c":function(t,e,a){"use strict";var i,n,r,o,s;a.r(e),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"app-main"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view",{key:t.key})],1)],1)},n=[],a("7f7f"),r={name:"AppMain",computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}}},o=a("2877"),s=Object(o.a)(r,i,n,!1,null,null,null),e.default=s.exports},a80e:function(t,e,a){"use strict";a("4917"),e.a={isDesktop:function(){return 993<window.innerWidth},detectOs:function(){var t=null;return/NT 5./i.test(navigator.userAgent)?t=/wow64|win64|ia64|x64/i.test(navigator.userAgent)?"xp-64":"xp-32":/NT 6.|NT 7.|NT 8.|NT 9.|NT 10./i.test(navigator.userAgent)?t=/wow64|win64|ia64|x64/i.test(navigator.userAgent)?"vista-64":"vista-32":/iPhone|iPad|iPod/i.test(navigator.userAgent)?t="ios":/Android/i.test(navigator.userAgent)?t="android":/Macintosh/i.test(navigator.userAgent)&&(t="osx"),t},isMobile:function(){return null!==navigator.userAgent.match(/(iPhone|iPod|Android|ios|SymbianOS)/i)},isQQ:function(){return/ QQ\//i.test(navigator.userAgent)},isWechat:function(){return/MicroMessenger/i.test(navigator.userAgent)}}},ad2b:function(t,e,a){"use strict";var i=a("5286"),n=a.n(i);n.a},b130:function(t,e,a){"use strict";function i(t){var e,a,i,n;for(t=t||16,a=(e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678").length,i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*a));return i}function n(t){var e,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!t||"{"!==t[0])return t;e=null;try{e=JSON.parse(t)}catch(e){return t}if(a){if(!e.ops||!e.ops.length)return!1;if(1===e.ops.length&&"\n"===e.ops[0].insert)return!1}return'<div class="ql-snow"><div class="ql-editor quill-html">'.concat(new l.QuillDeltaToHtmlConverter(e.ops).convert(),"</div></div>")}function r(t){var e=document.createElement("div"),a=document.createTextNode(t);return e.appendChild(a),e.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(){var t,e,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[];for(t in a)a.hasOwnProperty(t)&&("object"===Object(s.a)(a[t])?n.push(o(a[t],t)):(e=encodeURIComponent(a[t]),t=!1===i?encodeURIComponent(t):encodeURIComponent(i)+"["+encodeURIComponent(t)+"]",n.push(t+"="+e)));return n.join("&")}var s,l;a.d(e,"c",function(){return i}),a.d(e,"d",function(){return n}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),s=a("7618"),a("28a5"),a("3b2b"),a("a481"),l=a("ff81"),a("a80e"),window.nullfunc=console.log,Date.prototype.format=function(t){var e,a;for(a in t||(t="yyyy-MM-dd hh:mm:ss"),e={"M+":1+this.getMonth(),"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((3+this.getMonth())/3),S:this.getMilliseconds()},/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},String.prototype.random=i},b3db:function(t,e,a){"use strict";var i=a("24e6"),n=a.n(i);n.a},b763:function(t,e,a){},bd60:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quill-editor",class:{"quill-editor_disabled":t.disabled}},[a("div",{attrs:{id:t.id_toolbar}},[t._m(0),t._m(1),t._m(2),t._m(3)]),a("div",{attrs:{id:t.id_editor}}),t.showUpload?a("div",{staticClass:"v-modal",staticStyle:{"z-index":"1010"},on:{click:function(e){t.showUpload=!1}}}):t._e(),t.showUpload?a("div",{ref:"upload_wrapper",staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"1011"},on:{click:t.onUploadClose}},[a("div",{staticClass:"upload-box"},[a("el-radio",{attrs:{label:"upload"},model:{value:t.upload.type,callback:function(e){t.$set(t.upload,"type",e)},expression:"upload.type"}},[t._v("手动上传")]),a("el-radio",{attrs:{label:"input"},model:{value:t.upload.type,callback:function(e){t.$set(t.upload,"type",e)},expression:"upload.type"}},[t._v("网络图片")]),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:"upload"===t.upload.type,expression:"upload.type === 'upload'"}],attrs:{drag:"","list-type":"picture",action:t.upload_url,multiple:!1,data:{user_id:t.userInfo_?t.userInfo_.id:""},headers:{"X-Requested-With":"XMLHttpRequest"},limit:1,"with-credentials":!0,"on-error":t.handleUploadError,"on-change":t.handleUploadChange}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")]),a("div",{staticStyle:{"font-size":"12px"}},[t._v("只能上传图片文件，且不超过5MB")])])]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:"input"===t.upload.type,expression:"upload.type === 'input'"}],attrs:{type:"text",placeholder:"请输入图片URL地址"},model:{value:t.upload.manual,callback:function(e){t.$set(t.upload,"manual",e)},expression:"upload.manual"}},[a("el-button",{attrs:{slot:"append",type:"text"},on:{click:t.handleUploadInputUrl},slot:"append"},[t._v("确定")])],1)],1)]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"ql-formats"},[a("select",{staticClass:"ql-size",attrs:{title:"字体"}},[a("option",{attrs:{value:"small"}},[t._v("小号")]),a("option",{attrs:{selected:""}},[t._v("普通")]),a("option",{attrs:{value:"large"}},[t._v("大号")]),a("option",{attrs:{value:"huge"}},[t._v("超大")])]),a("button",{staticClass:"ql-bold",attrs:{title:"加粗"}}),a("button",{staticClass:"ql-italic",attrs:{title:"倾斜"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"ql-formats"},[a("select",{staticClass:"ql-color",attrs:{title:"颜色"}}),a("select",{staticClass:"ql-background",attrs:{title:"背景色"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"ql-formats"},[a("button",{staticClass:"ql-list",attrs:{value:"ordered",title:"序号列表"}}),a("button",{staticClass:"ql-list",attrs:{value:"bullet",title:"列表"}}),a("select",{staticClass:"ql-align",attrs:{title:"布局"}},[a("option",{attrs:{selected:""}}),a("option",{attrs:{value:"center"}}),a("option",{attrs:{value:"right"}}),a("option",{attrs:{value:"justify"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"ql-formats"},[a("button",{staticClass:"ql-image",attrs:{title:"插入图片"}}),a("button",{staticClass:"ql-link",attrs:{title:"超链接"}})])}],r=(a("f559"),a("9339")),o=a.n(r),s=a("b130"),l={name:"QuillEditor",props:{value:{default:""},placeholder:{default:"请输入内容"},disabled:{default:!1},theme:{default:"snow"},userInfo:{},upload_url:{default:window.API_HOST+"file/upload"}},data:function(){var t=Object(s.c)(8);return{userInfo_:null,id_editor:"editor-"+t,id_toolbar:"editor-toolbar-"+t,quill_editor:null,showUpload:!1,upload:{type:"upload",manual:""}}},watch:{disabled:function(){this.quill_editor&&(this.disabled?this.quill_editor.disable():this.quill_editor.enable())}},mounted:function(){var t=this;this.userInfo?this.userInfo_=this.userInfo:this.userInfo_=this.$store.state.user.userInfo,this.quill_editor=new o.a("#"+this.id_editor,{modules:{toolbar:"#"+this.id_toolbar},placeholder:this.placeholder,theme:this.theme}),this.quill_editor.on("editor-change",function(e){"text-change"===e&&t.$emit("change",arguments.length<=1?void 0:arguments[1])}),this.quill_editor.getModule("toolbar").addHandler("image",function(){if(!t.disabled){var e=t.quill_editor.getSelection();t.showUpload=!0,t.upload.manual="",t.uploadSuccess=function(a){t.quill_editor.insertEmbed(e.index,"image",a)}}}),this.setValue(this.value)},beforeDestroy:function(){this.quill_editor=null},methods:{onUploadClose:function(t){t.target===this.$refs.upload_wrapper&&(this.showUpload=!1)},handleUploadChange:function(t,e){if(0<e.length&&e[0].response){var a=e[0].response;if(!a.data)return this.$msgbox({message:a,title:"错误",type:"error"});if(!a.data.url)return this.showUpload=!1,this.$message({message:a.msg,type:"error"});this.uploadSuccess(a.data.url),this.showUpload=!1}},handleUploadError:function(t,e,a){try{var i=JSON.parse(t.message).message;if(i)return this.$message({message:i,type:"error"})}catch(t){this.$message({message:"文件上传失败，请检查文件大小和格式",type:"error"})}},handleUploadInputUrl:function(){this.upload.manual=this.upload.manual.trim(),this.upload.manual.startsWith("http://")||this.upload.manual.startsWith("https://")||this.upload.manual.startsWith("ftp://")?(this.uploadSuccess(this.upload.manual),this.showUpload=!1):this.$alert("请输入合法的图片URL地址")},getValue:function(){return JSON.stringify(this.quill_editor.getContents())},setValue:function(t){t&&"{"===t[0]?this.quill_editor.setContents(JSON.parse(t)):this.quill_editor.setText(t||"")}}},c=l,u=(a("0cae"),a("2877")),d=Object(u.a)(c,i,n,!1,null,null,null);e.a=d.exports},be65:function(t,e,a){},bf48:function(t,e,a){t.exports=a.p+"img/404_cloud.0f4bc32b.png"},c449:function(t,e,a){"use strict";var i=a("97b6"),n=a.n(i);n.a},caed:function(t,e,a){"use strict";var i,n,r,o,s,l,c,u,d,p,f,h,m,g,_,b,v,y,C,w,x;a.r(e),i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[i("hamburger",{staticClass:"hamburger-container",attrs:{toggleClick:t.toggleSideBar,isActive:t.sidebar.opened}}),i("level-bar"),i("nav-tabs"),0<t.log.length?i("error-log",{staticClass:"errLog-container",attrs:{logsList:t.log}}):t._e(),i("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click","show-timeout":0,"hide-timeout":0}},[i("div",{staticClass:"avatar-wrapper"},[i("img",{staticClass:"user-avatar",attrs:{src:a("eabc")}}),i("i",{staticClass:"el-icon-caret-bottom"})]),i("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[i("router-link",{staticClass:"inlineBlock",attrs:{to:"/admin/system/set"}},[i("el-dropdown-item",[t._v("网站设置")])],1),i("router-link",{staticClass:"inlineBlock",attrs:{to:"/admin/system/security"}},[i("el-dropdown-item",[t._v("修改密码")])],1),i("el-dropdown-item",{attrs:{divided:""}},[i("span",{staticStyle:{display:"block"},on:{click:t.logout}},[t._v("退出")])])],1)],1)],1)},n=[],r=a("cebc"),o=a("2f62"),s=a("057a"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTabs,expression:"showTabs"}],staticClass:"tabs-view-container"},t._l(t.visitedViews,function(e){return a("router-link",{key:e.path,staticClass:"tabs-view",attrs:{to:e.path}},[a("el-tag",{attrs:{closable:!0,type:t.isActive(e.path)?"primary":""},on:{close:function(a){return t.closeViewTabs(e,a)},click:function(a){return a.preventDefault(),t.$router.push(e.path)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])],1)}),1)},c=[],a("7f7f"),u={data:function(){return{availableWidth:999,takeCount:6,showTabs:!this.$store.state.app.isMobile}},computed:{visitedViews:function(){return this.$store.state.app.visitedViews.slice(-this.takeCount)}},watch:{$route:function(t,e){0===this.visitedViews.length&&this.addViewTabs(e),this.addViewTabs()}},methods:{closeViewTabs:function(t,e){if(0<this.visitedViews.length){var a=this.visitedViews.indexOf(t);0<a?this.$router.push(this.visitedViews[a-1]):this.$router.push(this.visitedViews[this.visitedViews.length-1])}this.$store.dispatch("delVisitedViews",t),e.preventDefault()},generateRoute:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return t.matched[t.matched.length-1].name?t.matched[t.matched.length-1]:(t.matched[0].path="/",t.matched[0])},addViewTabs:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.$store.dispatch("addVisitedViews",this.generateRoute(t||this.$route))},isActive:function(t){return t===this.$route.path},calcAvailableWidth:function(){var t=$(".navbar")[0],e=$(".hamburger-container")[0],a=$(".app-levelbar")[0],i=e.offsetWidth+a.offsetWidth+120;this.availableWidth=t.clientWidth-i,this.takeCount=parseInt(this.availableWidth/100)},resizeHandler:function(){this.calcAvailableWidth()}},mounted:function(){window.addEventListener("resize",this.resizeHandler);var t=document.getElementById("sidebar-container");t&&t.addEventListener("transitionend",this.resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandler);var t=document.getElementById("sidebar-container");t&&t.removeEventListener("transitionend",this.resizeHandler)}},a("b3db"),d=a("2877"),p=Object(d.a)(u,l,c,!1,null,null,null).exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("svg",{staticClass:"svg-icon hamburger",class:{"is-active":t.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:t.toggleClick}},[a("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692"}}),a("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693"}}),a("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694"}})])])},m={name:"hamburger",props:{isActive:{type:Boolean,default:!(h=[])},toggleClick:{type:Function,default:null}}},a("6983"),g=Object(d.a)(m,f,h,!1,null,"931cccf2",null).exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-badge",{staticStyle:{"line-height":"30px"},attrs:{"is-dot":!0},nativeOn:{click:function(e){t.dialogTableVisible=!0}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("svg",{staticClass:"bug-svg",attrs:{t:"1492682037685",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1863","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"}},[a("path",{attrs:{d:"M969.142857 548.571429q0 14.848-10.861714 25.709714t-25.709714 10.861714l-128 0q0 97.718857-38.290286 165.705143l118.857143 119.442286q10.861714 10.861714 10.861714 25.709714t-10.861714 25.709714q-10.276571 10.861714-25.709714 10.861714t-25.709714-10.861714l-113.152-112.566857q-2.852571 2.852571-8.557714 7.424t-23.990857 16.274286-37.156571 20.845714-46.848 16.566857-55.442286 7.424l0-512-73.142857 0 0 512q-29.147429 0-58.002286-7.716571t-49.700571-18.870857-37.705143-22.272-24.868571-18.578286l-8.557714-8.009143-104.557714 118.272q-11.446857 11.995429-27.428571 11.995429-13.714286 0-24.576-9.142857-10.861714-10.276571-11.702857-25.417143t8.850286-26.587429l115.419429-129.718857q-33.133714-65.133714-33.133714-156.562286l-128 0q-14.848 0-25.709714-10.861714t-10.861714-25.709714 10.861714-25.709714 25.709714-10.861714l128 0 0-168.009143-98.852571-98.852571q-10.861714-10.861714-10.861714-25.709714t10.861714-25.709714 25.709714-10.861714 25.709714 10.861714l98.852571 98.852571 482.304 0 98.852571-98.852571q10.861714-10.861714 25.709714-10.861714t25.709714 10.861714 10.861714 25.709714-10.861714 25.709714l-98.852571 98.852571 0 168.009143 128 0q14.848 0 25.709714 10.861714t10.861714 25.709714zM694.857143 219.428571l-365.714286 0q0-75.995429 53.430857-129.426286t129.426286-53.430857 129.426286 53.430857 53.430857 129.426286z","p-id":"1864"}})])])],1),a("el-dialog",{attrs:{title:"bug日志",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.logsList}},[a("el-table-column",{attrs:{label:"message"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("msg:"+t._s(e.row.err.message))]),a("div",[t._v("url: "+t._s(e.row.url))])]}}])}),a("el-table-column",{attrs:{label:"stack"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.err.stack)+"\n        ")]}}])})],1)],1)],1)},b=[],v={name:"errLog",props:{logsList:{type:Array}},data:function(){return{dialogTableVisible:!1}}},a("67ab"),y=Object(d.a)(v,_,b,!1,null,"cf8dd45a",null).exports,C=a("38e1"),w={components:{LevelBar:s.default,NavTabs:p,Hamburger:g,ErrorLog:y},data:function(){return{log:C.a.state.errLog}},computed:Object(r.a)({},Object(o.mapGetters)(["sidebar"])),methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){this.$store.dispatch("Logout").then(function(){location.reload()})}}},a("4856"),x=Object(d.a)(w,i,n,!1,null,"af8222da",null),e.default=x.exports},cb71:function(t,e,a){"use strict";var i=a("be65"),n=a.n(i);n.a},cef7:function(t,e,a){"use strict";var i=a("7556"),n=a.n(i);n.a},d9ce:function(t,e,a){"use strict";var i,n,r,o,s,l,c,u,d,p,f,h,m,g,_,b;a.r(e),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-wrapper",class:{hideSidebar:!t.sidebarOpen,showSidebar:t.sidebarOpen}},[a("sidebar",{ref:"side-bar",staticClass:"sidebar-container",attrs:{id:"sidebar-container"},on:{transitionend:t.resizeHandler}}),a("div",{staticClass:"main-container"},[a("div",{style:{width:t.mainWidth}},[a("navbar",{ref:"nav-bar"}),a("app-main")],1)]),a("lic")],1)},n=[],r=a("caed"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-menu",{attrs:{mode:"vertical","default-active":t.$route.path,collapse:t.isCollapse}},[a("item",{attrs:{routes:t.permission_routers}})],1)],1)},s=[],l=a("cebc"),c=a("2f62"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-wrapper"},[t._l(t.routes,function(e){return[!e.hidden&&e.noDropdown&&0<e.children.length?a("router-link",{attrs:{to:e.path+"/"+e.children[0].path}},[a("el-menu-item",{staticClass:"submenu-title-noDropdown",attrs:{index:e.path+"/"+e.children[0].path}},[e.icon?a("icon",{attrs:{name:e.icon}}):t._e(),a("span",{staticClass:"menu-title"},[t._v(t._s(e.children[0].name))])],1)],1):t._e(),e.noDropdown||e.hidden?t._e():a("el-submenu",{attrs:{index:e.name}},[a("template",{slot:"title"},[e.icon?a("icon",{attrs:{name:e.icon}}):t._e(),a("span",{staticClass:"menu-title"},[t._v(t._s(e.name))])],1),t._l(e.children,function(i){return i.hidden?t._e():[i.children&&0<i.children.length?a("item",{staticClass:"nest-menu",attrs:{routes:[i]}}):a("router-link",{attrs:{to:e.path+"/"+i.path}},[i.hide?t._e():a("el-menu-item",{attrs:{index:e.path+"/"+i.path}},[i.icon?a("icon",{attrs:{name:i.icon}}):t._e(),a("span",{staticClass:"menu-title"},[t._v(t._s(i.name))])],1)],1)]})],2)]})],2)},d=[],p={name:"item",props:{routes:{type:Array}}},a("cb71"),f=a("2877"),h={components:{item:Object(f.a)(p,u,d,!1,null,"640a5037",null).exports},computed:Object(l.a)({},Object(c.mapGetters)(["permission_routers","sidebar"]),{isCollapse:function(){return!this.sidebar.opened}})},a("0a49"),a("7c46"),m=Object(f.a)(h,o,s,!1,null,"f25ffdba",null).exports,a("057a"),g=a("9a0c"),_={name:"layout",components:{Lic:a("61ef").default,Navbar:r.default,Sidebar:m,AppMain:g.default},data:function(){return{mainWidth:"auto"}},computed:{sidebarOpen:function(){return this.$store.state.app.sidebar.opened}},watch:{sidebarOpen:function(){this.resizeHandler({type:"sidebarOpen",propertyName:"width"})}},mounted:function(){this.reCalcMainWidth(),window.addEventListener("resize",this.resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandler)},methods:{resizeHandler:function(t){!t||"resize"!==t.type&&"width"!==t.propertyName||(this.reCalcMainWidth(),window.bus.$emit("app-resize"))},reCalcMainWidth:function(){this.$store.state.app.isMobile&&document.body.clientWidth!==this.oldClientWidth&&(this.oldClientWidth=document.body.clientWidth,this.mainWidth=document.body.clientWidth-this.$refs["side-bar"].$el.clientWidth+"px")}}},a("cef7"),b=Object(f.a)(_,i,n,!1,null,"514fe16c",null),e.default=b.exports},eabc:function(t,e){t.exports="data:image/png;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNxaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NkYxNDI1RjU0MjIwNjgxMTgwODM4RjQyOEIzQ0M4MUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDY1QzI5QzczQUVDMTFFNEIzM0U4Q0I5MkNEOTVGMkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDY1QzI5QzYzQUVDMTFFNEIzM0U4Q0I5MkNEOTVGMkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJDRTc1MDAyMzEyMDY4MTE4MDgzOUE3MjIxRTIwQTNGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZGMTQyNUY1NDIyMDY4MTE4MDgzOEY0MjhCM0NDODFFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAeAB4AwERAAIRAQMRAf/EAJYAAQACAwEBAQAAAAAAAAAAAAAEBQMGBwIIAQEBAAIDAQAAAAAAAAAAAAAAAAMFAQIEBhAAAgIBAgMGAgUHDQEAAAAAAQIAAwQRBSESBjFBUWETB3GBsSIyFAiRodFSkqKzwUJicrLCI1M0ZHQVFjYRAQACAgEDBAIDAQEAAAAAAAABAhEDBCExQVESEwVhMnGBFCJC/9oADAMBAAIRAxEAPwDqM63AQEBAQEBAQEBAQEBAQEBAQEBAQECj3nrbpfZ3avOz61vXtor1ssB8CqBuX5yO2ysd0tNF7doa9Z7z9Jq3KtOY4/WWuvT96wGafPVN/iv+E/bvdTo3McIcpsV27BkIUHzYcyj5mbRurLS3EvHhtVF9F9S3UWLbU41SxCGUjxBHAyTLnmMMkyEBAQEBAQEBA8XXVUVPdc4rqrUtZYx0VVA1JJMwRGXGOt/dLO3K2zB2axsXbhqrXrqtt3nr2ovl2+PhOTZumekLTRxYr1t3c/JJOp7ZA7CAgXPTnVm9dP5ItwLz6ROtuK+pqcea+PmOM3pea9kWzTW8dXduk+rNu6k2771i/wCHdXouTjMdWrY/Sp7jO2l4tCp3aZpOJXc3REBAQEBAQEDlfvH1VYpr6exX0DAW55B7QeNdZ/tH5Tl338LDh6v/AFLUejfbvqDqpy+Iq0YFbctubdqEB71UDi7fD5kTivsiqzpSbOk434fNnWsDJ3bIss72rRK11+Dep9MgnkT6JfghEy/w9IbVOHvRWon6wuo5mA8QVdQfyCZjkfgnR+WZfw9YPJo29Wl/1hQoH5Oc/TH+j8HwflRb/wCw/UGFS9+1Zde5qg1NJX0biP6IJdW/aE3ryInu1tpnw0zpjfc7pjqBMkq6emxqzsZgVYpro6Mp7GHaPOdWu+Jy5N2r31w+i6Lqr6a76WD1WqHrcdhVhqCPiJ3qSYw9zIQEBAQEBA+ctw+9dSdZ3JUea7ccz0qSeOis/Imvkq6St2W6zK900xWIfUGz7Vh7TteNtuGnJjYtYrrHedO1j5seJ85WWnM5WMRiEyYZICAgfP8A78bZXjdW0ZlahRnYytYR32VsUJ/Z5Z2aJzVy7o6t09rNxfN6NxA55nxWfHJ8kOqD5IwEtdM5qouVXF5bbJXOQEBAQEBA4h7LbeMzr3HtYcww6rsltfHl9MH5NYJT75/5ek1R/wBO/wCXv2x4eQMbL3HFxslvs023Vo518FYgzjisz4dWYTUdXUOhDKw1VgdQQfAzVl6gIFfd1BsFGSMW7csWrKJ0FD31rYT4cpbWbe2fRjMOWfiGxwa9jyQOw5FbH4itl+gyfjT3Q7/DJ7Kk/wDlcryzrP4NUtuP+qj5v7x/DoEncZAQEBAQEDlf4fKA2+brkaca8ZKwf69gP9yUnI7PTae7ptntt0PazvdtNd1lhLWW2NY9jMeJJdmLEn4yD5beqb2Q97T0Js+zZS3bPdlYFQOr4dd7Pjv4hq7vVHHxXQ+Bidkz3ZikR2bHI2yo3zpzH3rlry8vLrxANHxMe30a7PNygFh+HPp5TatsNZrlWVe13QNVfIuzUkeLtY7ftMxM2+a3qx8dWne+O1YuD0htFOIhTGxcv0qkZmflV63bl5nLNoOXhx4SXRObSj3R0Y/ZT/5XK/51n8GqW3H/AFUfN/eP4dAk7jICAgICBmxKBdbyE6KBqfhOfk7vjrl08TR8t8T2UnQfQ+z9M7huT7ZlXX1ZS1ryXBdU9Mt2OvLza836spr7JtHV6Our29U73Dweqs3px6embmp3H1ULcjip2qGvMqWErynXQ9o4TGuYiepeJx0T+ksbe8bpzBo3y3191SsjJs15tTzEqCw+0QugJ7zNbzGenZmucdVqzounMwHMdF1Omp8BNWz1A0LoDafcXD3zdLepss34FgIx1NosVrOcEPUoJ9NOXX6vDu4SbZNZiMIqRbPVb+4HS+J1JslWFlZD41VWQl/qVqHYlVZNNCQP580139s5b2p7ujDsPSe09ObPXjbW9llFjmyyy0gu1jAAsdAoHBNNAJZ8Lf7s1lT/AGXH9uLf0mywVRAQEBAQJW2sq5HE6cykD46gzi51ZnX08S7/AK28Rs6+Yfu1Y19GRaLEIGmgbTgePcZTvRWlaTDUgQ9xOn3U/wC4r/PqIITICBD3Wux8TlRSzcw4AamGao1iGnb6aX4WalivlxP8ssPr6z7pnxhV/a3j2xHnKLLZRkBAQEBATAnbda7XFXYn6vAE698r+driKZiPK1+u22m8xMzPRYyqXRAwtiUNaLGUllPMurNoD48uukDNAQIu42MlK8rFWLcCDoeydnBpFrzmOmFf9jsmtIxOJyq2ZmOrEk+JlzERHSFDa0zOZfkywQEBAQEBA91WNXYrr2qZHspF6zEpNWyaWi0eFzValqB1OoMoNmuaTiXp9W2L190MeZTkW1aUWmqwd/cfjNEisO270T/q/wB9/wBEyzlMwcTNpYtkZBtGnBO0fMnjMCaSANTwA7TMxGWszjrKpzMj1reH2F4L+mXfF0fHXr3l53m8n5b9P1hHnU4yAgICAgICAgZcfJsobVeKn7S+Mg36K7I693Rx+TbVOY7ei1oyKrl1Q8e9e8Sl26ba5xL0GjkV2RmrLIk7xZYla8znQTemubTiGmzZWkZtOIVmVmtd9Vfq1+HefjLfj8WKdZ62UPK5s7OkdKo07HCQEBAQEBAQEBAQPNhsVfUr1BQglh3a8Jxc6uaf2s/qrY2THrB/2mfpp6v5l/RKfD0Pth+JbbYTZaxYk8oJ8uOgln9fXvKk+3t+sfy9yyUxAQEBAQEBAQEASANTwA7TA13cuorC7VYf1UHA3dpPwktdfqitf0WfQ+Xh5Fe67fm5S05OclRxr720XmqcsULHs5tROfmaZvTEOz6/fGvZmV3/AOR308UpR6/8xba+XTx+1KX/ADX9Ho45ur1VfWRwsHYMXavvFV+5HKOTcKWDipfTKcpYd54GW3A02pE5UX2fJrstGPDWMLe87GIBc2196OdfyHtE7ppEqyLTDZsDcKM2rnqOhH20PaDIbVwlicpMwyQEBAQEBAQKXqPcDVUMSs/XsGthHcvh85Jrr5R3nw1qTIyAgICBIwM2zDyVuTiBwdfFe8TFozDMThulVqW1LbWdUcAqfIzmmEz3DJAQP//Z"},f1d7:function(t,e,a){},f432:function(t,e,a){},f65e:function(t,e,a){},fca0:function(t,e,a){"use strict";var i=a("8e5f"),n=a.n(i);n.a},ffb9:function(t,e,a){"use strict";var i=a("6e02"),n=a.n(i);n.a}});