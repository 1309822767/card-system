(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-02391ad8"],{"017e":function(t,r,e){},"0394":function(t,r,e){"use strict";var n=e("017e"),i=e.n(n);i.a},1045:function(t,r,e){"use strict";function n(t){return Object(u.a)({url:"order/stat",method:"post",data:t})}function i(t){return Object(u.a)({url:"order",method:"post",data:t})}function o(t,r){return Object(u.a)({url:"order/remark",method:"post",data:{id:t,remark:r}})}function d(t){return Object(u.a)({url:"order/ship",method:"post",data:{id:t}})}function a(t){return Object(u.a)({url:"order/notify",method:"post",data:{id:t}})}function s(t,r){return Object(u.a)({url:"order/freeze",method:"post",data:{ids:t,reason:r}})}function c(t){return Object(u.a)({url:"order/unfreeze",method:"post",data:{ids:t}})}function f(t,r){return Object(u.a)({url:"order/set_paid",method:"post",data:{id:t,trade_no:r}})}var u,l;e.d(r,"a",function(){return l}),e.d(r,"h",function(){return n}),e.d(r,"d",function(){return i}),e.d(r,"b",function(){return o}),e.d(r,"g",function(){return d}),e.d(r,"e",function(){return a}),e.d(r,"c",function(){return s}),e.d(r,"i",function(){return c}),e.d(r,"f",function(){return f}),u=e("41bb"),l={UN_PAY:{id:0,name:"未支付",type:"info"},PAID:{id:1,name:"待发货",type:"primary"},SUCCESS:{id:2,name:"已成功",type:"success"},FROZEN:{id:3,name:"已冻结",type:"danger"},REFUND:{id:4,name:"已退款",type:"warning"},get:function(t){for(var r in this)if(this.hasOwnProperty(r)&&this[r].id===t)return this[r];return{id:t,type:"danger",name:"未知状态"}}}},"126b":function(t,r,e){"use strict";var n,i,o,d,a,s;e.r(r),n=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-info-container",attrs:{title:t.title,visible:t.orderVisible},on:{"update:visible":function(r){t.orderVisible=r}}},[t.orderInfo?e("div",{staticClass:"order-info-table"},[e("table",{attrs:{border:"0",cellspacing:"0"}},[e("tbody",[e("tr",[e("td",{staticStyle:{"white-space":"nowrap","text-align":"right",width:"80px"}},[t._v("　订单号")]),e("td",{staticStyle:{"white-space":"nowrap","min-width":"160px"}},[t._v(t._s(t.orderInfo.order_no))]),e("td",{staticStyle:{"white-space":"nowrap","text-align":"right",width:"80px"}},[t._v("付款方式")]),e("td",{staticStyle:{"white-space":"nowrap","min-width":"90px"}},[t._v("\n          "+t._s(t.orderInfo.pay?t.orderInfo.pay.name:"未知#"+t.orderInfo.pay_id)+"\n          "),t.orderInfo.status>t.ORDER_STATUS.UN_PAY.id?e("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#409EFF"},attrs:{onclick:"bus.$emit('"+t.from+":show:pay')"}},[t._v("查看")]):t._e()])]),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[t._v("付款时间")]),e("td",[t._v(t._s(t.orderInfo.paid_at))]),e("td",{staticStyle:{"text-align":"right"}},[t._v("提交金额")]),e("td",[t._v(t._s(t._f("moneyFilter")(t.orderInfo.paid))+"元")])]),e("tr",[t.isApiOrder?t._e():e("td",{staticStyle:{"text-align":"right"}},[t._v("联系方式")]),t.isApiOrder?t._e():e("td",{staticStyle:{"max-width":"280px","word-wrap":"break-word","line-height":"1"}},[t._v(t._s(t.orderInfo.email))]),t.isApiOrder?e("td",{staticStyle:{"text-align":"right"}},[t._v("通知状态")]):t._e(),t.isApiOrder?e("td",{staticStyle:{"max-width":"280px","word-wrap":"break-word","line-height":"1"}},[e("span",{class:"el-tag el-tag--"+(t.isNotified(t.orderInfo)?"success":"warning")},[t._v("\n            "+t._s(t.isNotified(t.orderInfo)?"已通知":"通知失败")+"\n          ")]),t._v("  \n          "),t.isNotified(t.orderInfo)?t._e():e("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#409EFF"},attrs:{onclick:"bus.$emit('"+t.from+":send:notify')"}},[t._v("重发通知")])]):t._e(),e("td",{staticStyle:{"text-align":"right"}},[t._v("商户分成")]),e("td",[t._v(t._s(t._f("moneyFilter")(t.orderInfo.income))+"元")])]),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[t._v("订单状态")]),e("td",[e("span",{class:"el-tag el-tag--"+t.ORDER_STATUS.get(t.orderInfo.status).type},[t._v("\n            "+t._s(t.ORDER_STATUS.get(t.orderInfo.status).name)+"\n          ")]),t._v(" \n          "),t.isApiOrder?t._e():e("div",{staticStyle:{display:"inline"}},[e("span",{class:t.isShipped(t.orderInfo)?"green-text":"amber-text"},[t._v("\n              "+t._s(t.isShipped(t.orderInfo)?"(已发货)":"(未发货)")+"\n            ")]),t.isShipped(t.orderInfo)||t.orderInfo.status===t.ORDER_STATUS.UN_PAY.id?t._e():e("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#409EFF"},attrs:{onclick:"bus.$emit('"+t.from+":send:card')"}},[t._v("发货")]),t.isShipped(t.orderInfo)?e("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#409EFF"},attrs:{onclick:"bus.$emit('"+t.from+":show:card')"}},[t._v("查看")]):t._e()])]),e("td",{staticStyle:{"text-align":"right"}},[t._v("购买IP")]),e("td",[t._v(t._s(t.orderInfo.ip))])]),e("tr",[e("td",{staticStyle:{"text-align":"right"}},[t._v("商户备注")]),e("td",{staticStyle:{"max-width":"280px","word-wrap":"break-word","line-height":"1.4"}},[t._v(t._s(t.orderInfo.remark))]),e("td",{staticStyle:{"text-align":"right"}},[t._v("详细信息")]),e("td",{staticStyle:{"max-width":"280px","word-wrap":"break-word","line-height":"1"}},[t.orderInfo.status===t.ORDER_STATUS.FROZEN.id?e("span",[t._v("\n            冻结原因: "+t._s(t.orderInfo.frozen_reason||"无")+"\n          ")]):t._e()])])])])]):t._e()])},i=[],e("7f7f"),o=e("1045"),d={props:{from:{default:"order"}},data:function(){return{loading:!1,ORDER_STATUS:o.a,orderVisible:!1,orderInfo:null,cardInfo:null,isApiOrder:!1,title:"订单信息"}},mounted:function(){var t=this;this._on_show_card=function(){if(t.orderInfo){var r=t.orderInfo.card_orders.map(function(t){return t.card?t.card.card:"未知卡密#"+t.card_id}).join("<br>");t.$msgbox({title:"订单卡密信息",message:r,dangerouslyUseHTMLString:!0})}},window.bus.$on(this.from+":show:card",this._on_show_card),this._on_show_pay=function(){var r,e;t.orderInfo&&(e="支付方式: "+(r=t.orderInfo.pay?t.orderInfo.pay.name:"支付方式#"+t.orderInfo.pay_id)+"<br>支付时间: "+t.orderInfo.paid_at+"<br>"+r+"单号(流水号): "+t.orderInfo.pay_trade_no,t.$msgbox({title:"支付信息",message:e,dangerouslyUseHTMLString:!0}))},window.bus.$on(this.from+":show:pay",this._on_show_pay),this._on_send_card=function(){t.orderInfo&&t.$confirm("当前订单状态为<"+o.a.get(t.orderInfo.status).name+">, 是否确认发货?").then(function(){t.loading=!0,Object(o.g)(t.orderInfo.id).then(function(r){t.loading=!1,Object.assign(t.orderInfo,r.data),t.$notify({title:"发货成功",message:"当前订单已发货成功",type:"success",duration:3e3})}).catch(function(){t.loading=!1})})},window.bus.$on(this.from+":send:card",this._on_send_card),this._on_send_notify=function(){t.orderInfo&&(t.loading=!0,Object(o.e)(t.orderInfo.id).then(function(r){t.loading=!1,Object.assign(t.orderInfo.api_info,r.data.api_info),t.$msgbox({title:"重发结果",message:r.data.notify_html,dangerouslyUseHTMLString:!1})}).catch(function(){t.loading=!1}))},window.bus.$on(this.from+":send:notify",this._on_send_notify)},beforeDestroy:function(){window.bus.$off(this.from+":show:card",this._on_show_card),window.bus.$off(this.from+":show:pay",this._on_show_pay),window.bus.$off(this.from+":send:card",this._on_send_card),window.bus.$off(this.from+":send:notify",this._on_send_notify)},methods:{showOrder:function(t){this.orderInfo=t,this.isApiOrder=-1001===t.product_id,this.title=this.isApiOrder?"订单信息(API订单)":"订单信息(卡密订单)",this.orderVisible=!0},isShipped:function(t){return t.status===o.a.SUCCESS.id||t.card_orders&&t.card_orders.length},isNotified:function(t){return t.api_info&&"success"===t.api_info.notify_ret}}},e("0394"),a=e("2877"),s=Object(a.a)(d,n,i,!1,null,null,null),r.default=s.exports}}]);