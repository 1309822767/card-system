(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-39a305e2"],{"2da5":function(e,t,n){"use strict";function o(e){return Object(f.a)({url:"pay",method:"post",data:e})}function a(e){return Object(f.a)({url:"pay/edit",method:"post",data:e})}function r(e,t){return Object(f.a)({url:"pay/enable",method:"post",data:{ids:e,enabled:t}})}function i(e,t){return Object(f.a)({url:"pay/sort",method:"post",data:{id:e,sort:t}})}function s(e,t){return Object(f.a)({url:"/pay/fee_system",method:"post",data:{id:e,fee_system:t}})}function l(e,t){return Object(f.a)({url:"/pay/fee",method:"post",data:{id:e,fee:t}})}function c(e,t){return Object(f.a)({url:"/pay/comment",method:"post",data:{id:e,comment:t}})}function u(e){return Object(f.a)({url:"pay/delete",method:"post",data:{id:e}})}var f,m;n.d(t,"a",function(){return m}),n.d(t,"h",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"i",function(){return i}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return u}),f=n("41bb"),m={DISABLED:{id:0,name:"禁用",type:"info"},PC:{id:1,name:"电脑端",type:"primary"},MOBILE:{id:2,name:"手机端",type:"primary"},PC_MOBILE:{id:3,name:"电脑+手机",type:"primary"},getEnabled:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t].id===e)return this[t];return{id:e,name:"未知状态",type:"error"}}}},"2e00":function(e,t,n){},"31a9":function(e,t,n){"use strict";var o,a,r,i,s;n.r(t),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.actLabel,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"图片",prop:"img"}},[n("el-input",{attrs:{type:"text",placeholder:"图片"},model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}})],1),n("el-form-item",{attrs:{label:"方式",prop:"way"}},[n("el-input",{attrs:{type:"text",placeholder:"支付方式代码"},model:{value:e.form.way,callback:function(t){e.$set(e.form,"way",t)},expression:"form.way"}})],1),n("el-form-item",{attrs:{label:"费率",prop:"fee_system"}},[n("el-input",{attrs:{type:"text",placeholder:"支付通道费率"},model:{value:e.form.fee_system,callback:function(t){e.$set(e.form,"fee_system",t)},expression:"form.fee_system"}})],1),n("el-form-item",{attrs:{label:"启用"}},[n("el-checkbox-group",{model:{value:e.enableIn,callback:function(t){e.enableIn=t},expression:"enableIn"}},[n("el-checkbox",{attrs:{label:e.PAYWAY_ENABLED.PC.id}},[e._v("电脑端")]),n("el-checkbox",{attrs:{label:e.PAYWAY_ENABLED.MOBILE.id}},[e._v("手机端")])],1)],1),n("el-form-item",{attrs:{label:"驱动",prop:"driver"}},[n("el-input",{attrs:{type:"text",placeholder:"支付驱动代码"},model:{value:e.form.driver,callback:function(t){e.$set(e.form,"driver",t)},expression:"form.driver"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"comment"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:100,placeholder:"请输入备注"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),n("div",[n("el-form-item",{attrs:{label:"配置"}},[n("el-radio-group",{on:{change:e.syncConfig},model:{value:e.showJson,callback:function(t){e.showJson=t},expression:"showJson"}},[n("el-radio",{attrs:{label:!0}},[e._v("JSON")]),n("el-radio",{attrs:{label:!1}},[e._v("Parse")])],1)],1),e.showJson?n("div",[n("el-form-item",[n("el-input",{attrs:{type:"textarea",autosize:{minRows:7,maxRows:20},placeholder:"请输入JSON格式配置"},model:{value:e.form.config,callback:function(t){e.$set(e.form,"config",t)},expression:"form.config"}})],1)],1):n("div",e._l(this.configForm,function(t){return n("el-form-item",{key:t.name,attrs:{label:t.name}},[n("el-input",{attrs:{type:"text"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)}),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){return e.handleClose(!1)}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.handleSubmit(t)}}},[e._v(e._s(e.actLabel))])],1)],1)},a=[],r=n("6430").a,n("ebc1"),i=n("2877"),s=Object(i.a)(r,o,a,!1,null,"0d92fa32",null),t.default=s.exports},6430:function(e,t,n){"use strict";var o=n("7f7f"),a=n.n(o),r=n("ac6a"),i=n.n(r),s=n("2da5");t.a={props:{act:{type:String,default:"add"},info:{}},data:function(){var e="",t={act:this.act,id:-1,name:"",way:"",driver:"",comment:"",config:"",img:"",fee_system:""},n=[];return"edit"===this.act?(e="编辑",Object.assign(t,this.info),this.info.enabled&s.a.PC.id&&n.push(s.a.PC.id),this.info.enabled&s.a.MOBILE.id&&n.push(s.a.MOBILE.id)):e="添加",{loading:!1,visible:!0,actLabel:e,PAYWAY_ENABLED:s.a,formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],img:[{required:!0,message:"请输入支付方式图片",trigger:"blur"}],way:[{required:!0,message:"请输入支付方式代码",trigger:"blur"}],fee_system:[{required:!0,message:"请输入支付通道费率",trigger:"blur"}]},form:t,enableIn:n,showJson:!1,configForm:[]}},watch:{visible:function(e){e||this.$emit("close",!1)}},mounted:function(){"add"===this.act?this.showJson=!0:"edit"===this.act?(this.showJson=!1,this.syncConfig(this.showJson)):(this.$alert("error act"),this.handleClose(!1)),0===this.configForm.length&&(this.showJson=!0)},methods:{syncConfig:function e(t){var n,o,a,r;if(t)n={},this.configForm.forEach(function(e){return n[e.name]=e.value}),this.form.config=JSON.stringify(n,null,2);else try{for(r in o=[],a=eval("(function(){return ".concat(this.form.config,"})()")),a)a.hasOwnProperty(r)&&o.push({name:r,value:a[r]});this.configForm=o}catch(e){this.$alert(e,"配置出错"),this.showJson=!0}},handleSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&(!(e.loading=!0)===e.showJson&&e.syncConfig(!0),e.form.enabled=0,e.enableIn.forEach(function(t){return e.form.enabled|=t}),Object(s.c)(e.form).then(function(){e.loading=!1,e.handleClose(!0)}).catch(function(){e.loading=!1}))})},handleClose:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",e)}}}},ebc1:function(e,t,n){"use strict";var o=n("2e00"),a=n.n(o);a.a}}]);