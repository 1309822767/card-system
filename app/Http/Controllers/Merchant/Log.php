<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp6a5e99) { $sp9f2e5e = $sp6a5e99->post('user_id'); $sp224baf = $sp6a5e99->post('action', \App\Log::ACTION_LOGIN); $sp7a245d = \App\Log::where('action', $sp224baf); $sp7a245d->where('user_id', Auth::id()); $spa5a0aa = $sp6a5e99->post('start_at'); if (strlen($spa5a0aa)) { $sp7a245d->where('created_at', '>=', $spa5a0aa . ' 00:00:00'); } $spe7781b = $sp6a5e99->post('end_at'); if (strlen($spe7781b)) { $sp7a245d->where('created_at', '<=', $spe7781b . ' 23:59:59'); } $spcbdc33 = $sp6a5e99->post('current_page', 1); $spb4a524 = $sp6a5e99->post('per_page', 20); $sp00e9d2 = $sp7a245d->orderBy('created_at', 'DESC')->paginate($spb4a524, array('*'), 'page', $spcbdc33); return Response::success($sp00e9d2); } }