<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spf631e6) { $sp7652a3 = $spf631e6->post('user_id'); $sp8aac6b = $spf631e6->post('action', \App\Log::ACTION_LOGIN); $spe8afa9 = \App\Log::where('action', $sp8aac6b); if ($sp7652a3 && self::isAdmin()) { $spe8afa9->where('user_id', $sp7652a3); } else { $spe8afa9->where('user_id', Auth::id()); } $spd43b07 = $spf631e6->post('start_at'); if (strlen($spd43b07)) { $spe8afa9->where('created_at', '>=', $spd43b07 . ' 00:00:00'); } $sp4d365e = $spf631e6->post('end_at'); if (strlen($sp4d365e)) { $spe8afa9->where('created_at', '<=', $sp4d365e . ' 23:59:59'); } $sp079e8f = $spf631e6->post('current_page', 1); $sp08a323 = $spf631e6->post('per_page', 20); $sp3562f5 = $spe8afa9->orderBy('created_at', 'DESC')->paginate($sp08a323, array('*'), 'page', $sp079e8f); return Response::success($sp3562f5); } }