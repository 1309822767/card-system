<?php
namespace App\Http\Controllers; use App\System; use Illuminate\Http\Request; use Illuminate\Support\Facades\Log; use Illuminate\Support\Facades\Mail; class DevController extends Controller { private function check_readable_r($sp4a7c86) { if (is_dir($sp4a7c86)) { if (is_readable($sp4a7c86)) { $sp8c929e = scandir($sp4a7c86); foreach ($sp8c929e as $sp4f3bcf) { if ($sp4f3bcf != '.' && $sp4f3bcf != '..') { if (!self::check_readable_r($sp4a7c86 . '/' . $sp4f3bcf)) { return false; } else { continue; } } } echo $sp4a7c86 . '   ...... <span style="color: green">R</span><br>'; return true; } else { echo $sp4a7c86 . '   ...... <span style="color: red">R</span><br>'; return false; } } else { if (file_exists($sp4a7c86)) { return is_readable($sp4a7c86); } } echo $sp4a7c86 . '   ...... 文件不存在<br>'; return false; } private function check_writable_r($sp4a7c86) { if (is_dir($sp4a7c86)) { if (is_writable($sp4a7c86)) { $sp8c929e = scandir($sp4a7c86); foreach ($sp8c929e as $sp4f3bcf) { if ($sp4f3bcf != '.' && $sp4f3bcf != '..') { if (!self::check_writable_r($sp4a7c86 . '/' . $sp4f3bcf)) { return false; } else { continue; } } } echo $sp4a7c86 . '   ...... <span style="color: green">W</span><br>'; return true; } else { echo $sp4a7c86 . '   ...... <span style="color: red">W</span><br>'; return false; } } else { if (file_exists($sp4a7c86)) { return is_writable($sp4a7c86); } } echo $sp4a7c86 . '   ...... 文件不存在<br>'; return false; } private function checkPathPermission($sp136037) { self::check_readable_r($sp136037); self::check_writable_r($sp136037); } public function install() { $spfc05c8 = array(); @ob_start(); self::checkPathPermission(base_path('storage')); self::checkPathPermission(base_path('bootstrap/cache')); $spfc05c8['permission'] = @ob_get_clean(); return view('install', array('var' => $spfc05c8)); } public function test(Request $spf631e6) { } public function test_email() { if (!config('app.debug')) { die; } try { Mail::to('19060@qq.com')->Queue(new \App\Mail\AuthRegister()); return 'success'; } catch (\Exception $sp019ea9) { return 'error-' . $sp019ea9; } } public function test_alipay_fund_trans_config_dev() { if (!config('app.debug')) { die; } $spc6bf93 = System::_get('alipay_fund_trans_config_dev'); $spc6bf93 = json_decode($spc6bf93, true); $spc6bf93['gateway'] = 'https://openapi.alipaydev.com/gateway.do'; $spc6bdd0 = date('YmdHis') . random_int(1000, 9999); var_dump($spc6bdd0); $sp567373 = (new \App\Library\AlipayFundTrans\Api())->trans($spc6bf93, $spc6bdd0, 'fygtat8407@sandbox.com', '沙箱环境', '1', '转账备注'); if ($sp567373 === true) { echo '转账成功'; } else { echo '转账失败:' . $sp567373; } echo '<br>
'; $sp567373 = (new \App\Library\AlipayFundTrans\Api())->verify($spc6bf93, $spc6bdd0); if ($sp567373 === true) { echo '验证成功'; } else { echo '验证失败:' . $sp567373; } } }