<?php
namespace App\Library; class Helper { public static function getMysqlDate($sp70e640 = 0) { return date('Y-m-d', time() + $sp70e640 * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $spd2e28b = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $spd2e28b = $_SERVER['HTTP_CLIENT_IP']; } else { $spd2e28b = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $spd2e28b = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $spd2e28b = getenv('HTTP_CLIENT_IP'); } else { $spd2e28b = getenv('REMOTE_ADDR'); } } } if (strpos($spd2e28b, ',') !== FALSE) { $sp5bff46 = explode(',', $spd2e28b); return $sp5bff46[0]; } return $spd2e28b; } public static function getClientIP() { if (isset($_SERVER)) { $spd2e28b = $_SERVER['REMOTE_ADDR']; } else { $spd2e28b = getenv('REMOTE_ADDR'); } if (strpos($spd2e28b, ',') !== FALSE) { $sp5bff46 = explode(',', $spd2e28b); return $sp5bff46[0]; } return $spd2e28b; } public static function filterWords($sp4e169a, $spe775f1) { if (!$sp4e169a) { return false; } if (!is_array($spe775f1)) { $spe775f1 = explode('|', $spe775f1); } foreach ($spe775f1 as $spbef259) { if ($spbef259 && strpos($sp4e169a, $spbef259) !== FALSE) { return $spbef259; } } return false; } public static function is_idcard($sp8b6729) { if (strlen($sp8b6729) == 18) { return self::idcard_checksum18($sp8b6729); } elseif (strlen($sp8b6729) == 15) { $sp8b6729 = self::idcard_15to18($sp8b6729); return self::idcard_checksum18($sp8b6729); } else { return false; } } private static function idcard_verify_number($sp0ea233) { if (strlen($sp0ea233) != 17) { return false; } $spcc35a5 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $sp00c14a = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $spc51ea8 = 0; for ($sp218d20 = 0; $sp218d20 < strlen($sp0ea233); $sp218d20++) { $spc51ea8 += substr($sp0ea233, $sp218d20, 1) * $spcc35a5[$sp218d20]; } $sp4c5245 = $spc51ea8 % 11; $sp421760 = $sp00c14a[$sp4c5245]; return $sp421760; } private static function idcard_15to18($sp6168e1) { if (strlen($sp6168e1) != 15) { return false; } else { if (array_search(substr($sp6168e1, 12, 3), array('996', '997', '998', '999')) !== false) { $sp6168e1 = substr($sp6168e1, 0, 6) . '18' . substr($sp6168e1, 6, 9); } else { $sp6168e1 = substr($sp6168e1, 0, 6) . '19' . substr($sp6168e1, 6, 9); } } $sp6168e1 = $sp6168e1 . self::idcard_verify_number($sp6168e1); return $sp6168e1; } private static function idcard_checksum18($sp6168e1) { if (strlen($sp6168e1) != 18) { return false; } $sp0ea233 = substr($sp6168e1, 0, 17); if (self::idcard_verify_number($sp0ea233) != strtoupper(substr($sp6168e1, 17, 1))) { return false; } else { return true; } } public static function strBetween($sp4e169a, $sp7bbfcf, $sp6c774d) { $sp470cc8 = stripos($sp4e169a, $sp7bbfcf); if ($sp470cc8 === false) { return ''; } $spa2e1ee = stripos($sp4e169a, $sp6c774d, $sp470cc8 + strlen($sp7bbfcf)); if ($spa2e1ee === false || $sp470cc8 >= $spa2e1ee) { return ''; } $sp60db54 = strlen($sp7bbfcf); $sp567373 = substr($sp4e169a, $sp470cc8 + $sp60db54, $spa2e1ee - $sp470cc8 - $sp60db54); return $sp567373; } public static function formatUrl($sp81923e) { if (!starts_with($sp81923e, 'http://') && !starts_with($sp81923e, 'https://')) { $sp81923e = 'http://' . $sp81923e; } while (ends_with($sp81923e, '/')) { $sp81923e = substr($sp81923e, 0, -1); } return $sp81923e; } }