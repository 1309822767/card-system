<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp59c732, $sp7c7a93) { $sp59c732 = $sp59c732 . '?' . http_build_query($sp7c7a93); return self::http($sp59c732, 'GET'); } public static function post($sp59c732, $sp7c7a93, $spb9b8d0 = array()) { $sp43c518 = array(); if (!$spb9b8d0) { $sp9a31c1 = http_build_query($sp7c7a93); } else { $sp9a31c1 = self::buildHttpQueryMulti($sp7c7a93, $spb9b8d0); $sp43c518[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp59c732, 'POST', $sp9a31c1, $sp43c518); } private static function http($sp59c732, $sp48df7c, $sp054294 = NULL, $sp43c518 = array()) { $sp672bfb = curl_init(); curl_setopt($sp672bfb, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp672bfb, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp672bfb, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp672bfb, CURLOPT_TIMEOUT, 30); curl_setopt($sp672bfb, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp672bfb, CURLOPT_ENCODING, ''); curl_setopt($sp672bfb, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp672bfb, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp672bfb, CURLOPT_HEADER, FALSE); switch ($sp48df7c) { case 'POST': curl_setopt($sp672bfb, CURLOPT_POST, TRUE); if (!empty($sp054294)) { curl_setopt($sp672bfb, CURLOPT_POSTFIELDS, $sp054294); } break; } curl_setopt($sp672bfb, CURLOPT_URL, $sp59c732); curl_setopt($sp672bfb, CURLOPT_HTTPHEADER, $sp43c518); curl_setopt($sp672bfb, CURLINFO_HEADER_OUT, TRUE); $sp31c557 = curl_exec($sp672bfb); $spfe1cc9 = curl_getinfo($sp672bfb, CURLINFO_HTTP_CODE); $sp92372b = curl_getinfo($sp672bfb); curl_close($sp672bfb); return $sp31c557; } private static function buildHttpQueryMulti($sp7c7a93, $spb9b8d0) { if (!$sp7c7a93) { return ''; } $spccb62f = array(); self::$boundary = $spc4bae8 = uniqid('------------------'); $sp129a19 = '--' . $spc4bae8; $sp1b98ef = $sp129a19 . '--'; $sp88b77f = ''; foreach ($sp7c7a93 as $sp1e4b49 => $sp39a65f) { $sp88b77f .= $sp129a19 . '
'; $sp88b77f .= 'content-disposition: form-data; name="' . $sp1e4b49 . '"

'; $sp88b77f .= $sp39a65f . '
'; } foreach ($spb9b8d0 as $sp1e4b49 => $sp39a65f) { if (!$sp39a65f) { continue; } if (is_array($sp39a65f)) { $sp59c732 = $sp39a65f['url']; if (isset($sp39a65f['name'])) { $sp986884 = $sp39a65f['name']; } else { $sp820d65 = explode('?', basename($sp39a65f['url'])); $sp986884 = $sp820d65[0]; } $spd83f8f = isset($sp39a65f['field']) ? $sp39a65f['field'] : $sp1e4b49; } else { $sp59c732 = $sp39a65f; $sp820d65 = explode('?', basename($sp59c732)); $sp986884 = $sp820d65[0]; $spd83f8f = $sp1e4b49; } $spe0838b = file_get_contents($sp59c732); $sp88b77f .= $sp129a19 . '
'; $sp88b77f .= 'Content-Disposition: form-data; name="' . $spd83f8f . '"; filename="' . $sp986884 . '"' . '
'; $sp88b77f .= 'Content-Type: image/unknown

'; $sp88b77f .= $spe0838b . '
'; } $sp88b77f .= $sp1b98ef; return $sp88b77f; } }