<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp81923e, $sp342eea) { $sp81923e = $sp81923e . '?' . http_build_query($sp342eea); return self::http($sp81923e, 'GET'); } public static function post($sp81923e, $sp342eea, $sp35ba91 = array()) { $sp79f0c2 = array(); if (!$sp35ba91) { $sp66faf9 = http_build_query($sp342eea); } else { $sp66faf9 = self::buildHttpQueryMulti($sp342eea, $sp35ba91); $sp79f0c2[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp81923e, 'POST', $sp66faf9, $sp79f0c2); } private static function http($sp81923e, $spb769a1, $spa40ebd = NULL, $sp79f0c2 = array()) { $sp03b6fe = curl_init(); curl_setopt($sp03b6fe, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp03b6fe, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp03b6fe, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp03b6fe, CURLOPT_TIMEOUT, 30); curl_setopt($sp03b6fe, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp03b6fe, CURLOPT_ENCODING, ''); curl_setopt($sp03b6fe, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp03b6fe, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp03b6fe, CURLOPT_HEADER, FALSE); switch ($spb769a1) { case 'POST': curl_setopt($sp03b6fe, CURLOPT_POST, TRUE); if (!empty($spa40ebd)) { curl_setopt($sp03b6fe, CURLOPT_POSTFIELDS, $spa40ebd); } break; } curl_setopt($sp03b6fe, CURLOPT_URL, $sp81923e); curl_setopt($sp03b6fe, CURLOPT_HTTPHEADER, $sp79f0c2); curl_setopt($sp03b6fe, CURLINFO_HEADER_OUT, TRUE); $spd6e0e5 = curl_exec($sp03b6fe); $spb47e7f = curl_getinfo($sp03b6fe, CURLINFO_HTTP_CODE); $sp468ed3 = curl_getinfo($sp03b6fe); curl_close($sp03b6fe); return $spd6e0e5; } private static function buildHttpQueryMulti($sp342eea, $sp35ba91) { if (!$sp342eea) { return ''; } $sp4b79cc = array(); self::$boundary = $sp93b6ba = uniqid('------------------'); $sp395709 = '--' . $sp93b6ba; $sp8278ff = $sp395709 . '--'; $spd45dec = ''; foreach ($sp342eea as $spc37b44 => $sp12919e) { $spd45dec .= $sp395709 . '
'; $spd45dec .= 'content-disposition: form-data; name="' . $spc37b44 . '"

'; $spd45dec .= $sp12919e . '
'; } foreach ($sp35ba91 as $spc37b44 => $sp12919e) { if (!$sp12919e) { continue; } if (is_array($sp12919e)) { $sp81923e = $sp12919e['url']; if (isset($sp12919e['name'])) { $sp61be63 = $sp12919e['name']; } else { $sp6d466f = explode('?', basename($sp12919e['url'])); $sp61be63 = $sp6d466f[0]; } $sp4172b4 = isset($sp12919e['field']) ? $sp12919e['field'] : $spc37b44; } else { $sp81923e = $sp12919e; $sp6d466f = explode('?', basename($sp81923e)); $sp61be63 = $sp6d466f[0]; $sp4172b4 = $spc37b44; } $sp3e892f = file_get_contents($sp81923e); $spd45dec .= $sp395709 . '
'; $spd45dec .= 'Content-Disposition: form-data; name="' . $sp4172b4 . '"; filename="' . $sp61be63 . '"' . '
'; $spd45dec .= 'Content-Type: image/unknown

'; $spd45dec .= $sp3e892f . '
'; } $spd45dec .= $sp8278ff; return $spd45dec; } }