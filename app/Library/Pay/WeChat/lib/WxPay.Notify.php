<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($spf75b47 = true) { $spe62cd8 = WxpayApi::notify(array($this, 'NotifyCallBack'), $spb18c75); if ($spe62cd8 == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($spb18c75); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($spf75b47); } public function NotifyProcess($spbda5b4, &$spb18c75) { return true; } public final function NotifyCallBack($spbda5b4) { $spb18c75 = 'OK'; $spe62cd8 = $this->NotifyProcess($spbda5b4, $spb18c75); if ($spe62cd8 == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($spb18c75); } return $spe62cd8; } private final function ReplyNotify($spf75b47 = true) { if ($spf75b47 == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }