<?php
function createLinkString($spaee562) { $spdef461 = ''; foreach ($spaee562 as $spc37b44 => $spfca62c) { $spdef461 .= $spc37b44 . '=' . $spfca62c . '&'; } $spdef461 = substr($spdef461, 0, strlen($spdef461) - 1); if (get_magic_quotes_gpc()) { $spdef461 = stripslashes($spdef461); } return $spdef461; } function createLinkStringUrlEncode($spaee562) { $spdef461 = ''; foreach ($spaee562 as $spc37b44 => $spfca62c) { $spdef461 .= $spc37b44 . '=' . urlencode($spfca62c) . '&'; } $spdef461 = substr($spdef461, 0, strlen($spdef461) - 1); if (get_magic_quotes_gpc()) { $spdef461 = stripslashes($spdef461); } return $spdef461; } function paraFilter($spaee562) { $sp174189 = array(); foreach ($spaee562 as $spc37b44 => $spfca62c) { if ($spc37b44 == 'sign' || $spc37b44 == 'sign_type' || $spfca62c == '') { continue; } else { $sp174189[$spc37b44] = $spaee562[$spc37b44]; } } return $sp174189; } function argSort($spaee562) { ksort($spaee562); reset($spaee562); return $spaee562; } function logResult($spbef259 = '') { $sp233a86 = fopen('log.txt', 'a'); flock($sp233a86, LOCK_EX); fwrite($sp233a86, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $spbef259 . '
'); flock($sp233a86, LOCK_UN); fclose($sp233a86); } function getHttpResponsePOST($sp81923e, $spe6f49b, $spaee562, $sp66d4a8 = '') { if (trim($sp66d4a8) != '') { $sp81923e = $sp81923e . '_input_charset=' . $sp66d4a8; } $spb54518 = curl_init($sp81923e); curl_setopt($spb54518, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spb54518, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spb54518, CURLOPT_CAINFO, $spe6f49b); curl_setopt($spb54518, CURLOPT_HEADER, 0); curl_setopt($spb54518, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spb54518, CURLOPT_POST, true); curl_setopt($spb54518, CURLOPT_POSTFIELDS, $spaee562); $spc7d388 = curl_exec($spb54518); curl_close($spb54518); return $spc7d388; } function getHttpResponseGET($sp81923e, $spe6f49b) { $spb54518 = curl_init($sp81923e); curl_setopt($spb54518, CURLOPT_HEADER, 0); curl_setopt($spb54518, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spb54518, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spb54518, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spb54518, CURLOPT_CAINFO, $spe6f49b); $spc7d388 = curl_exec($spb54518); curl_close($spb54518); return $spc7d388; } function charsetEncode($sp317e70, $sp27af0c, $spdc7c21) { if (!isset($sp27af0c)) { $sp27af0c = $spdc7c21; } if ($spdc7c21 == $sp27af0c || $sp317e70 == null) { $sp975c2a = $sp317e70; } elseif (function_exists('mb_convert_encoding')) { $sp975c2a = mb_convert_encoding($sp317e70, $sp27af0c, $spdc7c21); } elseif (function_exists('iconv')) { $sp975c2a = iconv($spdc7c21, $sp27af0c, $sp317e70); } else { die('sorry, you have no libs support for charset change.'); } return $sp975c2a; } function charsetDecode($sp317e70, $spdc7c21, $sp27af0c) { if (!isset($spdc7c21)) { $sp27af0c = $spdc7c21; } if ($spdc7c21 == $sp27af0c || $sp317e70 == null) { $sp975c2a = $sp317e70; } elseif (function_exists('mb_convert_encoding')) { $sp975c2a = mb_convert_encoding($sp317e70, $sp27af0c, $spdc7c21); } elseif (function_exists('iconv')) { $sp975c2a = iconv($spdc7c21, $sp27af0c, $sp317e70); } else { die('sorry, you have no libs support for charset changes.'); } return $sp975c2a; }